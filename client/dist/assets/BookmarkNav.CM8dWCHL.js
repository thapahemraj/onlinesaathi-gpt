import{a1 as e}from"./vendor.CphWSTLN.js";import{useState as r,useMemo as t}from"react";import{Spinner as a,TooltipAnchor as s}from"@librechat/client";import{B as o,i,n}from"./radix-ui.DdkHAinG.js";import{F as m,y as l,u as c,a as d,c as u,B as j}from"./index.2tWY7dSo.js";import"./utilities.BTNfF1ni.js";import{u as p}from"./tanstack-vendor.DVV4vUjY.js";import{E as h,l as x,y as g,P as f}from"./headlessui.Dg00_BJ1.js";import"./markdown_highlight.YFvJ8PVJ.js";import"react-dom";import"./react-interactions.C2rPp_t4.js";import"./validation.xig1VQ4I.js";import"./math-katex.steiuUVT.js";import"./http-client.DhyQNT5o.js";import"./locales.DcNwsKmV.js";import"i18next";import"react-i18next";import"./i18n.CE40c5bP.js";import"./routing.CVoMIF_b.js";import"./date-utils.j-oxXFG2.js";import"./forms.DHEhur4C.js";import"./security-ui.DXoq3Ng6.js";import"./heic-converter.Cz_Prg7D.js";import"./animations.BUCsF4W9.js";import"./markdown-processing.6SqW5JNx.js";import"./codemirror-core.Db-SEkBm.js";import"./codemirror-state.BpbzyhTO.js";import"./codemirror-view.BXpYK4Vr.js";import"./codemirror-language.BxChQYYl.js";import"./sandpack.pmh-9YB0.js";import"./virtualization.B4GvZnf2.js";import"framer-motion";const b=({tag:t,selected:s,handleSubmit:n,icon:m,...l})=>{const[c,d]=r(!1);return e.jsx(h,{"aria-label":t,className:"group flex w-full gap-2 rounded-lg p-2.5 text-sm text-text-primary transition-colors duration-200 focus:outline-none data-[focus]:bg-surface-hover data-[focus-visible]:ring-2 data-[focus-visible]:ring-primary",...l,as:"button",onClick:async()=>{"New Bookmark"!==t?(d(!0),n(t),d(!1)):n()},children:e.jsx("div",{className:"flex grow items-center justify-between gap-2",children:e.jsxs("div",{className:"flex items-center gap-2",children:[null!=m?m:c?e.jsx(a,{className:"size-4"}):s?e.jsx(o,{"aria-hidden":"true",className:"size-4"}):e.jsx(i,{"aria-hidden":"true",className:"size-4"}),e.jsx("div",{style:{wordBreak:"break-word",overflowWrap:"anywhere"},children:t})]})})})},k=({tags:r,handleSubmit:t,header:a})=>{const{bookmarks:s}=c();return e.jsxs(e.Fragment,{children:[a,s.length>0&&e.jsx("div",{className:"my-1.5 h-px",role:"none"}),s.map(((a,s)=>e.jsx(b,{tag:a.tag,selected:r.includes(a.tag),handleSubmit:t},`${a._id??a.tag}-${s}`)))]})},v=({tags:r=[],setTags:t})=>{const{bookmarks:a}=c(),s=d(),o=()=>{t([])};return 0===a.length?e.jsxs("div",{className:"flex flex-col",children:[e.jsx(b,{tag:s("com_ui_clear_all"),"data-testid":"bookmark-item-clear",handleSubmit:o,selected:!1,icon:e.jsx(n,{"aria-hidden":"true",className:"size-4"})}),e.jsx(b,{tag:s("com_ui_no_bookmarks"),"data-testid":"bookmark-item-no-bookmarks",handleSubmit:()=>Promise.resolve(),selected:!1,icon:"ðŸ¤”"})]}):e.jsx("div",{className:"flex flex-col",children:e.jsx(k,{tags:r,handleSubmit:e=>{if(void 0===e)return;const a=(e=>r.some((r=>r===e))?r.filter((r=>r!==e)):[...r,e])(e);t(a)},header:e.jsx(b,{tag:s("com_ui_clear_all"),"data-testid":"bookmark-item-clear",handleSubmit:o,selected:!1,icon:e.jsx(n,{"aria-hidden":"true",className:"size-4"})})})})},N=({tags:r,setTags:a})=>{const n=d(),{data:c}=p([l.conversationTags],(()=>m.getConversationTags()),{refetchOnWindowFocus:!1,refetchOnReconnect:!1,refetchOnMount:!1,...h});var h;const b=t((()=>r.length>0?r.join(", "):n("com_ui_bookmarks")),[r,n]);return e.jsx(x,{as:"div",className:"group relative",children:({open:t})=>e.jsxs(e.Fragment,{children:[e.jsx(s,{description:b,render:e.jsx(g,{id:"bookmark-menu-button","aria-label":n("com_ui_bookmarks"),className:u("flex items-center justify-center","size-10 border-none text-text-primary hover:bg-accent hover:text-accent-foreground","rounded-full border-none p-2 hover:bg-surface-hover md:rounded-xl",t?"bg-surface-hover":""),"data-testid":"bookmark-menu",children:r.length>0?e.jsx(o,{"aria-hidden":"true",className:"icon-lg text-text-primary"}):e.jsx(i,{"aria-hidden":"true",className:"icon-lg text-text-primary"})})}),e.jsx(f,{anchor:"bottom",className:"absolute left-0 top-full z-[100] mt-1 w-60 translate-y-0 overflow-hidden rounded-lg bg-surface-secondary p-1.5 shadow-lg outline-none",children:c&&e.jsx(j.Provider,{value:{bookmarks:c.filter((e=>e.count>0))},children:e.jsx(v,{tags:r,setTags:a})})})]})})};export{N as default};
