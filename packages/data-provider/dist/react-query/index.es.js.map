{"version":3,"file":"index.es.js","sources":["../../src/types/assistants.ts","../../src/feedback.ts","../../src/schemas.ts","../../src/models.ts","../../src/utils.ts","../../src/file-config.ts","../../src/api-endpoints.ts","../../src/types/files.ts","../../src/types/agents.ts","../../src/mcp.ts","../../src/config.ts","../../src/request.ts","../../src/headers-helpers.ts","../../src/data-service.ts","../../src/keys.ts","../../src/accessPermissions.ts","../../src/react-query/react-query-service.ts"],"sourcesContent":["import type { OpenAPIV3 } from 'openapi-types';\nimport type { AssistantsEndpoint, AgentProvider } from 'src/schemas';\nimport type { Agents, GraphEdge } from './agents';\nimport type { ContentTypes } from './runs';\nimport type { TFile } from './files';\nimport { ArtifactModes } from 'src/artifacts';\n\nexport type Schema = OpenAPIV3.SchemaObject & { description?: string };\nexport type Reference = OpenAPIV3.ReferenceObject & { description?: string };\n\nexport type Metadata = {\n  avatar?: string;\n  author?: string;\n} & {\n  [key: string]: unknown;\n};\n\nexport enum Tools {\n  execute_code = 'execute_code',\n  code_interpreter = 'code_interpreter',\n  file_search = 'file_search',\n  web_search = 'web_search',\n  retrieval = 'retrieval',\n  function = 'function',\n  memory = 'memory',\n  ui_resources = 'ui_resources',\n}\n\nexport enum EToolResources {\n  code_interpreter = 'code_interpreter',\n  execute_code = 'execute_code',\n  file_search = 'file_search',\n  image_edit = 'image_edit',\n  context = 'context',\n  ocr = 'ocr',\n}\n\nexport type Tool = {\n  [type: string]: Tools;\n};\n\nexport type FunctionTool = {\n  type: Tools;\n  function?: {\n    description: string;\n    name: string;\n    parameters: Record<string, unknown>;\n    strict?: boolean;\n    additionalProperties?: boolean; // must be false if strict is true https://platform.openai.com/docs/guides/structured-outputs/some-type-specific-keywords-are-not-yet-supported\n  };\n};\n\n/**\n * A set of resources that are used by the assistant's tools. The resources are\n * specific to the type of tool. For example, the `code_interpreter` tool requires\n * a list of file IDs, while the `file_search` tool requires a list of vector store\n * IDs.\n */\nexport interface ToolResources {\n  code_interpreter?: CodeInterpreterResource;\n  file_search?: FileSearchResource;\n}\nexport interface CodeInterpreterResource {\n  /**\n   * A list of [file](https://platform.openai.com/docs/api-reference/files) IDs made\n   * available to the `code_interpreter`` tool. There can be a maximum of 20 files\n   * associated with the tool.\n   */\n  file_ids?: Array<string>;\n}\n\nexport interface FileSearchResource {\n  /**\n   * The ID of the\n   * [vector store](https://platform.openai.com/docs/api-reference/vector-stores/object)\n   * attached to this assistant. There can be a maximum of 1 vector store attached to\n   * the assistant.\n   */\n  vector_store_ids?: Array<string>;\n}\n\n/* Assistant types */\n\nexport type Assistant = {\n  id: string;\n  created_at: number;\n  description: string | null;\n  file_ids?: string[];\n  instructions: string | null;\n  conversation_starters?: string[];\n  metadata: Metadata | null;\n  model: string;\n  name: string | null;\n  object: string;\n  tools?: FunctionTool[];\n  tool_resources?: ToolResources;\n};\n\nexport type TAssistantsMap = Record<AssistantsEndpoint, Record<string, Assistant>>;\n\nexport type AssistantCreateParams = {\n  model: string;\n  description?: string | null;\n  file_ids?: string[];\n  instructions?: string | null;\n  conversation_starters?: string[];\n  metadata?: Metadata | null;\n  name?: string | null;\n  tools?: Array<FunctionTool | string>;\n  endpoint: AssistantsEndpoint;\n  version: number | string;\n  append_current_datetime?: boolean;\n};\n\nexport type AssistantUpdateParams = {\n  model?: string;\n  description?: string | null;\n  file_ids?: string[];\n  instructions?: string | null;\n  conversation_starters?: string[] | null;\n  metadata?: Metadata | null;\n  name?: string | null;\n  tools?: Array<FunctionTool | string>;\n  tool_resources?: ToolResources;\n  endpoint: AssistantsEndpoint;\n  append_current_datetime?: boolean;\n};\n\nexport type AssistantListParams = {\n  limit?: number;\n  before?: string | null;\n  after?: string | null;\n  order?: 'asc' | 'desc';\n  endpoint: AssistantsEndpoint;\n};\n\nexport type AssistantListResponse = {\n  object: string;\n  data: Assistant[];\n  first_id: string;\n  last_id: string;\n  has_more: boolean;\n};\n\nexport type File = {\n  file_id: string;\n  id?: string;\n  temp_file_id?: string;\n  bytes: number;\n  created_at: number;\n  filename: string;\n  object: string;\n  purpose: 'fine-tune' | 'fine-tune-results' | 'assistants' | 'assistants_output';\n};\n\n/* Agent types */\n\nexport type AgentParameterValue = number | string | null;\n\nexport type AgentModelParameters = {\n  model?: string;\n  temperature: AgentParameterValue;\n  maxContextTokens: AgentParameterValue;\n  max_context_tokens: AgentParameterValue;\n  max_output_tokens: AgentParameterValue;\n  top_p: AgentParameterValue;\n  frequency_penalty: AgentParameterValue;\n  presence_penalty: AgentParameterValue;\n};\n\nexport interface AgentBaseResource {\n  /**\n   * A list of file IDs made available to the tool.\n   */\n  file_ids?: Array<string>;\n  /**\n   * A list of files already fetched.\n   */\n  files?: Array<TFile>;\n}\n\nexport interface AgentToolResources {\n  [EToolResources.image_edit]?: AgentBaseResource;\n  [EToolResources.execute_code]?: ExecuteCodeResource;\n  [EToolResources.file_search]?: AgentFileResource;\n  [EToolResources.context]?: AgentBaseResource;\n  /** @deprecated Use context instead */\n  [EToolResources.ocr]?: AgentBaseResource;\n}\n/**\n * A resource for the execute_code tool.\n * Contains file IDs made available to the tool (max 20 files) and already fetched files.\n */\nexport type ExecuteCodeResource = AgentBaseResource;\n\nexport interface AgentFileResource extends AgentBaseResource {\n  /**\n   * The ID of the vector store attached to this agent. There\n   * can be a maximum of 1 vector store attached to the agent.\n   */\n  vector_store_ids?: Array<string>;\n}\nexport type SupportContact = {\n  name?: string;\n  email?: string;\n};\n\nexport type Agent = {\n  _id?: string;\n  id: string;\n  name: string | null;\n  author?: string | null;\n  /** The original custom endpoint name, lowercased */\n  endpoint?: string | null;\n  authorName?: string | null;\n  description: string | null;\n  created_at: number;\n  avatar: AgentAvatar | null;\n  instructions: string | null;\n  additional_instructions?: string | null;\n  tools?: string[];\n  projectIds?: string[];\n  tool_kwargs?: Record<string, unknown>;\n  metadata?: Record<string, unknown>;\n  provider: AgentProvider;\n  model: string | null;\n  model_parameters: AgentModelParameters;\n  conversation_starters?: string[];\n  /** @deprecated Use ACL permissions instead */\n  isCollaborative?: boolean;\n  tool_resources?: AgentToolResources;\n  /** @deprecated Use edges instead */\n  agent_ids?: string[];\n  edges?: GraphEdge[];\n  end_after_tools?: boolean;\n  hide_sequential_outputs?: boolean;\n  artifacts?: ArtifactModes;\n  recursion_limit?: number;\n  isPublic?: boolean;\n  version?: number;\n  category?: string;\n  support_contact?: SupportContact;\n};\n\nexport type TAgentsMap = Record<string, Agent | undefined>;\n\nexport type AgentCreateParams = {\n  name?: string | null;\n  description?: string | null;\n  avatar?: AgentAvatar | null;\n  file_ids?: string[];\n  instructions?: string | null;\n  tools?: Array<FunctionTool | string>;\n  provider: AgentProvider;\n  model: string | null;\n  model_parameters: AgentModelParameters;\n} & Pick<\n  Agent,\n  | 'agent_ids'\n  | 'edges'\n  | 'end_after_tools'\n  | 'hide_sequential_outputs'\n  | 'artifacts'\n  | 'recursion_limit'\n  | 'category'\n  | 'support_contact'\n>;\n\nexport type AgentUpdateParams = {\n  name?: string | null;\n  description?: string | null;\n  avatar?: AgentAvatar | null;\n  file_ids?: string[];\n  instructions?: string | null;\n  tools?: Array<FunctionTool | string>;\n  tool_resources?: ToolResources;\n  provider?: AgentProvider;\n  model?: string | null;\n  model_parameters?: AgentModelParameters;\n  projectIds?: string[];\n  removeProjectIds?: string[];\n  isCollaborative?: boolean;\n} & Pick<\n  Agent,\n  | 'agent_ids'\n  | 'edges'\n  | 'end_after_tools'\n  | 'hide_sequential_outputs'\n  | 'artifacts'\n  | 'recursion_limit'\n  | 'category'\n  | 'support_contact'\n>;\n\nexport type AgentListParams = {\n  limit?: number;\n  requiredPermission: number;\n  category?: string;\n  search?: string;\n  cursor?: string;\n  promoted?: 0 | 1;\n};\n\nexport type AgentListResponse = {\n  object: string;\n  data: Agent[];\n  first_id: string;\n  last_id: string;\n  has_more: boolean;\n  after?: string;\n};\n\nexport type AgentFile = {\n  file_id: string;\n  id?: string;\n  temp_file_id?: string;\n  bytes: number;\n  created_at: number;\n  filename: string;\n  object: string;\n  purpose: 'fine-tune' | 'fine-tune-results' | 'agents' | 'agents_output';\n};\n\n/**\n * Details of the Code Interpreter tool call the run step was involved in.\n * Includes the tool call ID, the code interpreter definition, and the type of tool call.\n */\nexport type CodeToolCall = {\n  id: string; // The ID of the tool call.\n  code_interpreter: {\n    input: string; // The input to the Code Interpreter tool call.\n    outputs: Array<Record<string, unknown>>; // The outputs from the Code Interpreter tool call.\n  };\n  type: 'code_interpreter'; // The type of tool call, always 'code_interpreter'.\n};\n\n/**\n * Details of a Function tool call the run step was involved in.\n * Includes the tool call ID, the function definition, and the type of tool call.\n */\nexport type FunctionToolCall = {\n  id: string; // The ID of the tool call object.\n  function: {\n    arguments: string; // The arguments passed to the function.\n    name: string; // The name of the function.\n    output: string | null; // The output of the function, null if not submitted.\n  };\n  type: 'function'; // The type of tool call, always 'function'.\n};\n\n/**\n * Details of a Retrieval tool call the run step was involved in.\n * Includes the tool call ID and the type of tool call.\n */\nexport type RetrievalToolCall = {\n  id: string; // The ID of the tool call object.\n  retrieval: unknown; // An empty object for now.\n  type: 'retrieval'; // The type of tool call, always 'retrieval'.\n};\n\n/**\n * Details of a Retrieval tool call the run step was involved in.\n * Includes the tool call ID and the type of tool call.\n */\nexport type FileSearchToolCall = {\n  id: string; // The ID of the tool call object.\n  file_search: unknown; // An empty object for now.\n  type: 'file_search'; // The type of tool call, always 'retrieval'.\n};\n\n/**\n * Details of the tool calls involved in a run step.\n * Can be associated with one of three types of tools: `code_interpreter`, `retrieval`, or `function`.\n */\nexport type ToolCallsStepDetails = {\n  tool_calls: Array<CodeToolCall | RetrievalToolCall | FileSearchToolCall | FunctionToolCall>; // An array of tool calls the run step was involved in.\n  type: 'tool_calls'; // Always 'tool_calls'.\n};\n\nexport type ImageFile = TFile & {\n  /**\n   * The [File](https://platform.openai.com/docs/api-reference/files) ID of the image\n   * in the message content.\n   */\n  file_id: string;\n  filename: string;\n  filepath: string;\n  height: number;\n  width: number;\n  /**\n   * Prompt used to generate the image if applicable.\n   */\n  prompt?: string;\n  /**\n   * Additional metadata used to generate or about the image/tool_call.\n   */\n  metadata?: Record<string, unknown>;\n};\n\n// FileCitation.ts\nexport type FileCitation = {\n  end_index: number;\n  file_citation: FileCitationDetails;\n  start_index: number;\n  text: string;\n  type: 'file_citation';\n};\n\nexport type FileCitationDetails = {\n  file_id: string;\n  quote: string;\n};\n\nexport type FilePath = {\n  end_index: number;\n  file_path: FilePathDetails;\n  start_index: number;\n  text: string;\n  type: 'file_path';\n};\n\nexport type FilePathDetails = {\n  file_id: string;\n};\n\nexport type Text = {\n  annotations?: Array<FileCitation | FilePath>;\n  value: string;\n};\n\nexport enum AnnotationTypes {\n  FILE_CITATION = 'file_citation',\n  FILE_PATH = 'file_path',\n}\n\nexport enum StepStatus {\n  IN_PROGRESS = 'in_progress',\n  CANCELLED = 'cancelled',\n  FAILED = 'failed',\n  COMPLETED = 'completed',\n  EXPIRED = 'expired',\n}\n\nexport enum MessageContentTypes {\n  TEXT = 'text',\n  IMAGE_FILE = 'image_file',\n}\n\n//enum for RunStatus\n// The status of the run: queued, in_progress, requires_action, cancelling, cancelled, failed, completed, or expired.\nexport enum RunStatus {\n  QUEUED = 'queued',\n  IN_PROGRESS = 'in_progress',\n  REQUIRES_ACTION = 'requires_action',\n  CANCELLING = 'cancelling',\n  CANCELLED = 'cancelled',\n  FAILED = 'failed',\n  COMPLETED = 'completed',\n  EXPIRED = 'expired',\n}\n\nexport type PartMetadata = {\n  progress?: number;\n  asset_pointer?: string;\n  status?: string;\n  action?: boolean;\n  auth?: string;\n  expires_at?: number;\n};\n\nexport type ContentPart = (\n  | CodeToolCall\n  | RetrievalToolCall\n  | FileSearchToolCall\n  | FunctionToolCall\n  | Agents.AgentToolCall\n  | ImageFile\n  | Text\n) &\n  PartMetadata;\n\nexport type TextData = (Text & PartMetadata) | undefined;\n\nexport type TMessageContentParts =\n  | {\n      type: ContentTypes.ERROR;\n      text?: string | TextData;\n      error?: string;\n    }\n  | { type: ContentTypes.THINK; think?: string | TextData }\n  | {\n      type: ContentTypes.TEXT;\n      text?: string | TextData;\n      tool_call_ids?: string[];\n    }\n  | {\n      type: ContentTypes.TOOL_CALL;\n      tool_call: (\n        | CodeToolCall\n        | RetrievalToolCall\n        | FileSearchToolCall\n        | FunctionToolCall\n        | Agents.AgentToolCall\n      ) &\n        PartMetadata;\n    }\n  | { type: ContentTypes.IMAGE_FILE; image_file: ImageFile & PartMetadata }\n  | Agents.AgentUpdate\n  | Agents.MessageContentImageUrl;\n\nexport type StreamContentData = TMessageContentParts & {\n  /** The index of the current content part */\n  index: number;\n  /** The current text content was already served but edited to replace elements therein */\n  edited?: boolean;\n};\n\nexport type TContentData = StreamContentData & {\n  messageId: string;\n  conversationId: string;\n  userMessageId: string;\n  thread_id: string;\n  stream?: boolean;\n};\n\nexport const actionDelimiter = '_action_';\nexport const actionDomainSeparator = '---';\nexport const hostImageIdSuffix = '_host_copy';\nexport const hostImageNamePrefix = 'host_copy_';\n\nexport type AssistantAvatar = {\n  filepath: string;\n  source: string;\n};\n\nexport type AssistantDocument = {\n  user: string;\n  assistant_id: string;\n  conversation_starters?: string[];\n  avatar?: AssistantAvatar;\n  access_level?: number;\n  file_ids?: string[];\n  actions?: string[];\n  createdAt?: Date;\n  updatedAt?: Date;\n  append_current_datetime?: boolean;\n};\n\n/* Agent types */\n\nexport type AgentAvatar = {\n  filepath: string;\n  source: string;\n};\n\nexport enum FilePurpose {\n  Vision = 'vision',\n  FineTune = 'fine-tune',\n  FineTuneResults = 'fine-tune-results',\n  Assistants = 'assistants',\n  AssistantsOutput = 'assistants_output',\n}\n\nexport const defaultOrderQuery: {\n  order: 'desc';\n  limit: 100;\n} = {\n  order: 'desc',\n  limit: 100,\n};\n\nexport enum AssistantStreamEvents {\n  ThreadCreated = 'thread.created',\n  ThreadRunCreated = 'thread.run.created',\n  ThreadRunQueued = 'thread.run.queued',\n  ThreadRunInProgress = 'thread.run.in_progress',\n  ThreadRunRequiresAction = 'thread.run.requires_action',\n  ThreadRunCompleted = 'thread.run.completed',\n  ThreadRunFailed = 'thread.run.failed',\n  ThreadRunCancelling = 'thread.run.cancelling',\n  ThreadRunCancelled = 'thread.run.cancelled',\n  ThreadRunExpired = 'thread.run.expired',\n  ThreadRunStepCreated = 'thread.run.step.created',\n  ThreadRunStepInProgress = 'thread.run.step.in_progress',\n  ThreadRunStepCompleted = 'thread.run.step.completed',\n  ThreadRunStepFailed = 'thread.run.step.failed',\n  ThreadRunStepCancelled = 'thread.run.step.cancelled',\n  ThreadRunStepExpired = 'thread.run.step.expired',\n  ThreadRunStepDelta = 'thread.run.step.delta',\n  ThreadMessageCreated = 'thread.message.created',\n  ThreadMessageInProgress = 'thread.message.in_progress',\n  ThreadMessageCompleted = 'thread.message.completed',\n  ThreadMessageIncomplete = 'thread.message.incomplete',\n  ThreadMessageDelta = 'thread.message.delta',\n  ErrorEvent = 'error',\n}\n","import { z } from 'zod';\n\nexport type TFeedbackRating = 'thumbsUp' | 'thumbsDown';\nexport const FEEDBACK_RATINGS = ['thumbsUp', 'thumbsDown'] as const;\n\nexport const FEEDBACK_REASON_KEYS = [\n  // Down\n  'not_matched',\n  'inaccurate',\n  'bad_style',\n  'missing_image',\n  'unjustified_refusal',\n  'not_helpful',\n  'other',\n  // Up\n  'accurate_reliable',\n  'creative_solution',\n  'clear_well_written',\n  'attention_to_detail',\n] as const;\n\nexport type TFeedbackTagKey = (typeof FEEDBACK_REASON_KEYS)[number];\n\nexport interface TFeedbackTag {\n  key: TFeedbackTagKey;\n  label: string;\n  direction: TFeedbackRating;\n  icon: string;\n}\n\n// --- Tag Registry ---\nexport const FEEDBACK_TAGS: TFeedbackTag[] = [\n  // Thumbs Down\n  {\n    key: 'not_matched',\n    label: 'com_ui_feedback_tag_not_matched',\n    direction: 'thumbsDown',\n    icon: 'AlertCircle',\n  },\n  {\n    key: 'inaccurate',\n    label: 'com_ui_feedback_tag_inaccurate',\n    direction: 'thumbsDown',\n    icon: 'AlertCircle',\n  },\n  {\n    key: 'bad_style',\n    label: 'com_ui_feedback_tag_bad_style',\n    direction: 'thumbsDown',\n    icon: 'PenTool',\n  },\n  {\n    key: 'missing_image',\n    label: 'com_ui_feedback_tag_missing_image',\n    direction: 'thumbsDown',\n    icon: 'ImageOff',\n  },\n  {\n    key: 'unjustified_refusal',\n    label: 'com_ui_feedback_tag_unjustified_refusal',\n    direction: 'thumbsDown',\n    icon: 'Ban',\n  },\n  {\n    key: 'not_helpful',\n    label: 'com_ui_feedback_tag_not_helpful',\n    direction: 'thumbsDown',\n    icon: 'ThumbsDown',\n  },\n  {\n    key: 'other',\n    label: 'com_ui_feedback_tag_other',\n    direction: 'thumbsDown',\n    icon: 'HelpCircle',\n  },\n  // Thumbs Up\n  {\n    key: 'accurate_reliable',\n    label: 'com_ui_feedback_tag_accurate_reliable',\n    direction: 'thumbsUp',\n    icon: 'CheckCircle',\n  },\n  {\n    key: 'creative_solution',\n    label: 'com_ui_feedback_tag_creative_solution',\n    direction: 'thumbsUp',\n    icon: 'Lightbulb',\n  },\n  {\n    key: 'clear_well_written',\n    label: 'com_ui_feedback_tag_clear_well_written',\n    direction: 'thumbsUp',\n    icon: 'PenTool',\n  },\n  {\n    key: 'attention_to_detail',\n    label: 'com_ui_feedback_tag_attention_to_detail',\n    direction: 'thumbsUp',\n    icon: 'Search',\n  },\n];\n\nexport function getTagsForRating(rating: TFeedbackRating): TFeedbackTag[] {\n  return FEEDBACK_TAGS.filter((tag) => tag.direction === rating);\n}\n\nexport const feedbackTagKeySchema = z.enum(FEEDBACK_REASON_KEYS);\nexport const feedbackRatingSchema = z.enum(FEEDBACK_RATINGS);\n\nexport const feedbackSchema = z.object({\n  rating: feedbackRatingSchema,\n  tag: feedbackTagKeySchema,\n  text: z.string().max(1024).optional(),\n});\n\nexport type TMinimalFeedback = z.infer<typeof feedbackSchema>;\n\nexport type TFeedback = {\n  rating: TFeedbackRating;\n  tag: TFeedbackTag | undefined;\n  text?: string;\n};\n\nexport function toMinimalFeedback(feedback: TFeedback | undefined): TMinimalFeedback | undefined {\n  if (!feedback?.rating || !feedback?.tag || !feedback.tag.key) {\n    return undefined;\n  }\n\n  return {\n    rating: feedback.rating,\n    tag: feedback.tag.key,\n    text: feedback.text,\n  };\n}\n\nexport function getTagByKey(key: TFeedbackTagKey | undefined): TFeedbackTag | undefined {\n  if (!key) {\n    return undefined;\n  }\n  return FEEDBACK_TAGS.find((tag) => tag.key === key);\n}\n","import { z } from 'zod';\nimport { Tools } from './types/assistants';\nimport type { TMessageContentParts, FunctionTool, FunctionToolCall } from './types/assistants';\nimport { TFeedback, feedbackSchema } from './feedback';\nimport type { SearchResultData } from './types/web';\nimport type { TFile } from './types/files';\n\nexport const isUUID = z.string().uuid();\n\nexport enum AuthType {\n  OVERRIDE_AUTH = 'override_auth',\n  USER_PROVIDED = 'user_provided',\n  SYSTEM_DEFINED = 'system_defined',\n}\n\nexport const authTypeSchema = z.nativeEnum(AuthType);\n\nexport enum EModelEndpoint {\n  azureOpenAI = 'azureOpenAI',\n  openAI = 'openAI',\n  google = 'google',\n  anthropic = 'anthropic',\n  assistants = 'assistants',\n  azureAssistants = 'azureAssistants',\n  agents = 'agents',\n  custom = 'custom',\n  bedrock = 'bedrock',\n}\n\n/** Mirrors `@librechat/agents` providers */\nexport enum Providers {\n  OPENAI = 'openAI',\n  ANTHROPIC = 'anthropic',\n  AZURE = 'azureOpenAI',\n  GOOGLE = 'google',\n  VERTEXAI = 'vertexai',\n  BEDROCK = 'bedrock',\n  MISTRALAI = 'mistralai',\n  MISTRAL = 'mistral',\n  DEEPSEEK = 'deepseek',\n  OPENROUTER = 'openrouter',\n  XAI = 'xai',\n}\n\n/**\n * Endpoints that support direct PDF processing in the agent system\n */\nexport const documentSupportedProviders = new Set<string>([\n  EModelEndpoint.anthropic,\n  EModelEndpoint.openAI,\n  EModelEndpoint.custom,\n  EModelEndpoint.azureOpenAI,\n  EModelEndpoint.google,\n  Providers.VERTEXAI,\n  Providers.MISTRALAI,\n  Providers.MISTRAL,\n  Providers.DEEPSEEK,\n  Providers.OPENROUTER,\n  Providers.XAI,\n]);\n\nconst openAILikeProviders = new Set<string>([\n  Providers.OPENAI,\n  Providers.AZURE,\n  EModelEndpoint.custom,\n  Providers.MISTRALAI,\n  Providers.MISTRAL,\n  Providers.DEEPSEEK,\n  Providers.OPENROUTER,\n  Providers.XAI,\n]);\n\nexport const isOpenAILikeProvider = (provider?: string | null): boolean => {\n  return openAILikeProviders.has(provider ?? '');\n};\n\nexport const isDocumentSupportedProvider = (provider?: string | null): boolean => {\n  return documentSupportedProviders.has(provider ?? '');\n};\n\nexport const paramEndpoints = new Set<EModelEndpoint | string>([\n  EModelEndpoint.agents,\n  EModelEndpoint.openAI,\n  EModelEndpoint.bedrock,\n  EModelEndpoint.azureOpenAI,\n  EModelEndpoint.anthropic,\n  EModelEndpoint.custom,\n  EModelEndpoint.google,\n]);\n\nexport enum BedrockProviders {\n  AI21 = 'ai21',\n  Amazon = 'amazon',\n  Anthropic = 'anthropic',\n  Cohere = 'cohere',\n  Meta = 'meta',\n  MistralAI = 'mistral',\n  StabilityAI = 'stability',\n  DeepSeek = 'deepseek',\n}\n\nexport const getModelKey = (endpoint: EModelEndpoint | string, model: string) => {\n  if (endpoint === EModelEndpoint.bedrock) {\n    const parts = model.split('.');\n    const provider = [parts[0], parts[1]].find((part) =>\n      Object.values(BedrockProviders).includes(part as BedrockProviders),\n    );\n    return (provider ?? parts[0]) as BedrockProviders;\n  }\n  return model;\n};\n\nexport const getSettingsKeys = (endpoint: EModelEndpoint | string, model: string) => {\n  const endpointKey = endpoint;\n  const modelKey = getModelKey(endpointKey, model);\n  const combinedKey = `${endpointKey}-${modelKey}`;\n  return [combinedKey, endpointKey];\n};\n\nexport type AssistantsEndpoint = EModelEndpoint.assistants | EModelEndpoint.azureAssistants;\n\nexport const isAssistantsEndpoint = (_endpoint?: AssistantsEndpoint | null | string): boolean => {\n  const endpoint = _endpoint ?? '';\n  if (!endpoint) {\n    return false;\n  }\n  return endpoint.toLowerCase().endsWith(EModelEndpoint.assistants);\n};\n\nexport type AgentProvider = Exclude<keyof typeof EModelEndpoint, EModelEndpoint.agents> | string;\n\nexport const isAgentsEndpoint = (_endpoint?: EModelEndpoint.agents | null | string): boolean => {\n  const endpoint = _endpoint ?? '';\n  if (!endpoint) {\n    return false;\n  }\n  return endpoint === EModelEndpoint.agents;\n};\n\nexport const isParamEndpoint = (\n  endpoint: EModelEndpoint | string,\n  endpointType?: EModelEndpoint | string,\n): boolean => {\n  if (paramEndpoints.has(endpoint)) {\n    return true;\n  }\n\n  if (endpointType != null) {\n    return paramEndpoints.has(endpointType);\n  }\n\n  return false;\n};\n\nexport enum ImageDetail {\n  low = 'low',\n  auto = 'auto',\n  high = 'high',\n}\n\nexport enum ReasoningEffort {\n  unset = '',\n  none = 'none',\n  minimal = 'minimal',\n  low = 'low',\n  medium = 'medium',\n  high = 'high',\n}\n\nexport enum ReasoningSummary {\n  none = '',\n  auto = 'auto',\n  concise = 'concise',\n  detailed = 'detailed',\n}\n\nexport enum Verbosity {\n  none = '',\n  low = 'low',\n  medium = 'medium',\n  high = 'high',\n}\n\nexport const imageDetailNumeric = {\n  [ImageDetail.low]: 0,\n  [ImageDetail.auto]: 1,\n  [ImageDetail.high]: 2,\n};\n\nexport const imageDetailValue = {\n  0: ImageDetail.low,\n  1: ImageDetail.auto,\n  2: ImageDetail.high,\n};\n\nexport const eImageDetailSchema = z.nativeEnum(ImageDetail);\nexport const eReasoningEffortSchema = z.nativeEnum(ReasoningEffort);\nexport const eReasoningSummarySchema = z.nativeEnum(ReasoningSummary);\nexport const eVerbositySchema = z.nativeEnum(Verbosity);\n\nexport const defaultAssistantFormValues = {\n  assistant: '',\n  id: '',\n  name: '',\n  description: '',\n  instructions: '',\n  conversation_starters: [],\n  model: '',\n  functions: [],\n  code_interpreter: false,\n  image_vision: false,\n  retrieval: false,\n  append_current_datetime: false,\n};\n\nexport const defaultAgentFormValues = {\n  agent: {},\n  id: '',\n  name: '',\n  description: '',\n  instructions: '',\n  model: '',\n  model_parameters: {},\n  tools: [],\n  provider: {},\n  projectIds: [],\n  edges: [],\n  artifacts: '',\n  /** @deprecated Use ACL permissions instead */\n  isCollaborative: false,\n  recursion_limit: undefined,\n  [Tools.execute_code]: false,\n  [Tools.file_search]: false,\n  [Tools.web_search]: false,\n  category: 'general',\n  support_contact: {\n    name: '',\n    email: '',\n  },\n};\n\nexport const ImageVisionTool: FunctionTool = {\n  type: Tools.function,\n  [Tools.function]: {\n    name: 'image_vision',\n    description: 'Get detailed text descriptions for all current image attachments.',\n    parameters: {\n      type: 'object',\n      properties: {},\n      required: [],\n    },\n  },\n};\n\nexport const isImageVisionTool = (tool: FunctionTool | FunctionToolCall) =>\n  tool.type === 'function' && tool.function?.name === ImageVisionTool.function?.name;\n\nexport const openAISettings = {\n  model: {\n    default: 'gpt-4o-mini' as const,\n  },\n  temperature: {\n    min: 0 as const,\n    max: 2 as const,\n    step: 0.01 as const,\n    default: 1 as const,\n  },\n  top_p: {\n    min: 0 as const,\n    max: 1 as const,\n    step: 0.01 as const,\n    default: 1 as const,\n  },\n  presence_penalty: {\n    min: -2 as const,\n    max: 2 as const,\n    step: 0.01 as const,\n    default: 0 as const,\n  },\n  frequency_penalty: {\n    min: -2 as const,\n    max: 2 as const,\n    step: 0.01 as const,\n    default: 0 as const,\n  },\n  resendFiles: {\n    default: true as const,\n  },\n  maxContextTokens: {\n    default: undefined,\n  },\n  max_tokens: {\n    default: undefined,\n  },\n  imageDetail: {\n    default: ImageDetail.auto as const,\n    min: 0 as const,\n    max: 2 as const,\n    step: 1 as const,\n  },\n};\n\nexport const googleSettings = {\n  model: {\n    default: 'gemini-1.5-flash-latest' as const,\n  },\n  maxOutputTokens: {\n    min: 1 as const,\n    max: 64000 as const,\n    step: 1 as const,\n    default: 8192 as const,\n  },\n  temperature: {\n    min: 0 as const,\n    max: 2 as const,\n    step: 0.01 as const,\n    default: 1 as const,\n  },\n  topP: {\n    min: 0 as const,\n    max: 1 as const,\n    step: 0.01 as const,\n    default: 0.95 as const,\n  },\n  topK: {\n    min: 1 as const,\n    max: 40 as const,\n    step: 1 as const,\n    default: 40 as const,\n  },\n  thinking: {\n    default: true as const,\n  },\n  thinkingBudget: {\n    min: -1 as const,\n    max: 32000 as const,\n    step: 1 as const,\n    /** `-1` = Dynamic Thinking, meaning the model will adjust\n     * the budget based on the complexity of the request.\n     */\n    default: -1 as const,\n  },\n};\n\nconst ANTHROPIC_MAX_OUTPUT = 128000 as const;\nconst CLAUDE_4_64K_MAX_OUTPUT = 64000 as const;\nconst CLAUDE_32K_MAX_OUTPUT = 32000 as const;\nconst DEFAULT_MAX_OUTPUT = 8192 as const;\nconst LEGACY_ANTHROPIC_MAX_OUTPUT = 4096 as const;\nexport const anthropicSettings = {\n  model: {\n    default: 'claude-3-5-sonnet-latest' as const,\n  },\n  temperature: {\n    min: 0 as const,\n    max: 1 as const,\n    step: 0.01 as const,\n    default: 1 as const,\n  },\n  promptCache: {\n    default: true as const,\n  },\n  thinking: {\n    default: true as const,\n  },\n  thinkingBudget: {\n    min: 1024 as const,\n    step: 100 as const,\n    max: 200000 as const,\n    default: 2000 as const,\n  },\n  maxOutputTokens: {\n    min: 1 as const,\n    max: ANTHROPIC_MAX_OUTPUT,\n    step: 1 as const,\n    default: DEFAULT_MAX_OUTPUT,\n    reset: (modelName: string) => {\n      if (/claude-(?:sonnet|haiku)[-.]?[4-9]/.test(modelName)) {\n        return CLAUDE_4_64K_MAX_OUTPUT;\n      }\n\n      if (/claude-opus[-.]?(?:[5-9]|4[-.]?([5-9]|\\d{2,}))/.test(modelName)) {\n        return CLAUDE_4_64K_MAX_OUTPUT;\n      }\n\n      if (/claude-opus[-.]?[4-9]/.test(modelName)) {\n        return CLAUDE_32K_MAX_OUTPUT;\n      }\n\n      return DEFAULT_MAX_OUTPUT;\n    },\n    set: (value: number, modelName: string) => {\n      if (/claude-(?:sonnet|haiku)[-.]?[4-9]/.test(modelName) && value > CLAUDE_4_64K_MAX_OUTPUT) {\n        return CLAUDE_4_64K_MAX_OUTPUT;\n      }\n\n      if (/claude-opus[-.]?(?:[5-9]|4[-.]?([5-9]|\\d{2,}))/.test(modelName)) {\n        if (value > CLAUDE_4_64K_MAX_OUTPUT) {\n          return CLAUDE_4_64K_MAX_OUTPUT;\n        }\n        return value;\n      }\n\n      if (/claude-opus[-.]?[4-9]/.test(modelName) && value > CLAUDE_32K_MAX_OUTPUT) {\n        return CLAUDE_32K_MAX_OUTPUT;\n      }\n\n      if (value > ANTHROPIC_MAX_OUTPUT) {\n        return ANTHROPIC_MAX_OUTPUT;\n      }\n\n      return value;\n    },\n  },\n  topP: {\n    min: 0 as const,\n    max: 1 as const,\n    step: 0.01 as const,\n    default: 0.7 as const,\n  },\n  topK: {\n    min: 1 as const,\n    max: 40 as const,\n    step: 1 as const,\n    default: 5 as const,\n  },\n  resendFiles: {\n    default: true as const,\n  },\n  maxContextTokens: {\n    default: undefined,\n  },\n  legacy: {\n    maxOutputTokens: {\n      min: 1 as const,\n      max: LEGACY_ANTHROPIC_MAX_OUTPUT,\n      step: 1 as const,\n      default: LEGACY_ANTHROPIC_MAX_OUTPUT,\n    },\n  },\n  web_search: {\n    default: false as const,\n  },\n};\n\nexport const agentsSettings = {\n  model: {\n    default: 'gpt-3.5-turbo-test' as const,\n  },\n  temperature: {\n    min: 0 as const,\n    max: 1 as const,\n    step: 0.01 as const,\n    default: 1 as const,\n  },\n  top_p: {\n    min: 0 as const,\n    max: 1 as const,\n    step: 0.01 as const,\n    default: 1 as const,\n  },\n  presence_penalty: {\n    min: -2 as const,\n    max: 2 as const,\n    step: 0.01 as const,\n    default: 0 as const,\n  },\n  frequency_penalty: {\n    min: -2 as const,\n    max: 2 as const,\n    step: 0.01 as const,\n    default: 0 as const,\n  },\n  resendFiles: {\n    default: true as const,\n  },\n  maxContextTokens: {\n    default: undefined,\n  },\n  max_tokens: {\n    default: undefined,\n  },\n  imageDetail: {\n    default: ImageDetail.auto as const,\n  },\n};\n\nexport const endpointSettings = {\n  [EModelEndpoint.openAI]: openAISettings,\n  [EModelEndpoint.google]: googleSettings,\n  [EModelEndpoint.anthropic]: anthropicSettings,\n  [EModelEndpoint.agents]: agentsSettings,\n  [EModelEndpoint.bedrock]: agentsSettings,\n};\n\nconst google = endpointSettings[EModelEndpoint.google];\n\nexport const eModelEndpointSchema = z.nativeEnum(EModelEndpoint);\n\nexport const extendedModelEndpointSchema = z.union([eModelEndpointSchema, z.string()]);\n\nexport const tPluginAuthConfigSchema = z.object({\n  authField: z.string(),\n  label: z.string(),\n  description: z.string(),\n});\n\nexport type TPluginAuthConfig = z.infer<typeof tPluginAuthConfigSchema>;\n\nexport const tPluginSchema = z.object({\n  name: z.string(),\n  pluginKey: z.string(),\n  description: z.string().optional(),\n  icon: z.string().optional(),\n  authConfig: z.array(tPluginAuthConfigSchema).optional(),\n  authenticated: z.boolean().optional(),\n  chatMenu: z.boolean().optional(),\n  isButton: z.boolean().optional(),\n  toolkit: z.boolean().optional(),\n});\n\nexport type TPlugin = z.infer<typeof tPluginSchema>;\n\nexport type TInput = {\n  inputStr: string;\n};\n\nexport const tExampleSchema = z.object({\n  input: z.object({\n    content: z.string(),\n  }),\n  output: z.object({\n    content: z.string(),\n  }),\n});\n\nexport type TExample = z.infer<typeof tExampleSchema>;\n\nexport const tMessageSchema = z.object({\n  messageId: z.string(),\n  endpoint: z.string().optional(),\n  clientId: z.string().nullable().optional(),\n  conversationId: z.string().nullable(),\n  parentMessageId: z.string().nullable(),\n  responseMessageId: z.string().nullable().optional(),\n  overrideParentMessageId: z.string().nullable().optional(),\n  bg: z.string().nullable().optional(),\n  model: z.string().nullable().optional(),\n  title: z.string().nullable().or(z.literal('New Chat')).default('New Chat'),\n  sender: z.string().optional(),\n  text: z.string(),\n  /** @deprecated */\n  generation: z.string().nullable().optional(),\n  isCreatedByUser: z.boolean(),\n  error: z.boolean().optional(),\n  clientTimestamp: z.string().optional(),\n  createdAt: z\n    .string()\n    .optional()\n    .default(() => new Date().toISOString()),\n  updatedAt: z\n    .string()\n    .optional()\n    .default(() => new Date().toISOString()),\n  current: z.boolean().optional(),\n  unfinished: z.boolean().optional(),\n  searchResult: z.boolean().optional(),\n  finish_reason: z.string().optional(),\n  /* assistant */\n  thread_id: z.string().optional(),\n  /* frontend components */\n  iconURL: z.string().nullable().optional(),\n  feedback: feedbackSchema.optional(),\n  /** metadata */\n  metadata: z.record(z.unknown()).optional(),\n});\n\nexport type MemoryArtifact = {\n  key: string;\n  value?: string;\n  tokenCount?: number;\n  type: 'update' | 'delete' | 'error';\n};\n\nexport type UIResource = {\n  resourceId: string;\n  uri: string;\n  mimeType?: string;\n  text?: string;\n  [key: string]: unknown;\n};\n\nexport type TAttachmentMetadata = {\n  type?: Tools;\n  messageId: string;\n  toolCallId: string;\n  [Tools.memory]?: MemoryArtifact;\n  [Tools.ui_resources]?: UIResource[];\n  [Tools.web_search]?: SearchResultData;\n  [Tools.file_search]?: SearchResultData;\n};\n\nexport type TAttachment =\n  | (TFile & TAttachmentMetadata)\n  | (Pick<TFile, 'filename' | 'filepath' | 'conversationId'> & {\n      expiresAt: number;\n    } & TAttachmentMetadata)\n  | (Partial<Pick<TFile, 'filename' | 'filepath'>> &\n      Pick<TFile, 'conversationId'> &\n      TAttachmentMetadata);\n\nexport type TMessage = z.input<typeof tMessageSchema> & {\n  children?: TMessage[];\n  content?: TMessageContentParts[];\n  files?: Partial<TFile>[];\n  depth?: number;\n  siblingIndex?: number;\n  attachments?: TAttachment[];\n  clientTimestamp?: string;\n  feedback?: TFeedback;\n};\n\nexport const coerceNumber = z.union([z.number(), z.string()]).transform((val) => {\n  if (typeof val === 'string') {\n    return val.trim() === '' ? undefined : parseFloat(val);\n  }\n  return val;\n});\n\ntype DocumentTypeValue =\n  | null\n  | boolean\n  | number\n  | string\n  | DocumentTypeValue[]\n  | { [key: string]: DocumentTypeValue };\n\nconst DocumentType: z.ZodType<DocumentTypeValue> = z.lazy(() =>\n  z.union([\n    z.null(),\n    z.boolean(),\n    z.number(),\n    z.string(),\n    z.array(z.lazy(() => DocumentType)),\n    z.record(z.lazy(() => DocumentType)),\n  ]),\n);\n\nexport const tConversationSchema = z.object({\n  conversationId: z.string().nullable(),\n  endpoint: eModelEndpointSchema.nullable(),\n  endpointType: eModelEndpointSchema.nullable().optional(),\n  isArchived: z.boolean().optional(),\n  title: z.string().nullable().or(z.literal('New Chat')).default('New Chat'),\n  user: z.string().optional(),\n  messages: z.array(z.string()).optional(),\n  tools: z.union([z.array(tPluginSchema), z.array(z.string())]).optional(),\n  modelLabel: z.string().nullable().optional(),\n  userLabel: z.string().optional(),\n  model: z.string().nullable().optional(),\n  promptPrefix: z.string().nullable().optional(),\n  temperature: z.number().nullable().optional(),\n  topP: z.number().optional(),\n  topK: z.number().optional(),\n  top_p: z.number().optional(),\n  frequency_penalty: z.number().optional(),\n  presence_penalty: z.number().optional(),\n  parentMessageId: z.string().optional(),\n  maxOutputTokens: coerceNumber.nullable().optional(),\n  maxContextTokens: coerceNumber.optional(),\n  max_tokens: coerceNumber.optional(),\n  /* Anthropic */\n  promptCache: z.boolean().optional(),\n  system: z.string().optional(),\n  thinking: z.boolean().optional(),\n  thinkingBudget: coerceNumber.optional(),\n  stream: z.boolean().optional(),\n  /* artifacts */\n  artifacts: z.string().optional(),\n  /* google */\n  context: z.string().nullable().optional(),\n  examples: z.array(tExampleSchema).optional(),\n  /* DB */\n  tags: z.array(z.string()).optional(),\n  createdAt: z.string(),\n  updatedAt: z.string(),\n  /* Files */\n  resendFiles: z.boolean().optional(),\n  file_ids: z.array(z.string()).optional(),\n  /* vision */\n  imageDetail: eImageDetailSchema.optional(),\n  /* OpenAI: Reasoning models only */\n  reasoning_effort: eReasoningEffortSchema.optional().nullable(),\n  reasoning_summary: eReasoningSummarySchema.optional().nullable(),\n  /* OpenAI: Verbosity control */\n  verbosity: eVerbositySchema.optional().nullable(),\n  /* OpenAI: use Responses API */\n  useResponsesApi: z.boolean().optional(),\n  /* OpenAI Responses API / Anthropic API / Google API */\n  web_search: z.boolean().optional(),\n  /* disable streaming */\n  disableStreaming: z.boolean().optional(),\n  /* assistant */\n  assistant_id: z.string().optional(),\n  /* agents */\n  agent_id: z.string().optional(),\n  /* AWS Bedrock */\n  region: z.string().optional(),\n  maxTokens: coerceNumber.optional(),\n  additionalModelRequestFields: DocumentType.optional(),\n  /* assistants */\n  instructions: z.string().optional(),\n  additional_instructions: z.string().optional(),\n  append_current_datetime: z.boolean().optional(),\n  /** Used to overwrite active conversation settings when saving a Preset */\n  presetOverride: z.record(z.unknown()).optional(),\n  stop: z.array(z.string()).optional(),\n  /* frontend components */\n  greeting: z.string().optional(),\n  spec: z.string().nullable().optional(),\n  iconURL: z.string().nullable().optional(),\n  /* temporary chat */\n  expiredAt: z.string().nullable().optional(),\n  /* file token limits */\n  fileTokenLimit: coerceNumber.optional(),\n  /** @deprecated */\n  resendImages: z.boolean().optional(),\n  /** @deprecated Prefer `modelLabel` over `chatGptLabel` */\n  chatGptLabel: z.string().nullable().optional(),\n});\n\nexport const tPresetSchema = tConversationSchema\n  .omit({\n    conversationId: true,\n    createdAt: true,\n    updatedAt: true,\n    title: true,\n  })\n  .merge(\n    z.object({\n      conversationId: z.string().nullable().optional(),\n      presetId: z.string().nullable().optional(),\n      title: z.string().nullable().optional(),\n      defaultPreset: z.boolean().optional(),\n      order: z.number().optional(),\n      endpoint: extendedModelEndpointSchema.nullable(),\n    }),\n  );\n\nexport const tConvoUpdateSchema = tConversationSchema.merge(\n  z.object({\n    endpoint: extendedModelEndpointSchema.nullable(),\n    createdAt: z.string().optional(),\n    updatedAt: z.string().optional(),\n  }),\n);\n\nexport const tQueryParamsSchema = tConversationSchema\n  .pick({\n    // librechat settings\n    /** The model spec to be used */\n    spec: true,\n    /** The AI context window, overrides the system-defined window as determined by `model` value */\n    maxContextTokens: true,\n    /**\n     * Whether or not to re-submit files from previous messages on subsequent messages\n     * */\n    resendFiles: true,\n    /**\n     * @endpoints openAI, custom, azureOpenAI\n     *\n     * System parameter that only affects the above endpoints.\n     * Image detail for re-sizing according to OpenAI spec, defaults to `auto`\n     * */\n    imageDetail: true,\n    /**\n     * AKA Custom Instructions, dynamically added to chat history as a system message;\n     * for `bedrock` endpoint, this is used as the `system` model param if the provider uses it;\n     * for `assistants` endpoint, this is used as the `additional_instructions` model param:\n     * https://platform.openai.com/docs/api-reference/runs/createRun#runs-createrun-additional_instructions\n     * ; otherwise, a message with `system` role is added to the chat history\n     */\n    promptPrefix: true,\n    // Model parameters\n    /** @endpoints openAI, custom, azureOpenAI, google, anthropic, assistants, azureAssistants, bedrock */\n    model: true,\n    /** @endpoints openAI, custom, azureOpenAI, google, anthropic, bedrock */\n    temperature: true,\n    /** @endpoints openAI, custom, azureOpenAI */\n    presence_penalty: true,\n    /** @endpoints openAI, custom, azureOpenAI */\n    frequency_penalty: true,\n    /** @endpoints openAI, custom, azureOpenAI */\n    stop: true,\n    /** @endpoints openAI, custom, azureOpenAI */\n    top_p: true,\n    /** @endpoints openAI, custom, azureOpenAI */\n    max_tokens: true,\n    /** @endpoints openAI, custom, azureOpenAI */\n    reasoning_effort: true,\n    /** @endpoints openAI, custom, azureOpenAI */\n    reasoning_summary: true,\n    /** @endpoints openAI, custom, azureOpenAI */\n    verbosity: true,\n    /** @endpoints openAI, custom, azureOpenAI */\n    useResponsesApi: true,\n    /** @endpoints openAI, anthropic, google */\n    web_search: true,\n    /** @endpoints openAI, custom, azureOpenAI */\n    disableStreaming: true,\n    /** @endpoints google, anthropic, bedrock */\n    topP: true,\n    /** @endpoints google, anthropic */\n    topK: true,\n    /** @endpoints google, anthropic */\n    maxOutputTokens: true,\n    /** @endpoints anthropic */\n    promptCache: true,\n    thinking: true,\n    thinkingBudget: true,\n    /** @endpoints bedrock */\n    region: true,\n    /** @endpoints bedrock */\n    maxTokens: true,\n    /** @endpoints agents */\n    agent_id: true,\n    /** @endpoints assistants, azureAssistants */\n    assistant_id: true,\n    /** @endpoints assistants, azureAssistants */\n    append_current_datetime: true,\n    /**\n     * @endpoints assistants, azureAssistants\n     *\n     * Overrides existing assistant instructions, only used for the current run:\n     * https://platform.openai.com/docs/api-reference/runs/createRun#runs-createrun-instructions\n     * */\n    instructions: true,\n    /** @endpoints openAI, google, anthropic */\n    fileTokenLimit: true,\n  })\n  .merge(\n    z.object({\n      /** @endpoints openAI, custom, azureOpenAI, google, anthropic, assistants, azureAssistants, bedrock, agents */\n      endpoint: extendedModelEndpointSchema.nullable(),\n    }),\n  );\n\nexport type TPreset = z.infer<typeof tPresetSchema>;\n\nexport type TSetOption = (\n  param: number | string,\n) => (newValue: number | string | boolean | string[] | Partial<TPreset>) => void;\n\nexport type TConversation = z.infer<typeof tConversationSchema> & {\n  presetOverride?: Partial<TPreset>;\n  disableParams?: boolean;\n};\n\nexport const tSharedLinkSchema = z.object({\n  conversationId: z.string(),\n  shareId: z.string(),\n  messages: z.array(z.string()),\n  isPublic: z.boolean(),\n  title: z.string(),\n  createdAt: z.string(),\n  updatedAt: z.string(),\n});\n\nexport type TSharedLink = z.infer<typeof tSharedLinkSchema>;\n\nexport const tConversationTagSchema = z.object({\n  _id: z.string(),\n  user: z.string(),\n  tag: z.string(),\n  description: z.string().optional(),\n  createdAt: z.string(),\n  updatedAt: z.string(),\n  count: z.number(),\n  position: z.number(),\n});\nexport type TConversationTag = z.infer<typeof tConversationTagSchema>;\n\nexport const googleBaseSchema = tConversationSchema.pick({\n  model: true,\n  modelLabel: true,\n  promptPrefix: true,\n  examples: true,\n  temperature: true,\n  maxOutputTokens: true,\n  artifacts: true,\n  topP: true,\n  topK: true,\n  thinking: true,\n  thinkingBudget: true,\n  web_search: true,\n  fileTokenLimit: true,\n  iconURL: true,\n  greeting: true,\n  spec: true,\n  maxContextTokens: true,\n});\n\nexport const googleSchema = googleBaseSchema\n  .transform((obj: Partial<TConversation>) => removeNullishValues(obj))\n  .catch(() => ({}));\n\n/**\n   * TODO: Map the following fields:\n  - presence_penalty -> presencePenalty\n  - frequency_penalty -> frequencyPenalty\n  - stop -> stopSequences\n   */\nexport const googleGenConfigSchema = z\n  .object({\n    maxOutputTokens: coerceNumber.optional(),\n    temperature: coerceNumber.optional(),\n    topP: coerceNumber.optional(),\n    topK: coerceNumber.optional(),\n    presencePenalty: coerceNumber.optional(),\n    frequencyPenalty: coerceNumber.optional(),\n    stopSequences: z.array(z.string()).optional(),\n    thinkingConfig: z\n      .object({\n        includeThoughts: z.boolean().optional(),\n        thinkingBudget: coerceNumber.optional(),\n      })\n      .optional(),\n    web_search: z.boolean().optional(),\n  })\n  .strip()\n  .optional();\n\nexport function removeNullishValues<T extends Record<string, unknown>>(\n  obj: T,\n  removeEmptyStrings?: boolean,\n): Partial<T> {\n  const newObj: Partial<T> = { ...obj };\n\n  (Object.keys(newObj) as Array<keyof T>).forEach((key) => {\n    const value = newObj[key];\n    if (value === undefined || value === null) {\n      delete newObj[key];\n    }\n    if (removeEmptyStrings && typeof value === 'string' && value === '') {\n      delete newObj[key];\n    }\n  });\n\n  return newObj;\n}\n\nconst assistantBaseSchema = tConversationSchema.pick({\n  model: true,\n  assistant_id: true,\n  instructions: true,\n  artifacts: true,\n  promptPrefix: true,\n  iconURL: true,\n  greeting: true,\n  spec: true,\n  append_current_datetime: true,\n});\n\nexport const assistantSchema = assistantBaseSchema\n  .transform((obj) => ({\n    ...obj,\n    model: obj.model ?? openAISettings.model.default,\n    assistant_id: obj.assistant_id ?? undefined,\n    instructions: obj.instructions ?? undefined,\n    promptPrefix: obj.promptPrefix ?? null,\n    iconURL: obj.iconURL ?? undefined,\n    greeting: obj.greeting ?? undefined,\n    spec: obj.spec ?? undefined,\n    append_current_datetime: obj.append_current_datetime ?? false,\n  }))\n  .catch(() => ({\n    model: openAISettings.model.default,\n    assistant_id: undefined,\n    instructions: undefined,\n    promptPrefix: null,\n    iconURL: undefined,\n    greeting: undefined,\n    spec: undefined,\n    append_current_datetime: false,\n  }));\n\nconst compactAssistantBaseSchema = tConversationSchema.pick({\n  model: true,\n  assistant_id: true,\n  instructions: true,\n  promptPrefix: true,\n  artifacts: true,\n  iconURL: true,\n  greeting: true,\n  spec: true,\n});\n\nexport const compactAssistantSchema = compactAssistantBaseSchema\n  .transform((obj) => removeNullishValues(obj))\n  .catch(() => ({}));\n\nexport const agentsBaseSchema = tConversationSchema.pick({\n  model: true,\n  modelLabel: true,\n  temperature: true,\n  top_p: true,\n  presence_penalty: true,\n  frequency_penalty: true,\n  resendFiles: true,\n  imageDetail: true,\n  agent_id: true,\n  instructions: true,\n  promptPrefix: true,\n  iconURL: true,\n  greeting: true,\n  maxContextTokens: true,\n});\n\nexport const agentsSchema = agentsBaseSchema\n  .transform((obj) => ({\n    ...obj,\n    model: obj.model ?? agentsSettings.model.default,\n    modelLabel: obj.modelLabel ?? null,\n    temperature: obj.temperature ?? 1,\n    top_p: obj.top_p ?? 1,\n    presence_penalty: obj.presence_penalty ?? 0,\n    frequency_penalty: obj.frequency_penalty ?? 0,\n    resendFiles:\n      typeof obj.resendFiles === 'boolean' ? obj.resendFiles : agentsSettings.resendFiles.default,\n    imageDetail: obj.imageDetail ?? ImageDetail.auto,\n    agent_id: obj.agent_id ?? undefined,\n    instructions: obj.instructions ?? undefined,\n    promptPrefix: obj.promptPrefix ?? null,\n    iconURL: obj.iconURL ?? undefined,\n    greeting: obj.greeting ?? undefined,\n    maxContextTokens: obj.maxContextTokens ?? undefined,\n  }))\n  .catch(() => ({\n    model: agentsSettings.model.default,\n    modelLabel: null,\n    temperature: 1,\n    top_p: 1,\n    presence_penalty: 0,\n    frequency_penalty: 0,\n    resendFiles: agentsSettings.resendFiles.default,\n    imageDetail: ImageDetail.auto,\n    agent_id: undefined,\n    instructions: undefined,\n    promptPrefix: null,\n    iconURL: undefined,\n    greeting: undefined,\n    maxContextTokens: undefined,\n  }));\n\nexport const openAIBaseSchema = tConversationSchema.pick({\n  model: true,\n  modelLabel: true,\n  chatGptLabel: true,\n  promptPrefix: true,\n  temperature: true,\n  top_p: true,\n  presence_penalty: true,\n  frequency_penalty: true,\n  resendFiles: true,\n  artifacts: true,\n  imageDetail: true,\n  stop: true,\n  iconURL: true,\n  greeting: true,\n  spec: true,\n  maxContextTokens: true,\n  max_tokens: true,\n  reasoning_effort: true,\n  reasoning_summary: true,\n  verbosity: true,\n  useResponsesApi: true,\n  web_search: true,\n  disableStreaming: true,\n  fileTokenLimit: true,\n});\n\nexport const openAISchema = openAIBaseSchema\n  .transform((obj: Partial<TConversation>) => removeNullishValues(obj, true))\n  .catch(() => ({}));\n\nexport const compactGoogleSchema = googleBaseSchema\n  .transform((obj) => {\n    const newObj: Partial<TConversation> = { ...obj };\n    if (newObj.temperature === google.temperature.default) {\n      delete newObj.temperature;\n    }\n    if (newObj.maxOutputTokens === google.maxOutputTokens.default) {\n      delete newObj.maxOutputTokens;\n    }\n    if (newObj.topP === google.topP.default) {\n      delete newObj.topP;\n    }\n    if (newObj.topK === google.topK.default) {\n      delete newObj.topK;\n    }\n\n    return removeNullishValues(newObj);\n  })\n  .catch(() => ({}));\n\nexport const anthropicBaseSchema = tConversationSchema.pick({\n  model: true,\n  modelLabel: true,\n  promptPrefix: true,\n  temperature: true,\n  maxOutputTokens: true,\n  topP: true,\n  topK: true,\n  resendFiles: true,\n  promptCache: true,\n  thinking: true,\n  thinkingBudget: true,\n  artifacts: true,\n  iconURL: true,\n  greeting: true,\n  spec: true,\n  maxContextTokens: true,\n  web_search: true,\n  fileTokenLimit: true,\n  stop: true,\n  stream: true,\n});\n\nexport const anthropicSchema = anthropicBaseSchema\n  .transform((obj) => removeNullishValues(obj))\n  .catch(() => ({}));\n\nexport const tBannerSchema = z.object({\n  bannerId: z.string(),\n  message: z.string(),\n  displayFrom: z.string(),\n  displayTo: z.string(),\n  createdAt: z.string(),\n  updatedAt: z.string(),\n  isPublic: z.boolean(),\n  persistable: z.boolean().default(false),\n});\nexport type TBanner = z.infer<typeof tBannerSchema>;\n\nexport const compactAgentsBaseSchema = tConversationSchema.pick({\n  spec: true,\n  // model: true,\n  iconURL: true,\n  greeting: true,\n  agent_id: true,\n  instructions: true,\n  additional_instructions: true,\n});\n\nexport const compactAgentsSchema = compactAgentsBaseSchema\n  .transform((obj) => removeNullishValues(obj))\n  .catch(() => ({}));\n","import { z } from 'zod';\nimport type { TPreset } from './schemas';\nimport {\n  EModelEndpoint,\n  tPresetSchema,\n  eModelEndpointSchema,\n  AuthType,\n  authTypeSchema,\n} from './schemas';\n\nexport type TModelSpec = {\n  name: string;\n  label: string;\n  preset: TPreset;\n  order?: number;\n  default?: boolean;\n  description?: string;\n  /**\n   * Optional group name for organizing specs in the UI selector.\n   * - If it matches an endpoint name (e.g., \"openAI\", \"groq\"), the spec appears nested under that endpoint\n   * - If it's a custom name (doesn't match any endpoint), it creates a separate collapsible group\n   * - If omitted, the spec appears as a standalone item at the top level\n   */\n  group?: string;\n  showIconInMenu?: boolean;\n  showIconInHeader?: boolean;\n  iconURL?: string | EModelEndpoint; // Allow using project-included icons\n  authType?: AuthType;\n  webSearch?: boolean;\n  fileSearch?: boolean;\n  executeCode?: boolean;\n  mcpServers?: string[];\n};\n\nexport const tModelSpecSchema = z.object({\n  name: z.string(),\n  label: z.string(),\n  preset: tPresetSchema,\n  order: z.number().optional(),\n  default: z.boolean().optional(),\n  description: z.string().optional(),\n  group: z.string().optional(),\n  showIconInMenu: z.boolean().optional(),\n  showIconInHeader: z.boolean().optional(),\n  iconURL: z.union([z.string(), eModelEndpointSchema]).optional(),\n  authType: authTypeSchema.optional(),\n  webSearch: z.boolean().optional(),\n  fileSearch: z.boolean().optional(),\n  executeCode: z.boolean().optional(),\n  mcpServers: z.array(z.string()).optional(),\n});\n\nexport const specsConfigSchema = z.object({\n  enforce: z.boolean().default(false),\n  prioritize: z.boolean().default(true),\n  list: z.array(tModelSpecSchema).min(1),\n  addedEndpoints: z.array(z.union([z.string(), eModelEndpointSchema])).optional(),\n});\n\nexport type TSpecsConfig = z.infer<typeof specsConfigSchema>;\n","export const envVarRegex = /^\\${(.+)}$/;\n\n/** Extracts the environment variable name from a template literal string */\nexport function extractVariableName(value: string): string | null {\n  if (!value) {\n    return null;\n  }\n\n  const match = value.trim().match(envVarRegex);\n  return match ? match[1] : null;\n}\n\n/** Extracts the value of an environment variable from a string. */\nexport function extractEnvVariable(value: string) {\n  if (!value) {\n    return value;\n  }\n\n  // Trim the input\n  const trimmed = value.trim();\n\n  // Special case: if it's just a single environment variable\n  const singleMatch = trimmed.match(envVarRegex);\n  if (singleMatch) {\n    const varName = singleMatch[1];\n    return process.env[varName] || trimmed;\n  }\n\n  // For multiple variables, process them using a regex loop\n  const regex = /\\${([^}]+)}/g;\n  let result = trimmed;\n\n  // First collect all matches and their positions\n  const matches = [];\n  let match;\n  while ((match = regex.exec(trimmed)) !== null) {\n    matches.push({\n      fullMatch: match[0],\n      varName: match[1],\n      index: match.index,\n    });\n  }\n\n  // Process matches in reverse order to avoid position shifts\n  for (let i = matches.length - 1; i >= 0; i--) {\n    const { fullMatch, varName, index } = matches[i];\n    const envValue = process.env[varName] || fullMatch;\n\n    // Replace at exact position\n    result = result.substring(0, index) + envValue + result.substring(index + fullMatch.length);\n  }\n\n  return result;\n}\n\n/**\n * Normalize the endpoint name to system-expected value.\n * @param name\n */\nexport function normalizeEndpointName(name = ''): string {\n  return name.toLowerCase() === 'ollama' ? 'ollama' : name;\n}\n","import { z } from 'zod';\nimport type { EndpointFileConfig, FileConfig } from './types/files';\nimport { EModelEndpoint, isAgentsEndpoint, isDocumentSupportedProvider } from './schemas';\nimport { normalizeEndpointName } from './utils';\n\nexport const supportsFiles = {\n  [EModelEndpoint.openAI]: true,\n  [EModelEndpoint.google]: true,\n  [EModelEndpoint.assistants]: true,\n  [EModelEndpoint.azureAssistants]: true,\n  [EModelEndpoint.agents]: true,\n  [EModelEndpoint.azureOpenAI]: true,\n  [EModelEndpoint.anthropic]: true,\n  [EModelEndpoint.custom]: true,\n  [EModelEndpoint.bedrock]: true,\n};\n\nexport const excelFileTypes = [\n  'application/vnd.ms-excel',\n  'application/msexcel',\n  'application/x-msexcel',\n  'application/x-ms-excel',\n  'application/x-excel',\n  'application/x-dos_ms_excel',\n  'application/xls',\n  'application/x-xls',\n  'application/vnd.openxmlformats-officedocument.spreadsheetml.sheet',\n];\n\nexport const fullMimeTypesList = [\n  'text/x-c',\n  'text/x-c++',\n  'application/csv',\n  'application/vnd.openxmlformats-officedocument.wordprocessingml.document',\n  'text/html',\n  'text/x-java',\n  'application/json',\n  'text/markdown',\n  'application/pdf',\n  'text/x-php',\n  'application/vnd.openxmlformats-officedocument.presentationml.presentation',\n  'text/x-python',\n  'text/x-script.python',\n  'text/x-ruby',\n  'text/x-tex',\n  'text/plain',\n  'text/css',\n  'text/vtt',\n  'image/jpeg',\n  'text/javascript',\n  'image/gif',\n  'image/png',\n  'image/heic',\n  'image/heif',\n  'application/x-tar',\n  'application/x-sh',\n  'application/typescript',\n  'application/sql',\n  'application/yaml',\n  'application/vnd.coffeescript',\n  'application/xml',\n  'application/zip',\n  'image/svg',\n  'image/svg+xml',\n  // Video formats\n  'video/mp4',\n  'video/avi',\n  'video/mov',\n  'video/wmv',\n  'video/flv',\n  'video/webm',\n  'video/mkv',\n  'video/m4v',\n  'video/3gp',\n  'video/ogv',\n  // Audio formats\n  'audio/mp3',\n  'audio/wav',\n  'audio/ogg',\n  'audio/m4a',\n  'audio/aac',\n  'audio/flac',\n  'audio/wma',\n  'audio/opus',\n  'audio/mpeg',\n  ...excelFileTypes,\n];\n\nexport const codeInterpreterMimeTypesList = [\n  'text/x-c',\n  'text/x-c++',\n  'application/csv',\n  'application/vnd.openxmlformats-officedocument.wordprocessingml.document',\n  'text/html',\n  'text/x-java',\n  'application/json',\n  'text/markdown',\n  'application/pdf',\n  'text/x-php',\n  'application/vnd.openxmlformats-officedocument.presentationml.presentation',\n  'text/x-python',\n  'text/x-script.python',\n  'text/x-ruby',\n  'text/x-tex',\n  'text/plain',\n  'text/css',\n  'image/jpeg',\n  'text/javascript',\n  'image/gif',\n  'image/png',\n  'image/heic',\n  'image/heif',\n  'application/x-tar',\n  'application/typescript',\n  'application/xml',\n  'application/zip',\n  ...excelFileTypes,\n];\n\nexport const retrievalMimeTypesList = [\n  'text/x-c',\n  'text/x-c++',\n  'application/vnd.openxmlformats-officedocument.wordprocessingml.document',\n  'text/html',\n  'text/x-java',\n  'application/json',\n  'text/markdown',\n  'application/pdf',\n  'text/x-php',\n  'application/vnd.openxmlformats-officedocument.presentationml.presentation',\n  'text/x-python',\n  'text/x-script.python',\n  'text/x-ruby',\n  'text/x-tex',\n  'text/plain',\n];\n\nexport const imageExtRegex = /\\.(jpg|jpeg|png|gif|webp|heic|heif)$/i;\n\nexport const excelMimeTypes =\n  /^application\\/(vnd\\.ms-excel|msexcel|x-msexcel|x-ms-excel|x-excel|x-dos_ms_excel|xls|x-xls|vnd\\.openxmlformats-officedocument\\.spreadsheetml\\.sheet)$/;\n\nexport const textMimeTypes =\n  /^(text\\/(x-c|x-csharp|tab-separated-values|x-c\\+\\+|x-h|x-java|html|markdown|x-php|x-python|x-script\\.python|x-ruby|x-tex|plain|css|vtt|javascript|csv|xml))$/;\n\nexport const applicationMimeTypes =\n  /^(application\\/(epub\\+zip|csv|json|pdf|x-tar|x-sh|typescript|sql|yaml|vnd\\.coffeescript|vnd\\.openxmlformats-officedocument\\.(wordprocessingml\\.document|presentationml\\.presentation|spreadsheetml\\.sheet)|xml|zip))$/;\n\nexport const imageMimeTypes = /^image\\/(jpeg|gif|png|webp|heic|heif)$/;\n\nexport const audioMimeTypes =\n  /^audio\\/(mp3|mpeg|mpeg3|wav|wave|x-wav|ogg|vorbis|mp4|m4a|x-m4a|flac|x-flac|webm|aac|wma|opus)$/;\n\nexport const videoMimeTypes = /^video\\/(mp4|avi|mov|wmv|flv|webm|mkv|m4v|3gp|ogv)$/;\n\nexport const defaultOCRMimeTypes = [\n  imageMimeTypes,\n  /^application\\/pdf$/,\n  /^application\\/vnd\\.openxmlformats-officedocument\\.(wordprocessingml\\.document|presentationml\\.presentation|spreadsheetml\\.sheet)$/,\n  /^application\\/vnd\\.ms-(word|powerpoint|excel)$/,\n  /^application\\/epub\\+zip$/,\n];\n\nexport const defaultTextMimeTypes = [/^[\\w.-]+\\/[\\w.-]+$/];\n\nexport const defaultSTTMimeTypes = [audioMimeTypes];\n\nexport const supportedMimeTypes = [\n  textMimeTypes,\n  excelMimeTypes,\n  applicationMimeTypes,\n  imageMimeTypes,\n  videoMimeTypes,\n  audioMimeTypes,\n  /** Supported by LC Code Interpreter API */\n  /^image\\/(svg|svg\\+xml)$/,\n];\n\nexport const codeInterpreterMimeTypes = [\n  textMimeTypes,\n  excelMimeTypes,\n  applicationMimeTypes,\n  imageMimeTypes,\n];\n\nexport const codeTypeMapping: { [key: string]: string } = {\n  c: 'text/x-c', // .c - C source\n  cs: 'text/x-csharp', // .cs - C# source\n  cpp: 'text/x-c++', // .cpp - C++ source\n  h: 'text/x-h', // .h - C/C++ header\n  md: 'text/markdown', // .md - Markdown\n  php: 'text/x-php', // .php - PHP source\n  py: 'text/x-python', // .py - Python source\n  rb: 'text/x-ruby', // .rb - Ruby source\n  tex: 'text/x-tex', // .tex - LaTeX source\n  js: 'text/javascript', // .js - JavaScript source\n  sh: 'application/x-sh', // .sh - Shell script\n  ts: 'application/typescript', // .ts - TypeScript source\n  tar: 'application/x-tar', // .tar - Tar archive\n  zip: 'application/zip', // .zip - ZIP archive\n  log: 'text/plain', // .log - Log file\n  tsv: 'text/tab-separated-values', // .tsv - Tab-separated values\n  yml: 'application/yaml', // .yml - YAML\n  yaml: 'application/yaml', // .yaml - YAML\n  sql: 'application/sql', // .sql - SQL (IANA registered)\n  dart: 'text/plain', // .dart - Dart source\n  coffee: 'application/vnd.coffeescript', // .coffee - CoffeeScript (IANA registered)\n  go: 'text/plain', // .go - Go source\n  rs: 'text/plain', // .rs - Rust source\n  swift: 'text/plain', // .swift - Swift source\n  kt: 'text/plain', // .kt - Kotlin source\n  kts: 'text/plain', // .kts - Kotlin script\n  scala: 'text/plain', // .scala - Scala source\n  lua: 'text/plain', // .lua - Lua source\n  r: 'text/plain', // .r - R source\n  pl: 'text/plain', // .pl - Perl source\n  pm: 'text/plain', // .pm - Perl module\n  groovy: 'text/plain', // .groovy - Groovy source\n  gradle: 'text/plain', // .gradle - Gradle build script\n  clj: 'text/plain', // .clj - Clojure source\n  cljs: 'text/plain', // .cljs - ClojureScript source\n  cljc: 'text/plain', // .cljc - Clojure common source\n  elm: 'text/plain', // .elm - Elm source\n  erl: 'text/plain', // .erl - Erlang source\n  hrl: 'text/plain', // .hrl - Erlang header\n  ex: 'text/plain', // .ex - Elixir source\n  exs: 'text/plain', // .exs - Elixir script\n  hs: 'text/plain', // .hs - Haskell source\n  lhs: 'text/plain', // .lhs - Literate Haskell source\n  ml: 'text/plain', // .ml - OCaml source\n  mli: 'text/plain', // .mli - OCaml interface\n  fs: 'text/plain', // .fs - F# source\n  fsx: 'text/plain', // .fsx - F# script\n  lisp: 'text/plain', // .lisp - Lisp source\n  cl: 'text/plain', // .cl - Common Lisp source\n  scm: 'text/plain', // .scm - Scheme source\n  rkt: 'text/plain', // .rkt - Racket source\n  jsx: 'text/plain', // .jsx - React JSX\n  tsx: 'text/plain', // .tsx - React TSX\n  vue: 'text/plain', // .vue - Vue component\n  svelte: 'text/plain', // .svelte - Svelte component\n  astro: 'text/plain', // .astro - Astro component\n  scss: 'text/plain', // .scss - SCSS source\n  sass: 'text/plain', // .sass - Sass source\n  less: 'text/plain', // .less - Less source\n  styl: 'text/plain', // .styl - Stylus source\n  toml: 'text/plain', // .toml - TOML config\n  ini: 'text/plain', // .ini - INI config\n  cfg: 'text/plain', // .cfg - Config file\n  conf: 'text/plain', // .conf - Config file\n  env: 'text/plain', // .env - Environment file\n  properties: 'text/plain', // .properties - Java properties\n  graphql: 'text/plain', // .graphql - GraphQL schema/query\n  gql: 'text/plain', // .gql - GraphQL schema/query\n  proto: 'text/plain', // .proto - Protocol Buffers\n  dockerfile: 'text/plain', // Dockerfile\n  makefile: 'text/plain', // Makefile\n  cmake: 'text/plain', // .cmake - CMake script\n  rake: 'text/plain', // .rake - Rake task\n  gemspec: 'text/plain', // .gemspec - Ruby gem spec\n  bash: 'text/plain', // .bash - Bash script\n  zsh: 'text/plain', // .zsh - Zsh script\n  fish: 'text/plain', // .fish - Fish script\n  ps1: 'text/plain', // .ps1 - PowerShell script\n  psm1: 'text/plain', // .psm1 - PowerShell module\n  bat: 'text/plain', // .bat - Batch script\n  cmd: 'text/plain', // .cmd - Windows command script\n  asm: 'text/plain', // .asm - Assembly source\n  s: 'text/plain', // .s - Assembly source\n  v: 'text/plain', // .v - V or Verilog source\n  zig: 'text/plain', // .zig - Zig source\n  nim: 'text/plain', // .nim - Nim source\n  cr: 'text/plain', // .cr - Crystal source\n  d: 'text/plain', // .d - D source\n  pas: 'text/plain', // .pas - Pascal source\n  pp: 'text/plain', // .pp - Pascal/Puppet source\n  f90: 'text/plain', // .f90 - Fortran 90 source\n  f95: 'text/plain', // .f95 - Fortran 95 source\n  f03: 'text/plain', // .f03 - Fortran 2003 source\n  jl: 'text/plain', // .jl - Julia source\n  m: 'text/plain', // .m - Objective-C/MATLAB source\n  mm: 'text/plain', // .mm - Objective-C++ source\n  ada: 'text/plain', // .ada - Ada source\n  adb: 'text/plain', // .adb - Ada body\n  ads: 'text/plain', // .ads - Ada spec\n  cob: 'text/plain', // .cob - COBOL source\n  cbl: 'text/plain', // .cbl - COBOL source\n  tcl: 'text/plain', // .tcl - Tcl source\n  awk: 'text/plain', // .awk - AWK script\n  sed: 'text/plain', // .sed - Sed script\n};\n\n/** Maps image extensions to MIME types for formats browsers may not recognize */\nexport const imageTypeMapping: { [key: string]: string } = {\n  heic: 'image/heic',\n  heif: 'image/heif',\n};\n\n/**\n * Infers the MIME type from a file's extension when the browser doesn't recognize it\n * @param fileName - The name of the file including extension\n * @param currentType - The current MIME type reported by the browser (may be empty)\n * @returns The inferred MIME type if browser didn't provide one, otherwise the original type\n */\nexport function inferMimeType(fileName: string, currentType: string): string {\n  if (currentType) {\n    return currentType;\n  }\n\n  const extension = fileName.split('.').pop()?.toLowerCase() ?? '';\n  return codeTypeMapping[extension] || imageTypeMapping[extension] || currentType;\n}\n\nexport const retrievalMimeTypes = [\n  /^(text\\/(x-c|x-c\\+\\+|x-h|html|x-java|markdown|x-php|x-python|x-script\\.python|x-ruby|x-tex|plain|vtt|xml))$/,\n  /^(application\\/(json|pdf|vnd\\.openxmlformats-officedocument\\.(wordprocessingml\\.document|presentationml\\.presentation)))$/,\n];\n\nexport const megabyte = 1024 * 1024;\n/** Helper function to get megabytes value */\nexport const mbToBytes = (mb: number): number => mb * megabyte;\n\nconst defaultSizeLimit = mbToBytes(512);\nconst defaultTokenLimit = 100000;\nconst assistantsFileConfig = {\n  fileLimit: 10,\n  fileSizeLimit: defaultSizeLimit,\n  totalSizeLimit: defaultSizeLimit,\n  supportedMimeTypes,\n  disabled: false,\n};\n\nexport const fileConfig = {\n  endpoints: {\n    [EModelEndpoint.assistants]: assistantsFileConfig,\n    [EModelEndpoint.azureAssistants]: assistantsFileConfig,\n    [EModelEndpoint.agents]: assistantsFileConfig,\n    [EModelEndpoint.anthropic]: {\n      fileLimit: 10,\n      fileSizeLimit: defaultSizeLimit,\n      totalSizeLimit: defaultSizeLimit,\n      supportedMimeTypes,\n      disabled: false,\n    },\n    default: {\n      fileLimit: 10,\n      fileSizeLimit: defaultSizeLimit,\n      totalSizeLimit: defaultSizeLimit,\n      supportedMimeTypes,\n      disabled: false,\n    },\n  },\n  serverFileSizeLimit: defaultSizeLimit,\n  avatarSizeLimit: mbToBytes(2),\n  fileTokenLimit: defaultTokenLimit,\n  clientImageResize: {\n    enabled: false,\n    maxWidth: 1900,\n    maxHeight: 1900,\n    quality: 0.92,\n  },\n  ocr: {\n    supportedMimeTypes: defaultOCRMimeTypes,\n  },\n  text: {\n    supportedMimeTypes: defaultTextMimeTypes,\n  },\n  stt: {\n    supportedMimeTypes: defaultSTTMimeTypes,\n  },\n  checkType: function (fileType: string, supportedTypes: RegExp[] = supportedMimeTypes) {\n    return supportedTypes.some((regex) => regex.test(fileType));\n  },\n};\n\nconst supportedMimeTypesSchema = z\n  .array(z.any())\n  .optional()\n  .refine(\n    (mimeTypes) => {\n      if (!mimeTypes) {\n        return true;\n      }\n      return mimeTypes.every(\n        (mimeType) => mimeType instanceof RegExp || typeof mimeType === 'string',\n      );\n    },\n    {\n      message: 'Each mimeType must be a string or a RegExp object.',\n    },\n  );\n\nexport const endpointFileConfigSchema = z.object({\n  disabled: z.boolean().optional(),\n  fileLimit: z.number().min(0).optional(),\n  fileSizeLimit: z.number().min(0).optional(),\n  totalSizeLimit: z.number().min(0).optional(),\n  supportedMimeTypes: supportedMimeTypesSchema.optional(),\n});\n\nexport const fileConfigSchema = z.object({\n  endpoints: z.record(endpointFileConfigSchema).optional(),\n  serverFileSizeLimit: z.number().min(0).optional(),\n  avatarSizeLimit: z.number().min(0).optional(),\n  fileTokenLimit: z.number().min(0).optional(),\n  imageGeneration: z\n    .object({\n      percentage: z.number().min(0).max(100).optional(),\n      px: z.number().min(0).optional(),\n    })\n    .optional(),\n  clientImageResize: z\n    .object({\n      enabled: z.boolean().optional(),\n      maxWidth: z.number().min(0).optional(),\n      maxHeight: z.number().min(0).optional(),\n      quality: z.number().min(0).max(1).optional(),\n    })\n    .optional(),\n  ocr: z\n    .object({\n      supportedMimeTypes: supportedMimeTypesSchema.optional(),\n    })\n    .optional(),\n  text: z\n    .object({\n      supportedMimeTypes: supportedMimeTypesSchema.optional(),\n    })\n    .optional(),\n});\n\nexport type TFileConfig = z.infer<typeof fileConfigSchema>;\n\n/** Helper function to safely convert string patterns to RegExp objects */\nexport const convertStringsToRegex = (patterns: string[]): RegExp[] =>\n  patterns.reduce((acc: RegExp[], pattern) => {\n    try {\n      const regex = new RegExp(pattern);\n      acc.push(regex);\n    } catch (error) {\n      console.error(`Invalid regex pattern \"${pattern}\" skipped.`, error);\n    }\n    return acc;\n  }, []);\n\n/**\n * Gets the appropriate endpoint file configuration with standardized lookup logic.\n *\n * @param params - Object containing fileConfig, endpoint, and optional conversationEndpoint\n * @param params.fileConfig - The merged file configuration\n * @param params.endpoint - The endpoint name to look up\n * @param params.conversationEndpoint - Optional conversation endpoint for additional context\n * @returns The endpoint file configuration or undefined\n */\n/**\n * Merges an endpoint config with the default config to ensure all fields are populated.\n * For document-supported providers, uses the comprehensive MIME type list (includes videos/audio).\n */\nfunction mergeWithDefault(\n  endpointConfig: EndpointFileConfig,\n  defaultConfig: EndpointFileConfig,\n  endpoint?: string | null,\n): EndpointFileConfig {\n  /** Use comprehensive MIME types for document-supported providers */\n  const defaultMimeTypes = isDocumentSupportedProvider(endpoint)\n    ? supportedMimeTypes\n    : defaultConfig.supportedMimeTypes;\n\n  return {\n    disabled: endpointConfig.disabled ?? defaultConfig.disabled,\n    fileLimit: endpointConfig.fileLimit ?? defaultConfig.fileLimit,\n    fileSizeLimit: endpointConfig.fileSizeLimit ?? defaultConfig.fileSizeLimit,\n    totalSizeLimit: endpointConfig.totalSizeLimit ?? defaultConfig.totalSizeLimit,\n    supportedMimeTypes: endpointConfig.supportedMimeTypes ?? defaultMimeTypes,\n  };\n}\n\nexport function getEndpointFileConfig(params: {\n  fileConfig?: FileConfig | null;\n  endpoint?: string | null;\n  endpointType?: string | null;\n}): EndpointFileConfig {\n  const { fileConfig: mergedFileConfig, endpoint, endpointType } = params;\n\n  if (!mergedFileConfig?.endpoints) {\n    return fileConfig.endpoints.default;\n  }\n\n  /** Compute an effective default by merging user-configured default over the base default */\n  const baseDefaultConfig = fileConfig.endpoints.default;\n  const userDefaultConfig = mergedFileConfig.endpoints.default;\n  const defaultConfig = userDefaultConfig\n    ? mergeWithDefault(userDefaultConfig, baseDefaultConfig, 'default')\n    : baseDefaultConfig;\n\n  const normalizedEndpoint = normalizeEndpointName(endpoint ?? '');\n  const standardEndpoints = new Set([\n    'default',\n    EModelEndpoint.agents,\n    EModelEndpoint.assistants,\n    EModelEndpoint.azureAssistants,\n    EModelEndpoint.openAI,\n    EModelEndpoint.azureOpenAI,\n    EModelEndpoint.anthropic,\n    EModelEndpoint.google,\n    EModelEndpoint.bedrock,\n  ]);\n\n  const normalizedEndpointType = normalizeEndpointName(endpointType ?? '');\n  const isCustomEndpoint =\n    endpointType === EModelEndpoint.custom ||\n    (!standardEndpoints.has(normalizedEndpointType) &&\n      normalizedEndpoint &&\n      !standardEndpoints.has(normalizedEndpoint));\n\n  if (isCustomEndpoint) {\n    /** 1. Check direct endpoint lookup (could be normalized or not) */\n    if (endpoint && mergedFileConfig.endpoints[endpoint]) {\n      return mergeWithDefault(mergedFileConfig.endpoints[endpoint], defaultConfig, endpoint);\n    }\n    /** 2. Check normalized endpoint lookup (skip standard endpoint keys) */\n    for (const key in mergedFileConfig.endpoints) {\n      if (!standardEndpoints.has(key) && normalizeEndpointName(key) === normalizedEndpoint) {\n        return mergeWithDefault(mergedFileConfig.endpoints[key], defaultConfig, key);\n      }\n    }\n    /** 3. Fallback to generic 'custom' config if any */\n    if (mergedFileConfig.endpoints[EModelEndpoint.custom]) {\n      return mergeWithDefault(\n        mergedFileConfig.endpoints[EModelEndpoint.custom],\n        defaultConfig,\n        endpoint,\n      );\n    }\n    /** 4. Fallback to 'agents' (all custom endpoints are non-assistants) */\n    if (mergedFileConfig.endpoints[EModelEndpoint.agents]) {\n      return mergeWithDefault(\n        mergedFileConfig.endpoints[EModelEndpoint.agents],\n        defaultConfig,\n        endpoint,\n      );\n    }\n    /** 5. Fallback to default */\n    return defaultConfig;\n  }\n\n  /** Check endpointType first (most reliable for standard endpoints) */\n  if (endpointType && mergedFileConfig.endpoints[endpointType]) {\n    return mergeWithDefault(mergedFileConfig.endpoints[endpointType], defaultConfig, endpointType);\n  }\n\n  /** Check direct endpoint lookup */\n  if (endpoint && mergedFileConfig.endpoints[endpoint]) {\n    return mergeWithDefault(mergedFileConfig.endpoints[endpoint], defaultConfig, endpoint);\n  }\n\n  /** Check normalized endpoint */\n  if (normalizedEndpoint && mergedFileConfig.endpoints[normalizedEndpoint]) {\n    return mergeWithDefault(\n      mergedFileConfig.endpoints[normalizedEndpoint],\n      defaultConfig,\n      normalizedEndpoint,\n    );\n  }\n\n  /** Fallback to agents if endpoint is explicitly agents */\n  const isAgents = isAgentsEndpoint(normalizedEndpointType || normalizedEndpoint);\n  if (isAgents && mergedFileConfig.endpoints[EModelEndpoint.agents]) {\n    return mergeWithDefault(\n      mergedFileConfig.endpoints[EModelEndpoint.agents],\n      defaultConfig,\n      EModelEndpoint.agents,\n    );\n  }\n\n  /** Return default config */\n  return defaultConfig;\n}\n\nexport function mergeFileConfig(dynamic: z.infer<typeof fileConfigSchema> | undefined): FileConfig {\n  const mergedConfig: FileConfig = {\n    ...fileConfig,\n    endpoints: {\n      ...fileConfig.endpoints,\n    },\n    ocr: {\n      ...fileConfig.ocr,\n      supportedMimeTypes: fileConfig.ocr?.supportedMimeTypes || [],\n    },\n    text: {\n      ...fileConfig.text,\n      supportedMimeTypes: fileConfig.text?.supportedMimeTypes || [],\n    },\n    stt: {\n      ...fileConfig.stt,\n      supportedMimeTypes: fileConfig.stt?.supportedMimeTypes || [],\n    },\n  };\n  if (!dynamic) {\n    return mergedConfig;\n  }\n\n  if (dynamic.serverFileSizeLimit !== undefined) {\n    mergedConfig.serverFileSizeLimit = mbToBytes(dynamic.serverFileSizeLimit);\n  }\n\n  if (dynamic.avatarSizeLimit !== undefined) {\n    mergedConfig.avatarSizeLimit = mbToBytes(dynamic.avatarSizeLimit);\n  }\n\n  if (dynamic.fileTokenLimit !== undefined) {\n    mergedConfig.fileTokenLimit = dynamic.fileTokenLimit;\n  }\n\n  // Merge clientImageResize configuration\n  if (dynamic.clientImageResize !== undefined) {\n    mergedConfig.clientImageResize = {\n      ...mergedConfig.clientImageResize,\n      ...dynamic.clientImageResize,\n    };\n  }\n\n  if (dynamic.ocr !== undefined) {\n    mergedConfig.ocr = {\n      ...mergedConfig.ocr,\n      ...dynamic.ocr,\n    };\n    if (dynamic.ocr.supportedMimeTypes) {\n      mergedConfig.ocr.supportedMimeTypes = convertStringsToRegex(dynamic.ocr.supportedMimeTypes);\n    }\n  }\n\n  if (dynamic.text !== undefined) {\n    mergedConfig.text = {\n      ...mergedConfig.text,\n      ...dynamic.text,\n    };\n    if (dynamic.text.supportedMimeTypes) {\n      mergedConfig.text.supportedMimeTypes = convertStringsToRegex(dynamic.text.supportedMimeTypes);\n    }\n  }\n\n  if (!dynamic.endpoints) {\n    return mergedConfig;\n  }\n\n  for (const key in dynamic.endpoints) {\n    const dynamicEndpoint = (dynamic.endpoints as Record<string, EndpointFileConfig>)[key];\n\n    /** Deep copy the base endpoint config if it exists to prevent mutation */\n    if (!mergedConfig.endpoints[key]) {\n      mergedConfig.endpoints[key] = {};\n    } else {\n      mergedConfig.endpoints[key] = { ...mergedConfig.endpoints[key] };\n    }\n\n    const mergedEndpoint = mergedConfig.endpoints[key];\n\n    if (dynamicEndpoint.disabled === true) {\n      mergedEndpoint.disabled = true;\n      mergedEndpoint.fileLimit = 0;\n      mergedEndpoint.fileSizeLimit = 0;\n      mergedEndpoint.totalSizeLimit = 0;\n      mergedEndpoint.supportedMimeTypes = [];\n      continue;\n    }\n\n    if (dynamicEndpoint.fileSizeLimit !== undefined) {\n      mergedEndpoint.fileSizeLimit = mbToBytes(dynamicEndpoint.fileSizeLimit);\n    }\n\n    if (dynamicEndpoint.totalSizeLimit !== undefined) {\n      mergedEndpoint.totalSizeLimit = mbToBytes(dynamicEndpoint.totalSizeLimit);\n    }\n\n    const configKeys = ['fileLimit'] as const;\n    configKeys.forEach((field) => {\n      if (dynamicEndpoint[field] !== undefined) {\n        mergedEndpoint[field] = dynamicEndpoint[field];\n      }\n    });\n\n    if (dynamicEndpoint.disabled !== undefined) {\n      mergedEndpoint.disabled = dynamicEndpoint.disabled;\n    }\n\n    if (dynamicEndpoint.supportedMimeTypes) {\n      mergedEndpoint.supportedMimeTypes = convertStringsToRegex(\n        dynamicEndpoint.supportedMimeTypes as unknown as string[],\n      );\n    }\n  }\n\n  return mergedConfig;\n}\n","import type { AssistantsEndpoint } from './schemas';\nimport * as q from './types/queries';\nimport { ResourceType } from './accessPermissions';\n\nlet BASE_URL = '';\n\n// Helper function to safely get Vite environment variable\nconst getViteApiBaseUrl = (): string => {\n  try {\n    // This will be replaced by Vite at build time if VITE_API_BASE_URL is set\n    // eslint-disable-next-line @typescript-eslint/ban-ts-comment\n    // @ts-ignore - import.meta.env is injected by Vite at build time\n    if (typeof globalThis !== 'undefined' && globalThis.__VITE_API_BASE_URL__) {\n      // eslint-disable-next-line @typescript-eslint/ban-ts-comment\n      // @ts-ignore\n      return globalThis.__VITE_API_BASE_URL__;\n    }\n  } catch {\n    // Ignore errors in non-Vite environments\n  }\n  return '';\n};\n\nconst envApiBaseUrl = getViteApiBaseUrl();\n\nif (envApiBaseUrl) {\n  // Use environment variable if set (for separate backend/frontend deployment)\n  BASE_URL = envApiBaseUrl;\n} else if (\n  typeof process === 'undefined' ||\n  (process as typeof process & { browser?: boolean }).browser === true\n) {\n  // process is only available in node context, or process.browser is true in client-side code\n  // This is to ensure that the BASE_URL is set correctly based on the <base>\n  // element in the HTML document, if it exists.\n  const baseEl = document.querySelector('base');\n  BASE_URL = baseEl?.getAttribute('href') || '/';\n}\n\nif (BASE_URL && BASE_URL.endsWith('/')) {\n  BASE_URL = BASE_URL.slice(0, -1);\n}\n\n// Function to set BASE_URL from outside (useful for runtime configuration)\nexport const setApiBaseUrl = (url: string) => {\n  BASE_URL = url.endsWith('/') ? url.slice(0, -1) : url;\n};\n\nexport const apiBaseUrl = () => BASE_URL;\n\n// Testing this buildQuery function\nconst buildQuery = (params: Record<string, unknown>): string => {\n  const query = Object.entries(params)\n    .filter(([, value]) => {\n      if (Array.isArray(value)) {\n        return value.length > 0;\n      }\n      return value !== undefined && value !== null && value !== '';\n    })\n    .map(([key, value]) => {\n      if (Array.isArray(value)) {\n        return value.map((v) => `${key}=${encodeURIComponent(v)}`).join('&');\n      }\n      return `${key}=${encodeURIComponent(String(value))}`;\n    })\n    .join('&');\n  return query ? `?${query}` : '';\n};\n\nexport const health = () => `${BASE_URL}/health`;\nexport const user = () => `${BASE_URL}/api/user`;\n\nexport const balance = () => `${BASE_URL}/api/balance`;\n\nexport const userPlugins = () => `${BASE_URL}/api/user/plugins`;\n\nexport const deleteUser = () => `${BASE_URL}/api/user/delete`;\n\nconst messagesRoot = `${BASE_URL}/api/messages`;\n\nexport const messages = (params: q.MessagesListParams) => {\n  const { conversationId, messageId, ...rest } = params;\n\n  if (conversationId && messageId) {\n    return `${messagesRoot}/${conversationId}/${messageId}`;\n  }\n\n  if (conversationId) {\n    return `${messagesRoot}/${conversationId}`;\n  }\n\n  return `${messagesRoot}${buildQuery(rest)}`;\n};\n\nexport const messagesArtifacts = (messageId: string) => `${messagesRoot}/artifact/${messageId}`;\n\nconst shareRoot = `${BASE_URL}/api/share`;\nexport const shareMessages = (shareId: string) => `${shareRoot}/${shareId}`;\nexport const getSharedLink = (conversationId: string) => `${shareRoot}/link/${conversationId}`;\nexport const getSharedLinks = (\n  pageSize: number,\n  isPublic: boolean,\n  sortBy: 'title' | 'createdAt',\n  sortDirection: 'asc' | 'desc',\n  search?: string,\n  cursor?: string,\n) =>\n  `${shareRoot}?pageSize=${pageSize}&isPublic=${isPublic}&sortBy=${sortBy}&sortDirection=${sortDirection}${\n    search ? `&search=${search}` : ''\n  }${cursor ? `&cursor=${cursor}` : ''}`;\nexport const createSharedLink = (conversationId: string) => `${shareRoot}/${conversationId}`;\nexport const updateSharedLink = (shareId: string) => `${shareRoot}/${shareId}`;\n\nconst keysEndpoint = `${BASE_URL}/api/keys`;\n\nexport const keys = () => keysEndpoint;\n\nexport const userKeyQuery = (name: string) => `${keysEndpoint}?name=${name}`;\n\nexport const revokeUserKey = (name: string) => `${keysEndpoint}/${name}`;\n\nexport const revokeAllUserKeys = () => `${keysEndpoint}?all=true`;\n\nexport const conversationsRoot = `${BASE_URL}/api/convos`;\n\nexport const conversations = (params: q.ConversationListParams) => {\n  return `${conversationsRoot}${buildQuery(params)}`;\n};\n\nexport const conversationById = (id: string) => `${conversationsRoot}/${id}`;\n\nexport const genTitle = () => `${conversationsRoot}/gen_title`;\n\nexport const updateConversation = () => `${conversationsRoot}/update`;\n\nexport const deleteConversation = () => `${conversationsRoot}`;\n\nexport const deleteAllConversation = () => `${conversationsRoot}/all`;\n\nexport const importConversation = () => `${conversationsRoot}/import`;\n\nexport const forkConversation = () => `${conversationsRoot}/fork`;\n\nexport const duplicateConversation = () => `${conversationsRoot}/duplicate`;\n\nexport const search = (q: string, cursor?: string | null) =>\n  `${BASE_URL}/api/search?q=${q}${cursor ? `&cursor=${cursor}` : ''}`;\n\nexport const searchEnabled = () => `${BASE_URL}/api/search/enable`;\n\nexport const presets = () => `${BASE_URL}/api/presets`;\n\nexport const deletePreset = () => `${BASE_URL}/api/presets/delete`;\n\nexport const aiEndpoints = () => `${BASE_URL}/api/endpoints`;\n\nexport const models = () => `${BASE_URL}/api/models`;\n\nexport const tokenizer = () => `${BASE_URL}/api/tokenizer`;\n\nexport const login = () => `${BASE_URL}/api/auth/login`;\n\nexport const logout = () => `${BASE_URL}/api/auth/logout`;\n\nexport const register = () => `${BASE_URL}/api/auth/register`;\n\nexport const loginFacebook = () => `${BASE_URL}/api/auth/facebook`;\n\nexport const loginGoogle = () => `${BASE_URL}/api/auth/google`;\n\nexport const refreshToken = (retry?: boolean) =>\n  `${BASE_URL}/api/auth/refresh${retry === true ? '?retry=true' : ''}`;\n\nexport const requestPasswordReset = () => `${BASE_URL}/api/auth/requestPasswordReset`;\n\nexport const resetPassword = () => `${BASE_URL}/api/auth/resetPassword`;\n\nexport const verifyEmail = () => `${BASE_URL}/api/user/verify`;\n\n// Auth page URLs (for client-side navigation and redirects)\nexport const loginPage = () => `${BASE_URL}/login`;\nexport const registerPage = () => `${BASE_URL}/register`;\n\nexport const resendVerificationEmail = () => `${BASE_URL}/api/user/verify/resend`;\n\nexport const plugins = () => `${BASE_URL}/api/plugins`;\n\nexport const mcpReinitialize = (serverName: string) =>\n  `${BASE_URL}/api/mcp/${serverName}/reinitialize`;\nexport const mcpConnectionStatus = () => `${BASE_URL}/api/mcp/connection/status`;\nexport const mcpServerConnectionStatus = (serverName: string) =>\n  `${BASE_URL}/api/mcp/connection/status/${serverName}`;\nexport const mcpAuthValues = (serverName: string) => {\n  return `${BASE_URL}/api/mcp/${serverName}/auth-values`;\n};\n\nexport const cancelMCPOAuth = (serverName: string) => {\n  return `${BASE_URL}/api/mcp/oauth/cancel/${serverName}`;\n};\n\nexport const config = () => `${BASE_URL}/api/config`;\n\nexport const prompts = () => `${BASE_URL}/api/prompts`;\n\nexport const addPromptToGroup = (groupId: string) =>\n  `${BASE_URL}/api/prompts/groups/${groupId}/prompts`;\n\nexport const assistants = ({\n  path = '',\n  options,\n  version,\n  endpoint,\n  isAvatar,\n}: {\n  path?: string;\n  options?: object;\n  endpoint?: AssistantsEndpoint;\n  version: number | string;\n  isAvatar?: boolean;\n}) => {\n  let url = isAvatar === true ? `${images()}/assistants` : `${BASE_URL}/api/assistants/v${version}`;\n\n  if (path && path !== '') {\n    url += `/${path}`;\n  }\n\n  if (endpoint) {\n    options = {\n      ...(options ?? {}),\n      endpoint,\n    };\n  }\n\n  if (options && Object.keys(options).length > 0) {\n    const queryParams = new URLSearchParams(options as Record<string, string>).toString();\n    url += `?${queryParams}`;\n  }\n\n  return url;\n};\n\nexport const agents = ({ path = '', options }: { path?: string; options?: object }) => {\n  let url = `${BASE_URL}/api/agents`;\n\n  if (path && path !== '') {\n    url += `/${path}`;\n  }\n\n  if (options && Object.keys(options).length > 0) {\n    const queryParams = new URLSearchParams(options as Record<string, string>).toString();\n    url += `?${queryParams}`;\n  }\n\n  return url;\n};\n\nexport const mcp = {\n  tools: `${BASE_URL}/api/mcp/tools`,\n  servers: `${BASE_URL}/api/mcp/servers`,\n};\n\nexport const mcpServer = (serverName: string) => `${BASE_URL}/api/mcp/servers/${serverName}`;\n\nexport const revertAgentVersion = (agent_id: string) => `${agents({ path: `${agent_id}/revert` })}`;\n\nexport const files = () => `${BASE_URL}/api/files`;\nexport const fileUpload = () => `${BASE_URL}/api/files`;\nexport const fileDelete = () => `${BASE_URL}/api/files`;\nexport const fileDownload = (userId: string, fileId: string) =>\n  `${BASE_URL}/api/files/download/${userId}/${fileId}`;\nexport const fileConfig = () => `${BASE_URL}/api/files/config`;\nexport const agentFiles = (agentId: string) => `${BASE_URL}/api/files/agent/${agentId}`;\n\nexport const images = () => `${files()}/images`;\n\nexport const avatar = () => `${images()}/avatar`;\n\nexport const speech = () => `${files()}/speech`;\n\nexport const speechToText = () => `${speech()}/stt`;\n\nexport const textToSpeech = () => `${speech()}/tts`;\n\nexport const textToSpeechManual = () => `${textToSpeech()}/manual`;\n\nexport const textToSpeechVoices = () => `${textToSpeech()}/voices`;\n\nexport const getCustomConfigSpeech = () => `${speech()}/config/get`;\n\nexport const getPromptGroup = (_id: string) => `${prompts()}/groups/${_id}`;\n\nexport const getPromptGroupsWithFilters = (filter: object) => {\n  let url = `${prompts()}/groups`;\n  // Filter out undefined/null values\n  const cleanedFilter = Object.entries(filter).reduce(\n    (acc, [key, value]) => {\n      if (value !== undefined && value !== null && value !== '') {\n        acc[key] = value;\n      }\n      return acc;\n    },\n    {} as Record<string, string>,\n  );\n\n  if (Object.keys(cleanedFilter).length > 0) {\n    const queryParams = new URLSearchParams(cleanedFilter).toString();\n    url += `?${queryParams}`;\n  }\n  return url;\n};\n\nexport const getPromptsWithFilters = (filter: object) => {\n  let url = prompts();\n  if (Object.keys(filter).length > 0) {\n    const queryParams = new URLSearchParams(filter as Record<string, string>).toString();\n    url += `?${queryParams}`;\n  }\n  return url;\n};\n\nexport const getPrompt = (_id: string) => `${prompts()}/${_id}`;\n\nexport const getRandomPrompts = (limit: number, skip: number) =>\n  `${prompts()}/random?limit=${limit}&skip=${skip}`;\n\nexport const postPrompt = prompts;\n\nexport const updatePromptGroup = getPromptGroup;\n\nexport const updatePromptLabels = (_id: string) => `${getPrompt(_id)}/labels`;\n\nexport const updatePromptTag = (_id: string) => `${getPrompt(_id)}/tags/production`;\n\nexport const deletePromptGroup = getPromptGroup;\n\nexport const deletePrompt = ({ _id, groupId }: { _id: string; groupId: string }) => {\n  return `${prompts()}/${_id}?groupId=${groupId}`;\n};\n\nexport const getCategories = () => `${BASE_URL}/api/categories`;\n\nexport const getAllPromptGroups = () => `${prompts()}/all`;\n\n/* Roles */\nexport const roles = () => `${BASE_URL}/api/roles`;\nexport const getRole = (roleName: string) => `${roles()}/${roleName.toLowerCase()}`;\nexport const updatePromptPermissions = (roleName: string) => `${getRole(roleName)}/prompts`;\nexport const updateMemoryPermissions = (roleName: string) => `${getRole(roleName)}/memories`;\nexport const updateAgentPermissions = (roleName: string) => `${getRole(roleName)}/agents`;\nexport const updatePeoplePickerPermissions = (roleName: string) =>\n  `${getRole(roleName)}/people-picker`;\nexport const updateMCPServersPermissions = (roleName: string) => `${getRole(roleName)}/mcp-servers`;\n\nexport const updateMarketplacePermissions = (roleName: string) =>\n  `${getRole(roleName)}/marketplace`;\n\n/* Conversation Tags */\nexport const conversationTags = (tag?: string) =>\n  `${BASE_URL}/api/tags${tag != null && tag ? `/${encodeURIComponent(tag)}` : ''}`;\n\nexport const conversationTagsList = (pageNumber: string, sort?: string, order?: string) =>\n  `${conversationTags()}/list?pageNumber=${pageNumber}${sort ? `&sort=${sort}` : ''}${\n    order ? `&order=${order}` : ''\n  }`;\n\nexport const addTagToConversation = (conversationId: string) =>\n  `${conversationTags()}/convo/${conversationId}`;\n\nexport const userTerms = () => `${BASE_URL}/api/user/terms`;\nexport const acceptUserTerms = () => `${BASE_URL}/api/user/terms/accept`;\nexport const banner = () => `${BASE_URL}/api/banner`;\n\n// Message Feedback\nexport const feedback = (conversationId: string, messageId: string) =>\n  `${BASE_URL}/api/messages/${conversationId}/${messageId}/feedback`;\n\n// Two-Factor Endpoints\nexport const enableTwoFactor = () => `${BASE_URL}/api/auth/2fa/enable`;\nexport const verifyTwoFactor = () => `${BASE_URL}/api/auth/2fa/verify`;\nexport const confirmTwoFactor = () => `${BASE_URL}/api/auth/2fa/confirm`;\nexport const disableTwoFactor = () => `${BASE_URL}/api/auth/2fa/disable`;\nexport const regenerateBackupCodes = () => `${BASE_URL}/api/auth/2fa/backup/regenerate`;\nexport const verifyTwoFactorTemp = () => `${BASE_URL}/api/auth/2fa/verify-temp`;\n\n/* Memories */\nexport const memories = () => `${BASE_URL}/api/memories`;\nexport const memory = (key: string) => `${memories()}/${encodeURIComponent(key)}`;\nexport const memoryPreferences = () => `${memories()}/preferences`;\n\nexport const searchPrincipals = (params: q.PrincipalSearchParams) => {\n  const { q: query, limit, types } = params;\n  let url = `${BASE_URL}/api/permissions/search-principals?q=${encodeURIComponent(query)}`;\n\n  if (limit !== undefined) {\n    url += `&limit=${limit}`;\n  }\n\n  if (types && types.length > 0) {\n    url += `&types=${types.join(',')}`;\n  }\n\n  return url;\n};\n\nexport const getAccessRoles = (resourceType: ResourceType) =>\n  `${BASE_URL}/api/permissions/${resourceType}/roles`;\n\nexport const getResourcePermissions = (resourceType: ResourceType, resourceId: string) =>\n  `${BASE_URL}/api/permissions/${resourceType}/${resourceId}`;\n\nexport const updateResourcePermissions = (resourceType: ResourceType, resourceId: string) =>\n  `${BASE_URL}/api/permissions/${resourceType}/${resourceId}`;\n\nexport const getEffectivePermissions = (resourceType: ResourceType, resourceId: string) =>\n  `${BASE_URL}/api/permissions/${resourceType}/${resourceId}/effective`;\n\nexport const getAllEffectivePermissions = (resourceType: ResourceType) =>\n  `${BASE_URL}/api/permissions/${resourceType}/effective/all`;\n\n// SharePoint Graph API Token\nexport const graphToken = (scopes: string) =>\n  `${BASE_URL}/api/auth/graph-token?scopes=${encodeURIComponent(scopes)}`;\n","import { EToolResources } from './assistants';\n\nexport enum FileSources {\n  local = 'local',\n  firebase = 'firebase',\n  azure = 'azure',\n  azure_blob = 'azure_blob',\n  openai = 'openai',\n  s3 = 's3',\n  vectordb = 'vectordb',\n  execute_code = 'execute_code',\n  mistral_ocr = 'mistral_ocr',\n  azure_mistral_ocr = 'azure_mistral_ocr',\n  vertexai_mistral_ocr = 'vertexai_mistral_ocr',\n  text = 'text',\n}\n\nexport const checkOpenAIStorage = (source: string) =>\n  source === FileSources.openai || source === FileSources.azure;\n\nexport enum FileContext {\n  avatar = 'avatar',\n  unknown = 'unknown',\n  agents = 'agents',\n  assistants = 'assistants',\n  execute_code = 'execute_code',\n  image_generation = 'image_generation',\n  assistants_output = 'assistants_output',\n  message_attachment = 'message_attachment',\n  filename = 'filename',\n  updatedAt = 'updatedAt',\n  source = 'source',\n  filterSource = 'filterSource',\n  context = 'context',\n  bytes = 'bytes',\n}\n\nexport type EndpointFileConfig = {\n  disabled?: boolean;\n  fileLimit?: number;\n  fileSizeLimit?: number;\n  totalSizeLimit?: number;\n  supportedMimeTypes?: RegExp[];\n};\n\nexport type FileConfig = {\n  endpoints: {\n    [key: string]: EndpointFileConfig;\n  };\n  fileTokenLimit?: number;\n  serverFileSizeLimit?: number;\n  avatarSizeLimit?: number;\n  clientImageResize?: {\n    enabled?: boolean;\n    maxWidth?: number;\n    maxHeight?: number;\n    quality?: number;\n  };\n  ocr?: {\n    supportedMimeTypes?: RegExp[];\n  };\n  text?: {\n    supportedMimeTypes?: RegExp[];\n  };\n  stt?: {\n    supportedMimeTypes?: RegExp[];\n  };\n  checkType?: (fileType: string, supportedTypes: RegExp[]) => boolean;\n};\n\nexport type FileConfigInput = {\n  endpoints?: {\n    [key: string]: EndpointFileConfig;\n  };\n  serverFileSizeLimit?: number;\n  avatarSizeLimit?: number;\n  clientImageResize?: {\n    enabled?: boolean;\n    maxWidth?: number;\n    maxHeight?: number;\n    quality?: number;\n  };\n  ocr?: {\n    supportedMimeTypes?: string[];\n  };\n  text?: {\n    supportedMimeTypes?: string[];\n  };\n  stt?: {\n    supportedMimeTypes?: string[];\n  };\n  checkType?: (fileType: string, supportedTypes: RegExp[]) => boolean;\n};\n\nexport type TFile = {\n  _id?: string;\n  __v?: number;\n  user: string;\n  conversationId?: string;\n  message?: string;\n  file_id: string;\n  temp_file_id?: string;\n  bytes: number;\n  embedded: boolean;\n  filename: string;\n  filepath: string;\n  object: 'file';\n  type: string;\n  usage: number;\n  context?: FileContext;\n  source?: FileSources;\n  filterSource?: FileSources;\n  width?: number;\n  height?: number;\n  expiresAt?: string | Date;\n  preview?: string;\n  metadata?: { fileIdentifier?: string };\n  createdAt?: string | Date;\n  updatedAt?: string | Date;\n};\n\nexport type TFileUpload = TFile & {\n  temp_file_id: string;\n};\n\nexport type AvatarUploadResponse = {\n  url: string;\n};\n\nexport type SpeechToTextResponse = {\n  text: string;\n};\n\nexport type VoiceResponse = string[];\n\nexport type UploadMutationOptions = {\n  onSuccess?: (data: TFileUpload, variables: FormData, context?: unknown) => void;\n  onMutate?: (variables: FormData) => void | Promise<unknown>;\n  onError?: (error: unknown, variables: FormData, context?: unknown) => void;\n};\n\nexport type UploadAvatarOptions = {\n  onSuccess?: (data: AvatarUploadResponse, variables: FormData, context?: unknown) => void;\n  onMutate?: (variables: FormData) => void | Promise<unknown>;\n  onError?: (error: unknown, variables: FormData, context?: unknown) => void;\n};\n\nexport type SpeechToTextOptions = {\n  onSuccess?: (data: SpeechToTextResponse, variables: FormData, context?: unknown) => void;\n  onMutate?: (variables: FormData) => void | Promise<unknown>;\n  onError?: (error: unknown, variables: FormData, context?: unknown) => void;\n};\n\nexport type TextToSpeechOptions = {\n  onSuccess?: (data: ArrayBuffer, variables: FormData, context?: unknown) => void;\n  onMutate?: (variables: FormData) => void | Promise<unknown>;\n  onError?: (error: unknown, variables: FormData, context?: unknown) => void;\n};\n\nexport type VoiceOptions = {\n  onSuccess?: (data: VoiceResponse, variables: unknown, context?: unknown) => void;\n  onMutate?: () => void | Promise<unknown>;\n  onError?: (error: unknown, variables: unknown, context?: unknown) => void;\n};\n\nexport type DeleteFilesResponse = {\n  message: string;\n  result: Record<string, unknown>;\n};\n\nexport type BatchFile = {\n  file_id: string;\n  filepath: string;\n  embedded: boolean;\n  source: FileSources;\n  temp_file_id?: string;\n};\n\nexport type DeleteFilesBody = {\n  files: BatchFile[];\n  agent_id?: string;\n  assistant_id?: string;\n  tool_resource?: EToolResources;\n};\n\nexport type DeleteMutationOptions = {\n  onSuccess?: (data: DeleteFilesResponse, variables: DeleteFilesBody, context?: unknown) => void;\n  onMutate?: (variables: DeleteFilesBody) => void | Promise<unknown>;\n  onError?: (error: unknown, variables: DeleteFilesBody, context?: unknown) => void;\n};\n","/* eslint-disable @typescript-eslint/no-namespace */\nimport { StepTypes, ContentTypes, ToolCallTypes } from './runs';\nimport type { TAttachment, TPlugin } from 'src/schemas';\nimport type { FunctionToolCall } from './assistants';\n\nexport namespace Agents {\n  export type MessageType = 'human' | 'ai' | 'generic' | 'system' | 'function' | 'tool' | 'remove';\n\n  export type ImageDetail = 'auto' | 'low' | 'high';\n\n  export type ReasoningContentText = {\n    type: ContentTypes.THINK;\n    think: string;\n  };\n\n  export type MessageContentText = {\n    type: ContentTypes.TEXT;\n    text: string;\n    tool_call_ids?: string[];\n  };\n\n  export type AgentUpdate = {\n    type: ContentTypes.AGENT_UPDATE;\n    agent_update: {\n      index: number;\n      runId: string;\n      agentId: string;\n    };\n  };\n\n  export type MessageContentImageUrl = {\n    type: ContentTypes.IMAGE_URL;\n    image_url: string | { url: string; detail?: ImageDetail };\n  };\n\n  export type MessageContentComplex =\n    | ReasoningContentText\n    | AgentUpdate\n    | MessageContentText\n    | MessageContentImageUrl\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    | (Record<string, any> & { type?: ContentTypes | string })\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    | (Record<string, any> & { type?: never });\n\n  export type MessageContent = string | MessageContentComplex[];\n\n  /**\n   * A call to a tool.\n   */\n  export type ToolCall = {\n    /** Type (\"tool_call\") according to Assistants Tool Call Structure */\n    type: ToolCallTypes.TOOL_CALL;\n    /** The name of the tool to be called */\n    name: string;\n\n    /** The arguments to the tool call */\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    args?: string | Record<string, any>;\n\n    /** If provided, an identifier associated with the tool call */\n    id?: string;\n    /** If provided, the output of the tool call */\n    output?: string;\n    /** Auth URL */\n    auth?: string;\n    /** Expiration time */\n    expires_at?: number;\n  };\n\n  export type ToolEndEvent = {\n    /** The Step Id of the Tool Call */\n    id: string;\n    /** The Completed Tool Call */\n    tool_call?: ToolCall;\n    /** The content index of the tool call */\n    index: number;\n  };\n\n  export type ToolCallContent = {\n    type: ContentTypes.TOOL_CALL;\n    tool_call?: ToolCall;\n  };\n\n  /**\n   * A chunk of a tool call (e.g., as part of a stream).\n   * When merging ToolCallChunks (e.g., via AIMessageChunk.__add__),\n   * all string attributes are concatenated. Chunks are only merged if their\n   * values of `index` are equal and not None.\n   *\n   * @example\n   * ```ts\n   * const leftChunks = [\n   *   {\n   *     name: \"foo\",\n   *     args: '{\"a\":',\n   *     index: 0\n   *   }\n   * ];\n   *\n   * const leftAIMessageChunk = new AIMessageChunk({\n   *   content: \"\",\n   *   tool_call_chunks: leftChunks\n   * });\n   *\n   * const rightChunks = [\n   *   {\n   *     name: undefined,\n   *     args: '1}',\n   *     index: 0\n   *   }\n   * ];\n   *\n   * const rightAIMessageChunk = new AIMessageChunk({\n   *   content: \"\",\n   *   tool_call_chunks: rightChunks\n   * });\n   *\n   * const result = leftAIMessageChunk.concat(rightAIMessageChunk);\n   * // result.tool_call_chunks is equal to:\n   * // [\n   * //   {\n   * //     name: \"foo\",\n   * //     args: '{\"a\":1}'\n   * //     index: 0\n   * //   }\n   * // ]\n   * ```\n   *\n   * @property {string} [name] - If provided, a substring of the name of the tool to be called\n   * @property {string} [args] - If provided, a JSON substring of the arguments to the tool call\n   * @property {string} [id] - If provided, a substring of an identifier for the tool call\n   * @property {number} [index] - If provided, the index of the tool call in a sequence\n   */\n  export type ToolCallChunk = {\n    name?: string;\n\n    args?: string;\n\n    id?: string;\n\n    index?: number;\n\n    type?: 'tool_call_chunk';\n  };\n\n  /** Event names are of the format: on_[runnable_type]_(start|stream|end).\n\n  Runnable types are one of:\n\n  llm - used by non chat models\n  chat_model - used by chat models\n  prompt -- e.g., ChatPromptTemplate\n  tool -- LangChain tools\n  chain - most Runnables are of this type\n  Further, the events are categorized as one of:\n\n  start - when the runnable starts\n  stream - when the runnable is streaming\n  end - when the runnable ends\n  start, stream and end are associated with slightly different data payload.\n\n  Please see the documentation for EventData for more details. */\n  export type EventName = string;\n  export type RunStep = {\n    type: StepTypes;\n    id: string; // #new\n    runId?: string; // #new\n    index: number; // #new\n    stepIndex?: number; // #new\n    stepDetails: StepDetails;\n    usage: null | object;\n  };\n  /**\n   * Represents a run step delta i.e. any changed fields on a run step during\n   * streaming.\n   */\n  export interface RunStepDeltaEvent {\n    /**\n     * The identifier of the run step, which can be referenced in API endpoints.\n     */\n    id: string;\n    /**\n     * The delta containing the fields that have changed on the run step.\n     */\n    delta: ToolCallDelta;\n  }\n  export type StepDetails = MessageCreationDetails | ToolCallsDetails;\n  export type MessageCreationDetails = {\n    type: StepTypes.MESSAGE_CREATION;\n    message_creation: {\n      message_id: string;\n    };\n  };\n  export type ToolCallsDetails = {\n    type: StepTypes.TOOL_CALLS;\n    tool_calls: AgentToolCall[];\n  };\n  export type ToolCallDelta = {\n    type: StepTypes.TOOL_CALLS | string;\n    tool_calls?: ToolCallChunk[];\n    auth?: string;\n    expires_at?: number;\n  };\n  export type AgentToolCall = FunctionToolCall | ToolCall;\n  export interface ExtendedMessageContent {\n    type?: string;\n    text?: string;\n    input?: string;\n    index?: number;\n    id?: string;\n    name?: string;\n  }\n  /**\n   * Represents a message delta i.e. any changed fields on a message during\n   * streaming.\n   */\n  export interface MessageDeltaEvent {\n    /**\n     * The identifier of the message, which can be referenced in API endpoints.\n     */\n    id: string;\n    /**\n     * The delta containing the fields that have changed on the Message.\n     */\n    delta: MessageDelta;\n  }\n  /**\n   * The delta containing the fields that have changed on the Message.\n   */\n  export interface MessageDelta {\n    /**\n     * The content of the message in array of text and/or images.\n     */\n    content?: Agents.MessageContentComplex[];\n  }\n\n  /**\n   * Represents a reasoning delta i.e. any changed fields on a message during\n   * streaming.\n   */\n  export interface ReasoningDeltaEvent {\n    /**\n     * The identifier of the message, which can be referenced in API endpoints.\n     */\n    id: string;\n\n    /**\n     * The delta containing the fields that have changed.\n     */\n    delta: ReasoningDelta;\n  }\n\n  /**\n   * The reasoning delta containing the fields that have changed on the Message.\n   */\n  export interface ReasoningDelta {\n    /**\n     * The content of the message in array of text and/or images.\n     */\n    content?: MessageContentComplex[];\n  }\n\n  export type ReasoningDeltaUpdate = { type: ContentTypes.THINK; think: string };\n  export type ContentType =\n    | ContentTypes.THINK\n    | ContentTypes.TEXT\n    | ContentTypes.IMAGE_URL\n    | string;\n}\n\nexport type ToolCallResult = {\n  user: string;\n  toolId: string;\n  result?: unknown;\n  messageId: string;\n  partIndex?: number;\n  blockIndex?: number;\n  conversationId: string;\n  attachments?: TAttachment[];\n};\n\nexport enum AuthTypeEnum {\n  ServiceHttp = 'service_http',\n  OAuth = 'oauth',\n  None = 'none',\n}\n\nexport enum AuthorizationTypeEnum {\n  Bearer = 'bearer',\n  Basic = 'basic',\n  Custom = 'custom',\n}\n\nexport enum TokenExchangeMethodEnum {\n  DefaultPost = 'default_post',\n  BasicAuthHeader = 'basic_auth_header',\n}\n\nexport type Action = {\n  action_id: string;\n  type?: string;\n  settings?: Record<string, unknown>;\n  metadata: ActionMetadata;\n  version: number | string;\n} & ({ assistant_id: string; agent_id?: never } | { assistant_id?: never; agent_id: string });\n\nexport type ActionMetadata = {\n  api_key?: string;\n  auth?: ActionAuth;\n  domain?: string;\n  privacy_policy_url?: string;\n  raw_spec?: string;\n  oauth_client_id?: string;\n  oauth_client_secret?: string;\n};\n\nexport type ActionAuth = {\n  authorization_type?: AuthorizationTypeEnum;\n  custom_auth_header?: string;\n  type?: AuthTypeEnum;\n  authorization_content_type?: string;\n  authorization_url?: string;\n  client_url?: string;\n  scope?: string;\n  token_exchange_method?: TokenExchangeMethodEnum;\n};\n\nexport type ActionMetadataRuntime = ActionMetadata & {\n  oauth_access_token?: string;\n  oauth_refresh_token?: string;\n  oauth_token_expires_at?: Date;\n};\n\nexport type MCP = {\n  serverName: string;\n  metadata: MCPMetadata;\n} & ({ assistant_id: string; agent_id?: never } | { assistant_id?: never; agent_id?: string });\n\nexport type MCPMetadata = Omit<ActionMetadata, 'auth'> & {\n  name?: string;\n  description?: string;\n  url?: string;\n  tools?: string[];\n  auth?: MCPAuth;\n  icon?: string;\n  trust?: boolean;\n};\n\nexport type MCPAuth = ActionAuth;\n\nexport type AgentToolType = {\n  tool_id: string;\n  metadata: ToolMetadata;\n} & ({ assistant_id: string; agent_id?: never } | { assistant_id?: never; agent_id?: string });\n\nexport type ToolMetadata = TPlugin;\n\nexport interface BaseMessage {\n  content: string;\n  role?: string;\n  [key: string]: unknown;\n}\n\nexport interface BaseGraphState {\n  [key: string]: unknown;\n}\n\nexport type GraphEdge = {\n  /** Agent ID, use a list for multiple sources */\n  from: string | string[];\n  /** Agent ID, use a list for multiple destinations */\n  to: string | string[];\n  description?: string;\n  /** Can return boolean or specific destination(s) */\n  condition?: (state: BaseGraphState) => boolean | string | string[];\n  /** 'handoff' creates tools for dynamic routing, 'direct' creates direct edges, which also allow parallel execution */\n  edgeType?: 'handoff' | 'direct';\n  /**\n   * For direct edges: Optional prompt to add when transitioning through this edge.\n   * String prompts can include variables like {results} which will be replaced with\n   * messages from startIndex onwards. When {results} is used, excludeResults defaults to true.\n   *\n   * For handoff edges: Description for the input parameter that the handoff tool accepts,\n   * allowing the supervisor to pass specific instructions/context to the transferred agent.\n   */\n  prompt?: string | ((messages: BaseMessage[], runStartIndex: number) => string | undefined);\n  /**\n   * When true, excludes messages from startIndex when adding prompt.\n   * Automatically set to true when {results} variable is used in prompt.\n   */\n  excludeResults?: boolean;\n  /**\n   * For handoff edges: Customizes the parameter name for the handoff input.\n   * Defaults to \"instructions\" if not specified.\n   * Only applies when prompt is provided for handoff edges.\n   */\n  promptKey?: string;\n};\n","import { z } from 'zod';\nimport { TokenExchangeMethodEnum } from './types/agents';\nimport { extractEnvVariable } from './utils';\n\nconst BaseOptionsSchema = z.object({\n  /** Display name for the MCP server - only letters, numbers, and spaces allowed */\n  title: z\n    .string()\n    .regex(/^[a-zA-Z0-9 ]+$/, 'Title can only contain letters, numbers, and spaces')\n    .optional(),\n  /** Description of the MCP server */\n  description: z.string().optional(),\n  /**\n   * Controls whether the MCP server is initialized during application startup.\n   * - true (default): Server is initialized during app startup and included in app-level connections\n   * - false: Skips initialization at startup and excludes from app-level connections - useful for servers\n   *   requiring manual authentication (e.g., GitHub PAT tokens) that need to be configured through the UI after startup\n   */\n  startup: z.boolean().optional(),\n  iconPath: z.string().optional(),\n  timeout: z.number().optional(),\n  initTimeout: z.number().optional(),\n  /** Controls visibility in chat dropdown menu (MCPSelect) */\n  chatMenu: z.boolean().optional(),\n  /**\n   * Controls server instruction behavior:\n   * - undefined/not set: No instructions included (default)\n   * - true: Use server-provided instructions\n   * - string: Use custom instructions (overrides server-provided)\n   */\n  serverInstructions: z.union([z.boolean(), z.string()]).optional(),\n  /**\n   * Whether this server requires OAuth authentication\n   * If not specified, will be auto-detected during construction\n   */\n  requiresOAuth: z.boolean().optional(),\n  /**\n   * OAuth configuration for SSE and Streamable HTTP transports\n   * - Optional: OAuth can be auto-discovered on 401 responses\n   * - Pre-configured values will skip discovery steps\n   */\n  oauth: z\n    .object({\n      /** OAuth authorization endpoint (optional - can be auto-discovered) */\n      authorization_url: z.string().url().optional(),\n      /** OAuth token endpoint (optional - can be auto-discovered) */\n      token_url: z.string().url().optional(),\n      /** OAuth client ID (optional - can use dynamic registration) */\n      client_id: z.string().optional(),\n      /** OAuth client secret (optional - can use dynamic registration) */\n      client_secret: z.string().optional(),\n      /** OAuth scopes to request */\n      scope: z.string().optional(),\n      /** OAuth redirect URI (defaults to /api/mcp/{serverName}/oauth/callback) */\n      redirect_uri: z.string().url().optional(),\n      /** Token exchange method */\n      token_exchange_method: z.nativeEnum(TokenExchangeMethodEnum).optional(),\n      /** Supported grant types (defaults to ['authorization_code', 'refresh_token']) */\n      grant_types_supported: z.array(z.string()).optional(),\n      /** Supported token endpoint authentication methods (defaults to ['client_secret_basic', 'client_secret_post']) */\n      token_endpoint_auth_methods_supported: z.array(z.string()).optional(),\n      /** Supported response types (defaults to ['code']) */\n      response_types_supported: z.array(z.string()).optional(),\n      /** Supported code challenge methods (defaults to ['S256', 'plain']) */\n      code_challenge_methods_supported: z.array(z.string()).optional(),\n      /** Skip code challenge validation and force S256 (useful for providers like AWS Cognito that support S256 but don't advertise it) */\n      skip_code_challenge_check: z.boolean().optional(),\n      /** OAuth revocation endpoint (optional - can be auto-discovered) */\n      revocation_endpoint: z.string().url().optional(),\n      /** OAuth revocation endpoint authentication methods supported (optional - can be auto-discovered) */\n      revocation_endpoint_auth_methods_supported: z.array(z.string()).optional(),\n    })\n    .optional(),\n  /** Custom headers to send with OAuth requests (registration, discovery, token exchange, etc.) */\n  oauth_headers: z.record(z.string(), z.string()).optional(),\n  /**\n   * API Key authentication configuration for SSE and Streamable HTTP transports\n   * - source: 'admin' means the key is provided by admin and shared by all users\n   * - source: 'user' means each user provides their own key via customUserVars\n   */\n  apiKey: z\n    .object({\n      /** API key value (only for admin-provided mode, stored encrypted) */\n      key: z.string().optional(),\n      /** Whether key is provided by admin or each user */\n      source: z.enum(['admin', 'user']),\n      /** How to format the authorization header */\n      authorization_type: z.enum(['basic', 'bearer', 'custom']),\n      /** Custom header name when authorization_type is 'custom' */\n      custom_header: z.string().optional(),\n    })\n    .optional(),\n  customUserVars: z\n    .record(\n      z.string(),\n      z.object({\n        title: z.string(),\n        description: z.string(),\n      }),\n    )\n    .optional(),\n});\n\nexport const StdioOptionsSchema = BaseOptionsSchema.extend({\n  type: z.literal('stdio').optional(),\n  /**\n   * The executable to run to start the server.\n   */\n  command: z.string(),\n  /**\n   * Command line arguments to pass to the executable.\n   */\n  args: z.array(z.string()),\n  /**\n   * The environment to use when spawning the process.\n   *\n   * If not specified, the result of getDefaultEnvironment() will be used.\n   * Environment variables can be referenced using ${VAR_NAME} syntax.\n   */\n  env: z\n    .record(z.string(), z.string())\n    .optional()\n    .transform((env) => {\n      if (!env) {\n        return env;\n      }\n\n      const processedEnv: Record<string, string> = {};\n      for (const [key, value] of Object.entries(env)) {\n        processedEnv[key] = extractEnvVariable(value);\n      }\n      return processedEnv;\n    }),\n  /**\n   * How to handle stderr of the child process. This matches the semantics of Node's `child_process.spawn`.\n   *\n   * @type {import('node:child_process').IOType | import('node:stream').Stream | number}\n   *\n   * The default is \"inherit\", meaning messages to stderr will be printed to the parent process's stderr.\n   */\n  stderr: z.any().optional(),\n});\n\nexport const WebSocketOptionsSchema = BaseOptionsSchema.extend({\n  type: z.literal('websocket').optional(),\n  url: z\n    .string()\n    .transform((val: string) => extractEnvVariable(val))\n    .pipe(z.string().url())\n    .refine(\n      (val: string) => {\n        const protocol = new URL(val).protocol;\n        return protocol === 'ws:' || protocol === 'wss:';\n      },\n      {\n        message: 'WebSocket URL must start with ws:// or wss://',\n      },\n    ),\n});\n\nexport const SSEOptionsSchema = BaseOptionsSchema.extend({\n  type: z.literal('sse').optional(),\n  headers: z.record(z.string(), z.string()).optional(),\n  url: z\n    .string()\n    .transform((val: string) => extractEnvVariable(val))\n    .pipe(z.string().url())\n    .refine(\n      (val: string) => {\n        const protocol = new URL(val).protocol;\n        return protocol !== 'ws:' && protocol !== 'wss:';\n      },\n      {\n        message: 'SSE URL must not start with ws:// or wss://',\n      },\n    ),\n});\n\nexport const StreamableHTTPOptionsSchema = BaseOptionsSchema.extend({\n  type: z.union([z.literal('streamable-http'), z.literal('http')]),\n  headers: z.record(z.string(), z.string()).optional(),\n  url: z\n    .string()\n    .transform((val: string) => extractEnvVariable(val))\n    .pipe(z.string().url())\n    .refine(\n      (val: string) => {\n        const protocol = new URL(val).protocol;\n        return protocol !== 'ws:' && protocol !== 'wss:';\n      },\n      {\n        message: 'Streamable HTTP URL must not start with ws:// or wss://',\n      },\n    ),\n});\n\nexport const MCPOptionsSchema = z.union([\n  StdioOptionsSchema,\n  WebSocketOptionsSchema,\n  SSEOptionsSchema,\n  StreamableHTTPOptionsSchema,\n]);\n\nexport const MCPServersSchema = z.record(z.string(), MCPOptionsSchema);\n\nexport type MCPOptions = z.infer<typeof MCPOptionsSchema>;\n\n/**\n * Helper to omit server-managed fields that should not come from UI\n */\nconst omitServerManagedFields = <T extends z.ZodObject<z.ZodRawShape>>(schema: T) =>\n  schema.omit({\n    startup: true,\n    timeout: true,\n    initTimeout: true,\n    chatMenu: true,\n    serverInstructions: true,\n    requiresOAuth: true,\n    customUserVars: true,\n    oauth_headers: true,\n  });\n\n/**\n * MCP Server configuration that comes from UI input only\n * Omits server-managed fields like startup, timeout, customUserVars, etc.\n * Allows: title, description, url, iconPath, oauth (user credentials)\n */\nexport const MCPServerUserInputSchema = z.union([\n  omitServerManagedFields(StdioOptionsSchema),\n  omitServerManagedFields(WebSocketOptionsSchema),\n  omitServerManagedFields(SSEOptionsSchema),\n  omitServerManagedFields(StreamableHTTPOptionsSchema),\n]);\n\nexport type MCPServerUserInput = z.infer<typeof MCPServerUserInputSchema>;\n","import { z } from 'zod';\nimport type { ZodError } from 'zod';\nimport type { TEndpointsConfig, TModelsConfig, TConfig } from './types';\nimport { EModelEndpoint, eModelEndpointSchema } from './schemas';\nimport { specsConfigSchema, TSpecsConfig } from './models';\nimport { fileConfigSchema } from './file-config';\nimport { apiBaseUrl } from './api-endpoints';\nimport { FileSources } from './types/files';\nimport { MCPServersSchema } from './mcp';\n\nexport const defaultSocialLogins = ['google', 'facebook', 'openid', 'github', 'discord', 'saml'];\n\nexport const defaultRetrievalModels = [\n  'gpt-4o',\n  'o1-preview-2024-09-12',\n  'o1-preview',\n  'o1-mini-2024-09-12',\n  'o1-mini',\n  'o3-mini',\n  'chatgpt-4o-latest',\n  'gpt-4o-2024-05-13',\n  'gpt-4o-2024-08-06',\n  'gpt-4o-mini',\n  'gpt-4o-mini-2024-07-18',\n  'gpt-4-turbo-preview',\n  'gpt-3.5-turbo-0125',\n  'gpt-4-0125-preview',\n  'gpt-4-1106-preview',\n  'gpt-3.5-turbo-1106',\n  'gpt-3.5-turbo-0125',\n  'gpt-4-turbo',\n  'gpt-4-0125',\n  'gpt-4-1106',\n];\n\nexport const excludedKeys = new Set([\n  'conversationId',\n  'title',\n  'iconURL',\n  'greeting',\n  'endpoint',\n  'endpointType',\n  'createdAt',\n  'updatedAt',\n  'expiredAt',\n  'messages',\n  'isArchived',\n  'tags',\n  'user',\n  '__v',\n  '_id',\n  'tools',\n  'model',\n  'files',\n  'spec',\n  'disableParams',\n]);\n\nexport enum SettingsViews {\n  default = 'default',\n  advanced = 'advanced',\n}\n\nexport const fileSourceSchema = z.nativeEnum(FileSources);\n\nexport const fileStrategiesSchema = z\n  .object({\n    default: fileSourceSchema.optional(),\n    avatar: fileSourceSchema.optional(),\n    image: fileSourceSchema.optional(),\n    document: fileSourceSchema.optional(),\n  })\n  .optional();\n\n// Helper type to extract the shape of the Zod object schema\ntype SchemaShape<T> = T extends z.ZodObject<infer U> ? U : never;\n\n// Helper type to determine the default value or undefined based on whether the field has a default\ntype DefaultValue<T> =\n  T extends z.ZodDefault<z.ZodTypeAny> ? ReturnType<T['_def']['defaultValue']> : undefined;\n\n// Extract default values or undefined from the schema shape\ntype ExtractDefaults<T> = {\n  [P in keyof T]: DefaultValue<T[P]>;\n};\n\nexport type SchemaDefaults<T> = ExtractDefaults<SchemaShape<T>>;\n\nexport type TConfigDefaults = SchemaDefaults<typeof configSchema>;\n\nexport function getSchemaDefaults<Schema extends z.AnyZodObject>(\n  schema: Schema,\n): ExtractDefaults<SchemaShape<Schema>> {\n  const shape = schema.shape;\n  const entries = Object.entries(shape).map(([key, value]) => {\n    if (value instanceof z.ZodDefault) {\n      // Extract default value if it exists\n      return [key, value._def.defaultValue()];\n    }\n    return [key, undefined];\n  });\n\n  // Create the object with the right types\n  return Object.fromEntries(entries) as ExtractDefaults<SchemaShape<Schema>>;\n}\n\nexport const modelConfigSchema = z\n  .object({\n    deploymentName: z.string().optional(),\n    version: z.string().optional(),\n    assistants: z.boolean().optional(),\n  })\n  .or(z.boolean());\n\nexport type TAzureModelConfig = z.infer<typeof modelConfigSchema>;\n\nexport const azureBaseSchema = z.object({\n  apiKey: z.string(),\n  serverless: z.boolean().optional(),\n  instanceName: z.string().optional(),\n  deploymentName: z.string().optional(),\n  assistants: z.boolean().optional(),\n  addParams: z.record(z.any()).optional(),\n  dropParams: z.array(z.string()).optional(),\n  forcePrompt: z.boolean().optional(),\n  version: z.string().optional(),\n  baseURL: z.string().optional(),\n  additionalHeaders: z.record(z.any()).optional(),\n});\n\nexport type TAzureBaseSchema = z.infer<typeof azureBaseSchema>;\n\nexport const azureGroupSchema = z\n  .object({\n    group: z.string(),\n    models: z.record(z.string(), modelConfigSchema),\n  })\n  .required()\n  .and(azureBaseSchema);\n\nexport const azureGroupConfigsSchema = z.array(azureGroupSchema).min(1);\nexport type TAzureGroup = z.infer<typeof azureGroupSchema>;\nexport type TAzureGroups = z.infer<typeof azureGroupConfigsSchema>;\nexport type TAzureModelMapSchema = {\n  // deploymentName?: string;\n  // version?: string;\n  group: string;\n};\n\nexport type TAzureModelGroupMap = Record<string, TAzureModelMapSchema | undefined>;\nexport type TAzureGroupMap = Record<\n  string,\n  (TAzureBaseSchema & { models: Record<string, TAzureModelConfig | undefined> }) | undefined\n>;\n\nexport type TValidatedAzureConfig = {\n  modelNames: string[];\n  groupMap: TAzureGroupMap;\n  assistantModels?: string[];\n  assistantGroups?: string[];\n  modelGroupMap: TAzureModelGroupMap;\n};\n\nexport type TAzureConfigValidationResult = TValidatedAzureConfig & {\n  isValid: boolean;\n  errors: (ZodError | string)[];\n};\n\nexport enum Capabilities {\n  code_interpreter = 'code_interpreter',\n  image_vision = 'image_vision',\n  retrieval = 'retrieval',\n  actions = 'actions',\n  tools = 'tools',\n}\n\nexport enum AgentCapabilities {\n  hide_sequential_outputs = 'hide_sequential_outputs',\n  end_after_tools = 'end_after_tools',\n  execute_code = 'execute_code',\n  file_search = 'file_search',\n  web_search = 'web_search',\n  artifacts = 'artifacts',\n  actions = 'actions',\n  context = 'context',\n  tools = 'tools',\n  chain = 'chain',\n  ocr = 'ocr',\n}\n\nexport const defaultAssistantsVersion = {\n  [EModelEndpoint.assistants]: 2,\n  [EModelEndpoint.azureAssistants]: 1,\n};\n\nexport const baseEndpointSchema = z.object({\n  streamRate: z.number().optional(),\n  baseURL: z.string().optional(),\n  titlePrompt: z.string().optional(),\n  titleModel: z.string().optional(),\n  titleConvo: z.boolean().optional(),\n  titleMethod: z\n    .union([z.literal('completion'), z.literal('functions'), z.literal('structured')])\n    .optional(),\n  titleEndpoint: z.string().optional(),\n  titlePromptTemplate: z.string().optional(),\n});\n\nexport type TBaseEndpoint = z.infer<typeof baseEndpointSchema>;\n\nexport const bedrockEndpointSchema = baseEndpointSchema.merge(\n  z.object({\n    availableRegions: z.array(z.string()).optional(),\n  }),\n);\n\nconst modelItemSchema = z.union([\n  z.string(),\n  z.object({\n    name: z.string(),\n    description: z.string().optional(),\n  }),\n]);\n\nexport const assistantEndpointSchema = baseEndpointSchema.merge(\n  z.object({\n    /* assistants specific */\n    disableBuilder: z.boolean().optional(),\n    pollIntervalMs: z.number().optional(),\n    timeoutMs: z.number().optional(),\n    version: z.union([z.string(), z.number()]).default(2),\n    supportedIds: z.array(z.string()).min(1).optional(),\n    excludedIds: z.array(z.string()).min(1).optional(),\n    privateAssistants: z.boolean().optional(),\n    retrievalModels: z.array(z.string()).min(1).optional().default(defaultRetrievalModels),\n    capabilities: z\n      .array(z.nativeEnum(Capabilities))\n      .optional()\n      .default([\n        Capabilities.code_interpreter,\n        Capabilities.image_vision,\n        Capabilities.retrieval,\n        Capabilities.actions,\n        Capabilities.tools,\n      ]),\n    /* general */\n    apiKey: z.string().optional(),\n    models: z\n      .object({\n        default: z.array(modelItemSchema).min(1),\n        fetch: z.boolean().optional(),\n        userIdQuery: z.boolean().optional(),\n      })\n      .optional(),\n    headers: z.record(z.any()).optional(),\n  }),\n);\n\nexport type TAssistantEndpoint = z.infer<typeof assistantEndpointSchema>;\n\nexport const defaultAgentCapabilities = [\n  AgentCapabilities.execute_code,\n  AgentCapabilities.file_search,\n  AgentCapabilities.web_search,\n  AgentCapabilities.artifacts,\n  AgentCapabilities.actions,\n  AgentCapabilities.context,\n  AgentCapabilities.tools,\n  AgentCapabilities.chain,\n  AgentCapabilities.ocr,\n];\n\nexport const agentsEndpointSchema = baseEndpointSchema\n  .merge(\n    z.object({\n      /* agents specific */\n      recursionLimit: z.number().optional(),\n      disableBuilder: z.boolean().optional().default(false),\n      maxRecursionLimit: z.number().optional(),\n      maxCitations: z.number().min(1).max(50).optional().default(30),\n      maxCitationsPerFile: z.number().min(1).max(10).optional().default(7),\n      minRelevanceScore: z.number().min(0.0).max(1.0).optional().default(0.45),\n      allowedProviders: z.array(z.union([z.string(), eModelEndpointSchema])).optional(),\n      capabilities: z\n        .array(z.nativeEnum(AgentCapabilities))\n        .optional()\n        .default(defaultAgentCapabilities),\n    }),\n  )\n  .default({\n    disableBuilder: false,\n    capabilities: defaultAgentCapabilities,\n    maxCitations: 30,\n    maxCitationsPerFile: 7,\n    minRelevanceScore: 0.45,\n  });\n\nexport type TAgentsEndpoint = z.infer<typeof agentsEndpointSchema>;\n\nexport const endpointSchema = baseEndpointSchema.merge(\n  z.object({\n    name: z.string().refine((value) => !eModelEndpointSchema.safeParse(value).success, {\n      message: `Value cannot be one of the default endpoint (EModelEndpoint) values: ${Object.values(\n        EModelEndpoint,\n      ).join(', ')}`,\n    }),\n    apiKey: z.string(),\n    baseURL: z.string(),\n    models: z.object({\n      default: z.array(modelItemSchema).min(1),\n      fetch: z.boolean().optional(),\n      userIdQuery: z.boolean().optional(),\n    }),\n    summarize: z.boolean().optional(),\n    summaryModel: z.string().optional(),\n    iconURL: z.string().optional(),\n    forcePrompt: z.boolean().optional(),\n    modelDisplayLabel: z.string().optional(),\n    headers: z.record(z.any()).optional(),\n    addParams: z.record(z.any()).optional(),\n    dropParams: z.array(z.string()).optional(),\n    customParams: z\n      .object({\n        defaultParamsEndpoint: z.string().default('custom'),\n        paramDefinitions: z.array(z.record(z.any())).optional(),\n      })\n      .strict()\n      .optional(),\n    customOrder: z.number().optional(),\n    directEndpoint: z.boolean().optional(),\n    titleMessageRole: z.string().optional(),\n  }),\n);\n\nexport type TEndpoint = z.infer<typeof endpointSchema>;\n\nexport const azureEndpointSchema = z\n  .object({\n    groups: azureGroupConfigsSchema,\n    plugins: z.boolean().optional(),\n    assistants: z.boolean().optional(),\n  })\n  .and(\n    endpointSchema\n      .pick({\n        streamRate: true,\n        titleConvo: true,\n        titleMethod: true,\n        titleModel: true,\n        titlePrompt: true,\n        titlePromptTemplate: true,\n        summarize: true,\n        summaryModel: true,\n        customOrder: true,\n      })\n      .partial(),\n  );\n\nexport type TAzureConfig = Omit<z.infer<typeof azureEndpointSchema>, 'groups'> &\n  TAzureConfigValidationResult;\n\nconst ttsOpenaiSchema = z.object({\n  url: z.string().optional(),\n  apiKey: z.string(),\n  model: z.string(),\n  voices: z.array(z.string()),\n});\n\nconst ttsAzureOpenAISchema = z.object({\n  instanceName: z.string(),\n  apiKey: z.string(),\n  deploymentName: z.string(),\n  apiVersion: z.string(),\n  model: z.string(),\n  voices: z.array(z.string()),\n});\n\nconst ttsElevenLabsSchema = z.object({\n  url: z.string().optional(),\n  websocketUrl: z.string().optional(),\n  apiKey: z.string(),\n  model: z.string(),\n  voices: z.array(z.string()),\n  voice_settings: z\n    .object({\n      similarity_boost: z.number().optional(),\n      stability: z.number().optional(),\n      style: z.number().optional(),\n      use_speaker_boost: z.boolean().optional(),\n    })\n    .optional(),\n  pronunciation_dictionary_locators: z.array(z.string()).optional(),\n});\n\nconst ttsLocalaiSchema = z.object({\n  url: z.string(),\n  apiKey: z.string().optional(),\n  voices: z.array(z.string()),\n  backend: z.string(),\n});\n\nconst ttsSchema = z.object({\n  openai: ttsOpenaiSchema.optional(),\n  azureOpenAI: ttsAzureOpenAISchema.optional(),\n  elevenlabs: ttsElevenLabsSchema.optional(),\n  localai: ttsLocalaiSchema.optional(),\n});\n\nconst sttOpenaiSchema = z.object({\n  url: z.string().optional(),\n  apiKey: z.string(),\n  model: z.string(),\n});\n\nconst sttAzureOpenAISchema = z.object({\n  instanceName: z.string(),\n  apiKey: z.string(),\n  deploymentName: z.string(),\n  apiVersion: z.string(),\n});\n\nconst sttSchema = z.object({\n  openai: sttOpenaiSchema.optional(),\n  azureOpenAI: sttAzureOpenAISchema.optional(),\n});\n\nconst speechTab = z\n  .object({\n    conversationMode: z.boolean().optional(),\n    advancedMode: z.boolean().optional(),\n    speechToText: z\n      .boolean()\n      .optional()\n      .or(\n        z.object({\n          engineSTT: z.string().optional(),\n          languageSTT: z.string().optional(),\n          autoTranscribeAudio: z.boolean().optional(),\n          decibelValue: z.number().optional(),\n          autoSendText: z.number().optional(),\n        }),\n      )\n      .optional(),\n    textToSpeech: z\n      .boolean()\n      .optional()\n      .or(\n        z.object({\n          engineTTS: z.string().optional(),\n          voice: z.string().optional(),\n          languageTTS: z.string().optional(),\n          automaticPlayback: z.boolean().optional(),\n          playbackRate: z.number().optional(),\n          cacheTTS: z.boolean().optional(),\n        }),\n      )\n      .optional(),\n  })\n  .optional();\n\nexport enum RateLimitPrefix {\n  FILE_UPLOAD = 'FILE_UPLOAD',\n  IMPORT = 'IMPORT',\n  TTS = 'TTS',\n  STT = 'STT',\n}\n\nexport const rateLimitSchema = z.object({\n  fileUploads: z\n    .object({\n      ipMax: z.number().optional(),\n      ipWindowInMinutes: z.number().optional(),\n      userMax: z.number().optional(),\n      userWindowInMinutes: z.number().optional(),\n    })\n    .optional(),\n  conversationsImport: z\n    .object({\n      ipMax: z.number().optional(),\n      ipWindowInMinutes: z.number().optional(),\n      userMax: z.number().optional(),\n      userWindowInMinutes: z.number().optional(),\n    })\n    .optional(),\n  tts: z\n    .object({\n      ipMax: z.number().optional(),\n      ipWindowInMinutes: z.number().optional(),\n      userMax: z.number().optional(),\n      userWindowInMinutes: z.number().optional(),\n    })\n    .optional(),\n  stt: z\n    .object({\n      ipMax: z.number().optional(),\n      ipWindowInMinutes: z.number().optional(),\n      userMax: z.number().optional(),\n      userWindowInMinutes: z.number().optional(),\n    })\n    .optional(),\n});\n\nexport enum EImageOutputType {\n  PNG = 'png',\n  WEBP = 'webp',\n  JPEG = 'jpeg',\n}\n\nconst termsOfServiceSchema = z.object({\n  externalUrl: z.string().optional(),\n  openNewTab: z.boolean().optional(),\n  modalAcceptance: z.boolean().optional(),\n  modalTitle: z.string().optional(),\n  modalContent: z.string().or(z.array(z.string())).optional(),\n});\n\nexport type TTermsOfService = z.infer<typeof termsOfServiceSchema>;\n\n// Schema for localized string (either simple string or language-keyed object)\nconst localizedStringSchema = z.union([z.string(), z.record(z.string())]);\nexport type LocalizedString = z.infer<typeof localizedStringSchema>;\n\nconst mcpServersSchema = z\n  .object({\n    placeholder: z.string().optional(),\n    use: z.boolean().optional(),\n    create: z.boolean().optional(),\n    share: z.boolean().optional(),\n    trustCheckbox: z\n      .object({\n        label: localizedStringSchema.optional(),\n        subLabel: localizedStringSchema.optional(),\n      })\n      .optional(),\n  })\n  .optional();\n\nexport type TMcpServersConfig = z.infer<typeof mcpServersSchema>;\n\nexport const interfaceSchema = z\n  .object({\n    privacyPolicy: z\n      .object({\n        externalUrl: z.string().optional(),\n        openNewTab: z.boolean().optional(),\n      })\n      .optional(),\n    termsOfService: termsOfServiceSchema.optional(),\n    customWelcome: z.string().optional(),\n    mcpServers: mcpServersSchema.optional(),\n    endpointsMenu: z.boolean().optional(),\n    modelSelect: z.boolean().optional(),\n    parameters: z.boolean().optional(),\n    sidePanel: z.boolean().optional(),\n    multiConvo: z.boolean().optional(),\n    bookmarks: z.boolean().optional(),\n    memories: z.boolean().optional(),\n    presets: z.boolean().optional(),\n    prompts: z.boolean().optional(),\n    agents: z.boolean().optional(),\n    temporaryChat: z.boolean().optional(),\n    temporaryChatRetention: z.number().min(1).max(8760).optional(),\n    runCode: z.boolean().optional(),\n    webSearch: z.boolean().optional(),\n    peoplePicker: z\n      .object({\n        users: z.boolean().optional(),\n        groups: z.boolean().optional(),\n        roles: z.boolean().optional(),\n      })\n      .optional(),\n    marketplace: z\n      .object({\n        use: z.boolean().optional(),\n      })\n      .optional(),\n    fileSearch: z.boolean().optional(),\n    fileCitations: z.boolean().optional(),\n  })\n  .default({\n    endpointsMenu: true,\n    modelSelect: true,\n    parameters: true,\n    sidePanel: true,\n    presets: true,\n    multiConvo: true,\n    bookmarks: true,\n    memories: true,\n    prompts: true,\n    agents: true,\n    temporaryChat: true,\n    runCode: true,\n    webSearch: true,\n    peoplePicker: {\n      users: true,\n      groups: true,\n      roles: true,\n    },\n    marketplace: {\n      use: false,\n    },\n    mcpServers: {\n      use: true,\n      create: true,\n      share: false,\n    },\n    fileSearch: true,\n    fileCitations: true,\n  });\n\nexport type TInterfaceConfig = z.infer<typeof interfaceSchema>;\nexport type TBalanceConfig = z.infer<typeof balanceSchema>;\nexport type TTransactionsConfig = z.infer<typeof transactionsSchema>;\n\nexport const turnstileOptionsSchema = z\n  .object({\n    language: z.string().default('auto'),\n    size: z.enum(['normal', 'compact', 'flexible', 'invisible']).default('normal'),\n  })\n  .default({\n    language: 'auto',\n    size: 'normal',\n  });\n\nexport const turnstileSchema = z.object({\n  siteKey: z.string(),\n  options: turnstileOptionsSchema.optional(),\n});\n\nexport type TTurnstileConfig = z.infer<typeof turnstileSchema>;\n\nexport type TStartupConfig = {\n  appTitle: string;\n  socialLogins?: string[];\n  interface?: TInterfaceConfig;\n  turnstile?: TTurnstileConfig;\n  balance?: TBalanceConfig;\n  transactions?: TTransactionsConfig;\n  discordLoginEnabled: boolean;\n  facebookLoginEnabled: boolean;\n  githubLoginEnabled: boolean;\n  googleLoginEnabled: boolean;\n  openidLoginEnabled: boolean;\n  appleLoginEnabled: boolean;\n  samlLoginEnabled: boolean;\n  openidLabel: string;\n  openidImageUrl: string;\n  openidAutoRedirect: boolean;\n  samlLabel: string;\n  samlImageUrl: string;\n  /** LDAP Auth Configuration */\n  ldap?: {\n    /** LDAP enabled */\n    enabled: boolean;\n    /** Whether LDAP uses username vs. email */\n    username?: boolean;\n  };\n  serverDomain: string;\n  emailLoginEnabled: boolean;\n  registrationEnabled: boolean;\n  socialLoginEnabled: boolean;\n  passwordResetEnabled: boolean;\n  emailEnabled: boolean;\n  showBirthdayIcon: boolean;\n  helpAndFaqURL: string;\n  customFooter?: string;\n  modelSpecs?: TSpecsConfig;\n  modelDescriptions?: Record<string, Record<string, string>>;\n  sharedLinksEnabled: boolean;\n  publicSharedLinksEnabled: boolean;\n  analyticsGtmId?: string;\n  instanceProjectId: string;\n  bundlerURL?: string;\n  staticBundlerURL?: string;\n  sharePointFilePickerEnabled?: boolean;\n  sharePointBaseUrl?: string;\n  sharePointPickerGraphScope?: string;\n  sharePointPickerSharePointScope?: string;\n  openidReuseTokens?: boolean;\n  minPasswordLength?: number;\n  webSearch?: {\n    searchProvider?: SearchProviders;\n    scraperProvider?: ScraperProviders;\n    rerankerType?: RerankerTypes;\n  };\n  mcpServers?: Record<\n    string,\n    {\n      customUserVars: Record<\n        string,\n        {\n          title: string;\n          description: string;\n        }\n      >;\n      chatMenu?: boolean;\n      isOAuth?: boolean;\n      startup?: boolean;\n      iconPath?: string;\n    }\n  >;\n  mcpPlaceholder?: string;\n  conversationImportMaxFileSize?: number;\n};\n\nexport enum OCRStrategy {\n  MISTRAL_OCR = 'mistral_ocr',\n  CUSTOM_OCR = 'custom_ocr',\n  AZURE_MISTRAL_OCR = 'azure_mistral_ocr',\n  VERTEXAI_MISTRAL_OCR = 'vertexai_mistral_ocr',\n}\n\nexport enum SearchCategories {\n  PROVIDERS = 'providers',\n  SCRAPERS = 'scrapers',\n  RERANKERS = 'rerankers',\n}\n\nexport enum SearchProviders {\n  SERPER = 'serper',\n  SEARXNG = 'searxng',\n}\n\nexport enum ScraperProviders {\n  FIRECRAWL = 'firecrawl',\n  SERPER = 'serper',\n}\n\nexport enum RerankerTypes {\n  JINA = 'jina',\n  COHERE = 'cohere',\n}\n\nexport enum SafeSearchTypes {\n  OFF = 0,\n  MODERATE = 1,\n  STRICT = 2,\n}\n\nexport const webSearchSchema = z.object({\n  serperApiKey: z.string().optional().default('${SERPER_API_KEY}'),\n  searxngInstanceUrl: z.string().optional().default('${SEARXNG_INSTANCE_URL}'),\n  searxngApiKey: z.string().optional().default('${SEARXNG_API_KEY}'),\n  firecrawlApiKey: z.string().optional().default('${FIRECRAWL_API_KEY}'),\n  firecrawlApiUrl: z.string().optional().default('${FIRECRAWL_API_URL}'),\n  firecrawlVersion: z.string().optional().default('${FIRECRAWL_VERSION}'),\n  jinaApiKey: z.string().optional().default('${JINA_API_KEY}'),\n  jinaApiUrl: z.string().optional().default('${JINA_API_URL}'),\n  cohereApiKey: z.string().optional().default('${COHERE_API_KEY}'),\n  searchProvider: z.nativeEnum(SearchProviders).optional(),\n  scraperProvider: z.nativeEnum(ScraperProviders).optional(),\n  rerankerType: z.nativeEnum(RerankerTypes).optional(),\n  scraperTimeout: z.number().optional(),\n  safeSearch: z.nativeEnum(SafeSearchTypes).default(SafeSearchTypes.MODERATE),\n  firecrawlOptions: z\n    .object({\n      formats: z.array(z.string()).optional(),\n      includeTags: z.array(z.string()).optional(),\n      excludeTags: z.array(z.string()).optional(),\n      headers: z.record(z.string()).optional(),\n      waitFor: z.number().optional(),\n      timeout: z.number().optional(),\n      maxAge: z.number().optional(),\n      mobile: z.boolean().optional(),\n      skipTlsVerification: z.boolean().optional(),\n      blockAds: z.boolean().optional(),\n      removeBase64Images: z.boolean().optional(),\n      parsePDF: z.boolean().optional(),\n      storeInCache: z.boolean().optional(),\n      zeroDataRetention: z.boolean().optional(),\n      location: z\n        .object({\n          country: z.string().optional(),\n          languages: z.array(z.string()).optional(),\n        })\n        .optional(),\n      onlyMainContent: z.boolean().optional(),\n      changeTrackingOptions: z\n        .object({\n          modes: z.array(z.string()).optional(),\n          schema: z.record(z.unknown()).optional(),\n          prompt: z.string().optional(),\n          tag: z.string().nullable().optional(),\n        })\n        .optional(),\n    })\n    .optional(),\n});\n\nexport type TWebSearchConfig = DeepPartial<z.infer<typeof webSearchSchema>>;\n\nexport const ocrSchema = z.object({\n  mistralModel: z.string().optional(),\n  apiKey: z.string().optional().default('${OCR_API_KEY}'),\n  baseURL: z.string().optional().default('${OCR_BASEURL}'),\n  strategy: z.nativeEnum(OCRStrategy).default(OCRStrategy.MISTRAL_OCR),\n});\n\nexport const balanceSchema = z.object({\n  enabled: z.boolean().optional().default(false),\n  startBalance: z.number().optional().default(20000),\n  autoRefillEnabled: z.boolean().optional().default(false),\n  refillIntervalValue: z.number().optional().default(30),\n  refillIntervalUnit: z\n    .enum(['seconds', 'minutes', 'hours', 'days', 'weeks', 'months'])\n    .optional()\n    .default('days'),\n  refillAmount: z.number().optional().default(10000),\n});\n\nexport const transactionsSchema = z.object({\n  enabled: z.boolean().optional().default(true),\n});\n\nexport const memorySchema = z.object({\n  disabled: z.boolean().optional(),\n  validKeys: z.array(z.string()).optional(),\n  tokenLimit: z.number().optional(),\n  charLimit: z.number().optional().default(10000),\n  personalize: z.boolean().default(true),\n  messageWindowSize: z.number().optional().default(5),\n  agent: z\n    .union([\n      z.object({\n        id: z.string(),\n      }),\n      z.object({\n        provider: z.string(),\n        model: z.string(),\n        instructions: z.string().optional(),\n        model_parameters: z.record(z.any()).optional(),\n      }),\n    ])\n    .optional(),\n});\n\nexport type TMemoryConfig = DeepPartial<z.infer<typeof memorySchema>>;\n\nconst customEndpointsSchema = z.array(endpointSchema.partial()).optional();\n\nexport const configSchema = z.object({\n  version: z.string(),\n  cache: z.boolean().default(true),\n  ocr: ocrSchema.optional(),\n  webSearch: webSearchSchema.optional(),\n  memory: memorySchema.optional(),\n  secureImageLinks: z.boolean().optional(),\n  imageOutputType: z.nativeEnum(EImageOutputType).default(EImageOutputType.PNG),\n  includedTools: z.array(z.string()).optional(),\n  filteredTools: z.array(z.string()).optional(),\n  mcpServers: MCPServersSchema.optional(),\n  mcpSettings: z\n    .object({\n      allowedDomains: z.array(z.string()).optional(),\n    })\n    .optional(),\n  interface: interfaceSchema,\n  turnstile: turnstileSchema.optional(),\n  fileStrategy: fileSourceSchema.default(FileSources.local),\n  fileStrategies: fileStrategiesSchema,\n  actions: z\n    .object({\n      allowedDomains: z.array(z.string()).optional(),\n    })\n    .optional(),\n  registration: z\n    .object({\n      socialLogins: z.array(z.string()).optional(),\n      allowedDomains: z.array(z.string()).optional(),\n    })\n    .default({ socialLogins: defaultSocialLogins }),\n  balance: balanceSchema.optional(),\n  transactions: transactionsSchema.optional(),\n  speech: z\n    .object({\n      tts: ttsSchema.optional(),\n      stt: sttSchema.optional(),\n      speechTab: speechTab.optional(),\n    })\n    .optional(),\n  rateLimits: rateLimitSchema.optional(),\n  fileConfig: fileConfigSchema.optional(),\n  modelSpecs: specsConfigSchema.optional(),\n  endpoints: z\n    .object({\n      all: baseEndpointSchema.optional(),\n      [EModelEndpoint.openAI]: baseEndpointSchema.optional(),\n      [EModelEndpoint.google]: baseEndpointSchema.optional(),\n      [EModelEndpoint.anthropic]: baseEndpointSchema.optional(),\n      [EModelEndpoint.azureOpenAI]: azureEndpointSchema.optional(),\n      [EModelEndpoint.azureAssistants]: assistantEndpointSchema.optional(),\n      [EModelEndpoint.assistants]: assistantEndpointSchema.optional(),\n      [EModelEndpoint.agents]: agentsEndpointSchema.optional(),\n      [EModelEndpoint.custom]: customEndpointsSchema.optional(),\n      [EModelEndpoint.bedrock]: baseEndpointSchema.optional(),\n    })\n    .strict()\n    .refine((data) => Object.keys(data).length > 0, {\n      message: 'At least one `endpoints` field must be provided.',\n    })\n    .optional(),\n});\n\n/**\n * Recursively makes all properties of T optional, including nested objects.\n * Handles arrays, primitives, functions, and Date objects correctly.\n */\nexport type DeepPartial<T> = T extends (infer U)[]\n  ? DeepPartial<U>[]\n  : T extends ReadonlyArray<infer U>\n    ? ReadonlyArray<DeepPartial<U>>\n    : // eslint-disable-next-line @typescript-eslint/no-unsafe-function-type\n      T extends Function\n      ? T\n      : T extends Date\n        ? T\n        : T extends object\n          ? {\n              [P in keyof T]?: DeepPartial<T[P]>;\n            }\n          : T;\n\nexport const getConfigDefaults = () => getSchemaDefaults(configSchema);\nexport type TCustomConfig = DeepPartial<z.infer<typeof configSchema>>;\nexport type TCustomEndpoints = z.infer<typeof customEndpointsSchema>;\n\nexport type TProviderSchema =\n  | z.infer<typeof ttsOpenaiSchema>\n  | z.infer<typeof ttsElevenLabsSchema>\n  | z.infer<typeof ttsLocalaiSchema>\n  | undefined;\n\nexport enum KnownEndpoints {\n  anyscale = 'anyscale',\n  apipie = 'apipie',\n  cohere = 'cohere',\n  fireworks = 'fireworks',\n  deepseek = 'deepseek',\n  groq = 'groq',\n  helicone = 'helicone',\n  huggingface = 'huggingface',\n  mistral = 'mistral',\n  mlx = 'mlx',\n  ollama = 'ollama',\n  openrouter = 'openrouter',\n  perplexity = 'perplexity',\n  shuttleai = 'shuttleai',\n  'together.ai' = 'together.ai',\n  unify = 'unify',\n  vercel = 'vercel',\n  xai = 'xai',\n}\n\nexport enum FetchTokenConfig {\n  openrouter = KnownEndpoints.openrouter,\n  helicone = KnownEndpoints.helicone,\n}\n\nexport const defaultEndpoints: EModelEndpoint[] = [\n  EModelEndpoint.openAI,\n  EModelEndpoint.assistants,\n  EModelEndpoint.azureAssistants,\n  EModelEndpoint.azureOpenAI,\n  EModelEndpoint.agents,\n  EModelEndpoint.google,\n  EModelEndpoint.anthropic,\n  EModelEndpoint.custom,\n  EModelEndpoint.bedrock,\n];\n\nexport const alternateName = {\n  [EModelEndpoint.openAI]: 'OpenAI',\n  [EModelEndpoint.assistants]: 'Assistants',\n  [EModelEndpoint.agents]: 'My Agents',\n  [EModelEndpoint.azureAssistants]: 'Azure Assistants',\n  [EModelEndpoint.azureOpenAI]: 'Azure OpenAI',\n  [EModelEndpoint.google]: 'Google',\n  [EModelEndpoint.anthropic]: 'Anthropic',\n  [EModelEndpoint.custom]: 'Custom',\n  [EModelEndpoint.bedrock]: 'AWS Bedrock',\n  [KnownEndpoints.ollama]: 'Ollama',\n  [KnownEndpoints.deepseek]: 'DeepSeek',\n  [KnownEndpoints.xai]: 'xAI',\n  [KnownEndpoints.vercel]: 'Vercel',\n  [KnownEndpoints.helicone]: 'Helicone',\n};\n\nconst sharedOpenAIModels = [\n  'gpt-5.1',\n  'gpt-5.1-chat-latest',\n  'gpt-5.1-codex',\n  'gpt-5.1-codex-mini',\n  'gpt-5',\n  'gpt-5-mini',\n  'gpt-5-nano',\n  'gpt-5-chat-latest',\n  'gpt-4.1',\n  'gpt-4.1-mini',\n  'gpt-4.1-nano',\n  'gpt-4o-mini',\n  'gpt-4o',\n  'gpt-4.5-preview',\n  'gpt-4.5-preview-2025-02-27',\n  'gpt-3.5-turbo',\n  'gpt-3.5-turbo-0125',\n  'gpt-4-turbo',\n  'gpt-4-turbo-2024-04-09',\n  'gpt-4-0125-preview',\n  'gpt-4-turbo-preview',\n  'gpt-4-1106-preview',\n  'gpt-3.5-turbo-1106',\n  'gpt-3.5-turbo-16k-0613',\n  'gpt-3.5-turbo-16k',\n  'gpt-4',\n  'gpt-4-0314',\n  'gpt-4-32k-0314',\n  'gpt-4-0613',\n  'gpt-3.5-turbo-0613',\n];\n\nconst sharedAnthropicModels = [\n  'claude-sonnet-4-5',\n  'claude-sonnet-4-5-20250929',\n  'claude-haiku-4-5',\n  'claude-haiku-4-5-20251001',\n  'claude-opus-4-1',\n  'claude-opus-4-1-20250805',\n  'claude-opus-4-5',\n  'claude-sonnet-4-20250514',\n  'claude-sonnet-4-0',\n  'claude-opus-4-20250514',\n  'claude-opus-4-0',\n  'claude-3-7-sonnet-latest',\n  'claude-3-7-sonnet-20250219',\n  'claude-3-5-haiku-20241022',\n  'claude-3-5-sonnet-20241022',\n  'claude-3-5-sonnet-20240620',\n  'claude-3-5-sonnet-latest',\n  'claude-3-opus-20240229',\n  'claude-3-sonnet-20240229',\n  'claude-3-haiku-20240307',\n  'claude-2.1',\n  'claude-2',\n  'claude-1.2',\n  'claude-1',\n  'claude-1-100k',\n  'claude-instant-1',\n  'claude-instant-1-100k',\n];\n\nexport const bedrockModels = [\n  'anthropic.claude-sonnet-4-5-20250929-v1:0',\n  'anthropic.claude-haiku-4-5-20251001-v1:0',\n  'anthropic.claude-opus-4-1-20250805-v1:0',\n  'anthropic.claude-3-5-sonnet-20241022-v2:0',\n  'anthropic.claude-3-5-sonnet-20240620-v1:0',\n  'anthropic.claude-3-5-haiku-20241022-v1:0',\n  'anthropic.claude-3-haiku-20240307-v1:0',\n  'anthropic.claude-3-opus-20240229-v1:0',\n  'anthropic.claude-3-sonnet-20240229-v1:0',\n  'anthropic.claude-v2',\n  'anthropic.claude-v2:1',\n  'anthropic.claude-instant-v1',\n  // 'cohere.command-text-v14', // no conversation history\n  // 'cohere.command-light-text-v14', // no conversation history\n  'cohere.command-r-v1:0',\n  'cohere.command-r-plus-v1:0',\n  'meta.llama2-13b-chat-v1',\n  'meta.llama2-70b-chat-v1',\n  'meta.llama3-8b-instruct-v1:0',\n  'meta.llama3-70b-instruct-v1:0',\n  'meta.llama3-1-8b-instruct-v1:0',\n  'meta.llama3-1-70b-instruct-v1:0',\n  'meta.llama3-1-405b-instruct-v1:0',\n  'mistral.mistral-7b-instruct-v0:2',\n  'mistral.mixtral-8x7b-instruct-v0:1',\n  'mistral.mistral-large-2402-v1:0',\n  'mistral.mistral-large-2407-v1:0',\n  'mistral.mistral-small-2402-v1:0',\n  'ai21.jamba-instruct-v1:0',\n  // 'ai21.j2-mid-v1', // no streaming\n  // 'ai21.j2-ultra-v1', no conversation history\n  'amazon.titan-text-lite-v1',\n  'amazon.titan-text-express-v1',\n  'amazon.titan-text-premier-v1:0',\n];\n\nexport const defaultModels = {\n  [EModelEndpoint.azureAssistants]: sharedOpenAIModels,\n  [EModelEndpoint.assistants]: [...sharedOpenAIModels, 'chatgpt-4o-latest'],\n  [EModelEndpoint.agents]: sharedOpenAIModels, // TODO: Add agent models (agentsModels)\n  [EModelEndpoint.google]: [\n    // Gemini 2.5 Models\n    'gemini-2.5-pro',\n    'gemini-2.5-flash',\n    'gemini-2.5-flash-lite',\n    // Gemini 2.0 Models\n    'gemini-2.0-flash-001',\n    'gemini-2.0-flash-lite',\n  ],\n  [EModelEndpoint.anthropic]: sharedAnthropicModels,\n  [EModelEndpoint.openAI]: [\n    ...sharedOpenAIModels,\n    'chatgpt-4o-latest',\n    'gpt-4-vision-preview',\n    'gpt-3.5-turbo-instruct-0914',\n    'gpt-3.5-turbo-instruct',\n  ],\n  [EModelEndpoint.bedrock]: bedrockModels,\n};\n\nconst fitlerAssistantModels = (str: string) => {\n  return /gpt-4|gpt-3\\\\.5/i.test(str) && !/vision|instruct/i.test(str);\n};\n\nconst openAIModels = defaultModels[EModelEndpoint.openAI];\n\nexport const initialModelsConfig: TModelsConfig = {\n  initial: [],\n  [EModelEndpoint.openAI]: openAIModels,\n  [EModelEndpoint.assistants]: openAIModels.filter(fitlerAssistantModels),\n  [EModelEndpoint.agents]: openAIModels, // TODO: Add agent models (agentsModels)\n  [EModelEndpoint.azureOpenAI]: openAIModels,\n  [EModelEndpoint.google]: defaultModels[EModelEndpoint.google],\n  [EModelEndpoint.anthropic]: defaultModels[EModelEndpoint.anthropic],\n  [EModelEndpoint.bedrock]: defaultModels[EModelEndpoint.bedrock],\n};\n\nexport const EndpointURLs = {\n  [EModelEndpoint.assistants]: `${apiBaseUrl()}/api/assistants/v2/chat`,\n  [EModelEndpoint.azureAssistants]: `${apiBaseUrl()}/api/assistants/v1/chat`,\n  [EModelEndpoint.agents]: `${apiBaseUrl()}/api/${EModelEndpoint.agents}/chat`,\n} as const;\n\nexport const modularEndpoints = new Set<EModelEndpoint | string>([\n  EModelEndpoint.anthropic,\n  EModelEndpoint.google,\n  EModelEndpoint.openAI,\n  EModelEndpoint.azureOpenAI,\n  EModelEndpoint.custom,\n  EModelEndpoint.agents,\n  EModelEndpoint.bedrock,\n]);\n\nexport const supportsBalanceCheck = {\n  [EModelEndpoint.custom]: true,\n  [EModelEndpoint.openAI]: true,\n  [EModelEndpoint.anthropic]: true,\n  [EModelEndpoint.assistants]: true,\n  [EModelEndpoint.agents]: true,\n  [EModelEndpoint.azureAssistants]: true,\n  [EModelEndpoint.azureOpenAI]: true,\n  [EModelEndpoint.bedrock]: true,\n  [EModelEndpoint.google]: true,\n};\n\nexport const visionModels = [\n  'qwen-vl',\n  'grok-vision',\n  'grok-2-vision',\n  'grok-3',\n  'gpt-4o-mini',\n  'gpt-4o',\n  'gpt-4-turbo',\n  'gpt-4-vision',\n  'o4-mini',\n  'o3',\n  'o1',\n  'gpt-4.1',\n  'gpt-4.5',\n  'llava',\n  'llava-13b',\n  'gemini-pro-vision',\n  'claude-3',\n  'gemma',\n  'gemini-exp',\n  'gemini-1.5',\n  'gemini-2',\n  'gemini-2.5',\n  'gemini-3',\n  'moondream',\n  'llama3.2-vision',\n  'llama-3.2-11b-vision',\n  'llama-3-2-11b-vision',\n  'llama-3.2-90b-vision',\n  'llama-3-2-90b-vision',\n  'llama-4',\n  'claude-opus-4',\n  'claude-sonnet-4',\n  'claude-haiku-4',\n];\nexport enum VisionModes {\n  generative = 'generative',\n  agents = 'agents',\n}\n\nexport function validateVisionModel({\n  model,\n  additionalModels = [],\n  availableModels,\n}: {\n  model: string;\n  additionalModels?: string[];\n  availableModels?: string[];\n}) {\n  if (!model) {\n    return false;\n  }\n\n  if (model.includes('gpt-4-turbo-preview') || model.includes('o1-mini')) {\n    return false;\n  }\n\n  if (availableModels && !availableModels.includes(model)) {\n    return false;\n  }\n\n  return visionModels.concat(additionalModels).some((visionModel) => model.includes(visionModel));\n}\n\nexport const imageGenTools = new Set(['dalle', 'dall-e', 'stable-diffusion', 'flux']);\n\n/**\n * Enum for collections using infinite queries\n */\nexport enum InfiniteCollections {\n  /**\n   * Collection for Prompt Groups\n   */\n  PROMPT_GROUPS = 'promptGroups',\n  /**\n   * Collection for Shared Links\n   */\n  SHARED_LINKS = 'sharedLinks',\n}\n\n/**\n * Enum for time intervals\n */\nexport enum Time {\n  ONE_DAY = 86400000,\n  TWELVE_HOURS = 43200000,\n  ONE_HOUR = 3600000,\n  THIRTY_MINUTES = 1800000,\n  TEN_MINUTES = 600000,\n  FIVE_MINUTES = 300000,\n  THREE_MINUTES = 180000,\n  TWO_MINUTES = 120000,\n  ONE_MINUTE = 60000,\n  THIRTY_SECONDS = 30000,\n}\n\n/**\n * Enum for cache keys.\n */\nexport enum CacheKeys {\n  /**\n   * Key for the config store namespace.\n   */\n  CONFIG_STORE = 'CONFIG_STORE',\n  /**\n   * Key for the roles cache.\n   */\n  ROLES = 'ROLES',\n  /**\n   * Key for the title generation cache.\n   */\n  GEN_TITLE = 'GEN_TITLE',\n  /**\n   * Key for the tools cache.\n   */\n  TOOLS = 'TOOLS',\n  /**\n   * Key for the model config cache.\n   */\n  MODELS_CONFIG = 'MODELS_CONFIG',\n  /**\n   * Key for the model queries cache.\n   */\n  MODEL_QUERIES = 'MODEL_QUERIES',\n  /**\n   * Key for the default startup config cache.\n   */\n  STARTUP_CONFIG = 'STARTUP_CONFIG',\n  /**\n   * Key for the default endpoint config cache.\n   */\n  ENDPOINT_CONFIG = 'ENDPOINT_CONFIG',\n  /**\n   * Key for accessing the model token config cache.\n   */\n  TOKEN_CONFIG = 'TOKEN_CONFIG',\n  /**\n   * Key for the app config namespace.\n   */\n  APP_CONFIG = 'APP_CONFIG',\n  /**\n   * Key for accessing Abort Keys\n   */\n  ABORT_KEYS = 'ABORT_KEYS',\n  /**\n   * Key for the bans cache.\n   */\n  BANS = 'BANS',\n  /**\n   * Key for the encoded domains cache.\n   * Used by Azure OpenAI Assistants.\n   */\n  ENCODED_DOMAINS = 'ENCODED_DOMAINS',\n  /**\n   * Key for the cached audio run Ids.\n   */\n  AUDIO_RUNS = 'AUDIO_RUNS',\n  /**\n   * Key for in-progress messages.\n   */\n  MESSAGES = 'MESSAGES',\n  /**\n   * Key for in-progress flow states.\n   */\n  FLOWS = 'FLOWS',\n  /**\n   * Key for pending chat requests (concurrency check)\n   */\n  PENDING_REQ = 'PENDING_REQ',\n  /**\n   * Key for s3 check intervals per user\n   */\n  S3_EXPIRY_INTERVAL = 'S3_EXPIRY_INTERVAL',\n  /**\n   * key for open id exchanged tokens\n   */\n  OPENID_EXCHANGED_TOKENS = 'OPENID_EXCHANGED_TOKENS',\n  /**\n   * Key for OpenID session.\n   */\n  OPENID_SESSION = 'OPENID_SESSION',\n  /**\n   * Key for SAML session.\n   */\n  SAML_SESSION = 'SAML_SESSION',\n}\n\n/**\n * Enum for violation types, used to identify, log, and cache violations.\n */\nexport enum ViolationTypes {\n  /**\n   * File Upload Violations (exceeding limit).\n   */\n  FILE_UPLOAD_LIMIT = 'file_upload_limit',\n  /**\n   * Illegal Model Request (not available).\n   */\n  ILLEGAL_MODEL_REQUEST = 'illegal_model_request',\n  /**\n   * Token Limit Violation.\n   */\n  TOKEN_BALANCE = 'token_balance',\n  /**\n   * An issued ban.\n   */\n  BAN = 'ban',\n  /**\n   * TTS Request Limit Violation.\n   */\n  TTS_LIMIT = 'tts_limit',\n  /**\n   * STT Request Limit Violation.\n   */\n  STT_LIMIT = 'stt_limit',\n  /**\n   * Reset Password Limit Violation.\n   */\n  RESET_PASSWORD_LIMIT = 'reset_password_limit',\n  /**\n   * Verify Email Limit Violation.\n   */\n  VERIFY_EMAIL_LIMIT = 'verify_email_limit',\n  /**\n   * Verify Conversation Access violation.\n   */\n  CONVO_ACCESS = 'convo_access',\n  /**\n   * Tool Call Limit Violation.\n   */\n  TOOL_CALL_LIMIT = 'tool_call_limit',\n  /**\n   * General violation (catch-all).\n   */\n  GENERAL = 'general',\n  /**\n   * Login attempt violations.\n   */\n  LOGINS = 'logins',\n  /**\n   * Concurrent request violations.\n   */\n  CONCURRENT = 'concurrent',\n  /**\n   * Non-browser access violations.\n   */\n  NON_BROWSER = 'non_browser',\n  /**\n   * Message limit violations.\n   */\n  MESSAGE_LIMIT = 'message_limit',\n  /**\n   * Registration violations.\n   */\n  REGISTRATIONS = 'registrations',\n}\n\n/**\n * Enum for error message types that are not \"violations\" as above, used to identify client-facing errors.\n */\nexport enum ErrorTypes {\n  /**\n   * No User-provided Key.\n   */\n  NO_USER_KEY = 'no_user_key',\n  /**\n   * Expired User-provided Key.\n   */\n  EXPIRED_USER_KEY = 'expired_user_key',\n  /**\n   * Invalid User-provided Key.\n   */\n  INVALID_USER_KEY = 'invalid_user_key',\n  /**\n   * No Base URL Provided.\n   */\n  NO_BASE_URL = 'no_base_url',\n  /**\n   * Moderation error\n   */\n  MODERATION = 'moderation',\n  /**\n   * Prompt exceeds max length\n   */\n  INPUT_LENGTH = 'INPUT_LENGTH',\n  /**\n   * Invalid request error, API rejected request\n   */\n  INVALID_REQUEST = 'invalid_request_error',\n  /**\n   * Invalid action request error, likely not on list of allowed domains\n   */\n  INVALID_ACTION = 'invalid_action_error',\n  /**\n   * Invalid request error, API rejected request\n   */\n  NO_SYSTEM_MESSAGES = 'no_system_messages',\n  /**\n   * Google provider returned an error\n   */\n  GOOGLE_ERROR = 'google_error',\n  /**\n   * Google provider does not allow custom tools with built-in tools\n   */\n  GOOGLE_TOOL_CONFLICT = 'google_tool_conflict',\n  /**\n   * Invalid Agent Provider (excluded by Admin)\n   */\n  INVALID_AGENT_PROVIDER = 'invalid_agent_provider',\n  /**\n   * Missing model selection\n   */\n  MISSING_MODEL = 'missing_model',\n  /**\n   * Models configuration not loaded\n   */\n  MODELS_NOT_LOADED = 'models_not_loaded',\n  /**\n   * Endpoint models not loaded\n   */\n  ENDPOINT_MODELS_NOT_LOADED = 'endpoint_models_not_loaded',\n  /**\n   * Generic Authentication failure\n   */\n  AUTH_FAILED = 'auth_failed',\n  /**\n   * Model refused to respond (content policy violation)\n   */\n  REFUSAL = 'refusal',\n}\n\n/**\n * Enum for authentication keys.\n */\nexport enum AuthKeys {\n  /**\n   * Key for the Service Account to use Vertex AI.\n   */\n  GOOGLE_SERVICE_KEY = 'GOOGLE_SERVICE_KEY',\n  /**\n   * API key to use Google Generative AI.\n   *\n   * Note: this is not for Environment Variables, but to access encrypted object values.\n   */\n  GOOGLE_API_KEY = 'GOOGLE_API_KEY',\n}\n\n/**\n * Enum for Image Detail Cost.\n *\n * **Low Res Fixed Cost:** `85`\n *\n * **High Res Calculation:**\n *\n * Number of `512px` Tiles * `170` + `85` (Additional Cost)\n */\nexport enum ImageDetailCost {\n  /**\n   * Low resolution is a fixed value.\n   */\n  LOW = 85,\n  /**\n   * High resolution Cost Per Tile\n   */\n  HIGH = 170,\n  /**\n   * Additional Cost added to High Resolution Total Cost\n   */\n  // eslint-disable-next-line @typescript-eslint/no-duplicate-enum-values\n  ADDITIONAL = 85,\n}\n\n/**\n * Tab values for Settings Dialog\n */\nexport enum SettingsTabValues {\n  /**\n   * Tab for General Settings\n   */\n  GENERAL = 'general',\n  /**\n   * Tab for Chat Settings\n   */\n  CHAT = 'chat',\n  /**\n   * Tab for Speech Settings\n   */\n  SPEECH = 'speech',\n  /**\n   * Tab for Beta Features\n   */\n  BETA = 'beta',\n  /**\n   * Tab for Data Controls\n   */\n  DATA = 'data',\n  /**\n   * Tab for Balance Settings\n   */\n  BALANCE = 'balance',\n  /**\n   * Tab for Account Settings\n   */\n  ACCOUNT = 'account',\n  /**\n   * Chat input commands\n   */\n  COMMANDS = 'commands',\n  /**\n   * Tab for Personalization Settings\n   */\n  PERSONALIZATION = 'personalization',\n}\n\nexport enum STTProviders {\n  /**\n   * Provider for OpenAI STT\n   */\n  OPENAI = 'openai',\n  /**\n   * Provider for Microsoft Azure STT\n   */\n  AZURE_OPENAI = 'azureOpenAI',\n}\n\nexport enum TTSProviders {\n  /**\n   * Provider for OpenAI TTS\n   */\n  OPENAI = 'openai',\n  /**\n   * Provider for Microsoft Azure OpenAI TTS\n   */\n  AZURE_OPENAI = 'azureOpenAI',\n  /**\n   * Provider for ElevenLabs TTS\n   */\n  ELEVENLABS = 'elevenlabs',\n  /**\n   * Provider for LocalAI TTS\n   */\n  LOCALAI = 'localai',\n}\n\n/** Enum for app-wide constants */\nexport enum Constants {\n  /** Key for the app's version. */\n  VERSION = 'v0.8.2-rc1',\n  /** Key for the Custom Config's version (librechat.yaml). */\n  CONFIG_VERSION = '1.3.1',\n  /** Standard value for the first message's `parentMessageId` value, to indicate no parent exists. */\n  NO_PARENT = '00000000-0000-0000-0000-000000000000',\n  /** Standard value to use whatever the submission prelim. `responseMessageId` is */\n  USE_PRELIM_RESPONSE_MESSAGE_ID = 'USE_PRELIM_RESPONSE_MESSAGE_ID',\n  /** Standard value for the initial conversationId before a request is sent */\n  NEW_CONVO = 'new',\n  /** Standard value for the temporary conversationId after a request is sent and before the server responds */\n  PENDING_CONVO = 'PENDING',\n  /** Standard value for the conversationId used for search queries */\n  SEARCH = 'search',\n  /** Fixed, encoded domain length for Azure OpenAI Assistants Function name parsing. */\n  ENCODED_DOMAIN_LENGTH = 10,\n  /** Identifier for using current_model in multi-model requests. */\n  CURRENT_MODEL = 'current_model',\n  /** Common divider for text values */\n  COMMON_DIVIDER = '__',\n  /** Max length for commands */\n  COMMANDS_MAX_LENGTH = 56,\n  /** Default Stream Rate (ms) */\n  DEFAULT_STREAM_RATE = 1,\n  /** Saved Tag */\n  SAVED_TAG = 'Saved',\n  /** Max number of Conversation starters for Agents/Assistants */\n  MAX_CONVO_STARTERS = 4,\n  /** Global/instance Project Name */\n  GLOBAL_PROJECT_NAME = 'instance',\n  /** Delimiter for MCP tools */\n  mcp_delimiter = '_mcp_',\n  /** Prefix for MCP plugins */\n  mcp_prefix = 'mcp_',\n  /** Unique value to indicate all MCP servers. For backend use only. */\n  mcp_all = 'sys__all__sys',\n  /** Unique value to indicate clearing MCP servers from UI state. For frontend use only. */\n  mcp_clear = 'sys__clear__sys',\n  /**\n   * Unique value to indicate the MCP tool was added to an agent.\n   * This helps inform the UI if the mcp server was previously added.\n   * */\n  mcp_server = 'sys__server__sys',\n  /**\n   * Handoff Tool Name Prefix\n   */\n  LC_TRANSFER_TO_ = 'lc_transfer_to_',\n  /** Placeholder Agent ID for Ephemeral Agents */\n  EPHEMERAL_AGENT_ID = 'ephemeral',\n}\n\nexport enum LocalStorageKeys {\n  /** Key for the admin defined App Title */\n  APP_TITLE = 'appTitle',\n  /** Key for the last conversation setup. */\n  LAST_CONVO_SETUP = 'lastConversationSetup',\n  /** Key for the last selected model. */\n  LAST_MODEL = 'lastSelectedModel',\n  /** Key for the last selected tools. */\n  LAST_TOOLS = 'lastSelectedTools',\n  /** Key for the last selected spec by name*/\n  LAST_SPEC = 'lastSelectedSpec',\n  /** Key for temporary files to delete */\n  FILES_TO_DELETE = 'filesToDelete',\n  /** Prefix key for the last selected assistant ID by index */\n  ASST_ID_PREFIX = 'assistant_id__',\n  /** Prefix key for the last selected agent ID by index */\n  AGENT_ID_PREFIX = 'agent_id__',\n  /** Key for the last selected fork setting */\n  FORK_SETTING = 'forkSetting',\n  /** Key for remembering the last selected option, instead of manually selecting */\n  REMEMBER_FORK_OPTION = 'rememberDefaultFork',\n  /** Key for remembering the split at target fork option modifier */\n  FORK_SPLIT_AT_TARGET = 'splitAtTarget',\n  /** Key for saving text drafts */\n  TEXT_DRAFT = 'textDraft_',\n  /** Key for saving file drafts */\n  FILES_DRAFT = 'filesDraft_',\n  /** Key for last Selected Prompt Category */\n  LAST_PROMPT_CATEGORY = 'lastPromptCategory',\n  /** Key for rendering User Messages as Markdown */\n  ENABLE_USER_MSG_MARKDOWN = 'enableUserMsgMarkdown',\n  /** Key for displaying analysis tool code input */\n  SHOW_ANALYSIS_CODE = 'showAnalysisCode',\n  /** Last selected MCP values per conversation ID */\n  LAST_MCP_ = 'LAST_MCP_',\n  /** Last checked toggle for Code Interpreter API per conversation ID */\n  LAST_CODE_TOGGLE_ = 'LAST_CODE_TOGGLE_',\n  /** Last checked toggle for Web Search per conversation ID */\n  LAST_WEB_SEARCH_TOGGLE_ = 'LAST_WEB_SEARCH_TOGGLE_',\n  /** Last checked toggle for File Search per conversation ID */\n  LAST_FILE_SEARCH_TOGGLE_ = 'LAST_FILE_SEARCH_TOGGLE_',\n  /** Last checked toggle for Artifacts per conversation ID */\n  LAST_ARTIFACTS_TOGGLE_ = 'LAST_ARTIFACTS_TOGGLE_',\n  /** Key for the last selected agent provider */\n  LAST_AGENT_PROVIDER = 'lastAgentProvider',\n  /** Key for the last selected agent model */\n  LAST_AGENT_MODEL = 'lastAgentModel',\n  /** Pin state for MCP tools per conversation ID */\n  PIN_MCP_ = 'PIN_MCP_',\n  /** Pin state for Web Search per conversation ID */\n  PIN_WEB_SEARCH_ = 'PIN_WEB_SEARCH_',\n  /** Pin state for Code Interpreter per conversation ID */\n  PIN_CODE_INTERPRETER_ = 'PIN_CODE_INTERPRETER_',\n}\n\nexport enum ForkOptions {\n  /** Key for direct path option */\n  DIRECT_PATH = 'directPath',\n  /** Key for including branches */\n  INCLUDE_BRANCHES = 'includeBranches',\n  /** Key for target level fork (default) */\n  TARGET_LEVEL = 'targetLevel',\n  /** Default option */\n  DEFAULT = 'default',\n}\n\n/**\n * Enum for Cohere related constants\n */\nexport enum CohereConstants {\n  /**\n   * Cohere API Endpoint, for special handling\n   */\n  API_URL = 'https://api.cohere.ai/v1',\n  /**\n   * Role for \"USER\" messages\n   */\n  ROLE_USER = 'USER',\n  /**\n   * Role for \"SYSTEM\" messages\n   */\n  ROLE_SYSTEM = 'SYSTEM',\n  /**\n   * Role for \"CHATBOT\" messages\n   */\n  ROLE_CHATBOT = 'CHATBOT',\n  /**\n   * Title message as required by Cohere\n   */\n  TITLE_MESSAGE = 'TITLE:',\n}\n\nexport enum SystemCategories {\n  ALL = 'sys__all__sys',\n  MY_PROMPTS = 'sys__my__prompts__sys',\n  NO_CATEGORY = 'sys__no__category__sys',\n  SHARED_PROMPTS = 'sys__shared__prompts__sys',\n}\n\nexport const providerEndpointMap = {\n  [EModelEndpoint.openAI]: EModelEndpoint.openAI,\n  [EModelEndpoint.bedrock]: EModelEndpoint.bedrock,\n  [EModelEndpoint.anthropic]: EModelEndpoint.anthropic,\n  [EModelEndpoint.azureOpenAI]: EModelEndpoint.azureOpenAI,\n};\n\nexport const specialVariables = {\n  current_date: true,\n  current_user: true,\n  iso_datetime: true,\n  current_datetime: true,\n};\n\nexport type TSpecialVarLabel = `com_ui_special_var_${keyof typeof specialVariables}`;\n\n/**\n * Retrieves a specific field from the endpoints configuration for a given endpoint key.\n * Does not infer or default any endpoint type when absent.\n */\nexport function getEndpointField<\n  K extends TConfig[keyof TConfig] extends never ? never : keyof TConfig,\n>(\n  endpointsConfig: TEndpointsConfig | undefined | null,\n  endpoint: EModelEndpoint | string | null | undefined,\n  property: K,\n): TConfig[K] | undefined {\n  if (!endpointsConfig || endpoint === null || endpoint === undefined) {\n    return undefined;\n  }\n  const config = endpointsConfig[endpoint];\n  if (!config) {\n    return undefined;\n  }\n  return config[property];\n}\n","/* eslint-disable @typescript-eslint/no-explicit-any */\nimport axios, { AxiosError, AxiosRequestConfig } from 'axios';\nimport * as endpoints from './api-endpoints';\nimport { setTokenHeader } from './headers-helpers';\nimport type * as t from './types';\n\nasync function _get<T>(url: string, options?: AxiosRequestConfig): Promise<T> {\n  const response = await axios.get(url, { ...options });\n  return response.data;\n}\n\nasync function _getResponse<T>(url: string, options?: AxiosRequestConfig): Promise<T> {\n  return await axios.get(url, { ...options });\n}\n\nasync function _post(url: string, data?: any) {\n  const response = await axios.post(url, JSON.stringify(data), {\n    headers: { 'Content-Type': 'application/json' },\n  });\n  return response.data;\n}\n\nasync function _postMultiPart(url: string, formData: FormData, options?: AxiosRequestConfig) {\n  const response = await axios.post(url, formData, {\n    ...options,\n    headers: { 'Content-Type': 'multipart/form-data' },\n  });\n  return response.data;\n}\n\nasync function _postTTS(url: string, formData: FormData, options?: AxiosRequestConfig) {\n  const response = await axios.post(url, formData, {\n    ...options,\n    headers: { 'Content-Type': 'multipart/form-data' },\n    responseType: 'arraybuffer',\n  });\n  return response.data;\n}\n\nasync function _put(url: string, data?: any) {\n  const response = await axios.put(url, JSON.stringify(data), {\n    headers: { 'Content-Type': 'application/json' },\n  });\n  return response.data;\n}\n\nasync function _delete<T>(url: string): Promise<T> {\n  const response = await axios.delete(url);\n  return response.data;\n}\n\nasync function _deleteWithOptions<T>(url: string, options?: AxiosRequestConfig): Promise<T> {\n  const response = await axios.delete(url, { ...options });\n  return response.data;\n}\n\nasync function _patch(url: string, data?: any) {\n  const response = await axios.patch(url, JSON.stringify(data), {\n    headers: { 'Content-Type': 'application/json' },\n  });\n  return response.data;\n}\n\nlet isRefreshing = false;\nlet failedQueue: { resolve: (value?: any) => void; reject: (reason?: any) => void }[] = [];\n\nconst refreshToken = (retry?: boolean): Promise<t.TRefreshTokenResponse | undefined> =>\n  _post(endpoints.refreshToken(retry));\n\nconst dispatchTokenUpdatedEvent = (token: string) => {\n  setTokenHeader(token);\n  window.dispatchEvent(new CustomEvent('tokenUpdated', { detail: token }));\n};\n\nconst processQueue = (error: AxiosError | null, token: string | null = null) => {\n  failedQueue.forEach((prom) => {\n    if (error) {\n      prom.reject(error);\n    } else {\n      prom.resolve(token);\n    }\n  });\n  failedQueue = [];\n};\n\nif (typeof window !== 'undefined') {\n  axios.interceptors.response.use(\n    (response) => response,\n    async (error) => {\n      const originalRequest = error.config;\n      if (!error.response) {\n        return Promise.reject(error);\n      }\n\n      if (originalRequest.url?.includes('/api/auth/2fa') === true) {\n        return Promise.reject(error);\n      }\n      if (originalRequest.url?.includes('/api/auth/logout') === true) {\n        return Promise.reject(error);\n      }\n\n      if (error.response.status === 401 && !originalRequest._retry) {\n        console.warn('401 error, refreshing token');\n        originalRequest._retry = true;\n\n        if (isRefreshing) {\n          try {\n            const token = await new Promise((resolve, reject) => {\n              failedQueue.push({ resolve, reject });\n            });\n            originalRequest.headers['Authorization'] = 'Bearer ' + token;\n            return await axios(originalRequest);\n          } catch (err) {\n            return Promise.reject(err);\n          }\n        }\n\n        isRefreshing = true;\n\n        try {\n          const response = await refreshToken(\n            // Handle edge case where we get a blank screen if the initial 401 error is from a refresh token request\n            originalRequest.url?.includes('api/auth/refresh') === true ? true : false,\n          );\n\n          const token = response?.token ?? '';\n\n          if (token) {\n            originalRequest.headers['Authorization'] = 'Bearer ' + token;\n            dispatchTokenUpdatedEvent(token);\n            processQueue(null, token);\n            return await axios(originalRequest);\n          } else if (window.location.href.includes('share/')) {\n            console.log(\n              `Refresh token failed from shared link, attempting request to ${originalRequest.url}`,\n            );\n          } else {\n            window.location.href = endpoints.loginPage();\n          }\n        } catch (err) {\n          processQueue(err as AxiosError, null);\n          return Promise.reject(err);\n        } finally {\n          isRefreshing = false;\n        }\n      }\n\n      return Promise.reject(error);\n    },\n  );\n}\n\nexport default {\n  get: _get,\n  getResponse: _getResponse,\n  post: _post,\n  postMultiPart: _postMultiPart,\n  postTTS: _postTTS,\n  put: _put,\n  delete: _delete,\n  deleteWithOptions: _deleteWithOptions,\n  patch: _patch,\n  refreshToken,\n  dispatchTokenUpdatedEvent,\n};\n","import axios from 'axios';\n\nexport function setAcceptLanguageHeader(value: string): void {\n  axios.defaults.headers.common['Accept-Language'] = value;\n}\n\nexport function setTokenHeader(token: string) {\n  axios.defaults.headers.common['Authorization'] = 'Bearer ' + token;\n}\n","import type { AxiosResponse } from 'axios';\nimport type * as t from './types';\nimport * as endpoints from './api-endpoints';\nimport * as a from './types/assistants';\nimport * as ag from './types/agents';\nimport * as m from './types/mutations';\nimport * as q from './types/queries';\nimport * as f from './types/files';\nimport * as mcp from './types/mcpServers';\nimport * as config from './config';\nimport request from './request';\nimport * as s from './schemas';\nimport * as r from './roles';\nimport * as permissions from './accessPermissions';\n\nexport function revokeUserKey(name: string): Promise<unknown> {\n  return request.delete(endpoints.revokeUserKey(name));\n}\n\nexport function revokeAllUserKeys(): Promise<unknown> {\n  return request.delete(endpoints.revokeAllUserKeys());\n}\n\nexport function deleteUser(): Promise<s.TPreset> {\n  return request.delete(endpoints.deleteUser());\n}\n\nexport type FavoriteItem = {\n  agentId?: string;\n  model?: string;\n  endpoint?: string;\n};\n\nexport function getFavorites(): Promise<FavoriteItem[]> {\n  return request.get('/api/user/settings/favorites');\n}\n\nexport function updateFavorites(favorites: FavoriteItem[]): Promise<FavoriteItem[]> {\n  return request.post('/api/user/settings/favorites', { favorites });\n}\n\nexport function getSharedMessages(shareId: string): Promise<t.TSharedMessagesResponse> {\n  return request.get(endpoints.shareMessages(shareId));\n}\n\nexport const listSharedLinks = async (\n  params: q.SharedLinksListParams,\n): Promise<q.SharedLinksResponse> => {\n  const { pageSize, isPublic, sortBy, sortDirection, search, cursor } = params;\n\n  return request.get(\n    endpoints.getSharedLinks(pageSize, isPublic, sortBy, sortDirection, search, cursor),\n  );\n};\n\nexport function getSharedLink(conversationId: string): Promise<t.TSharedLinkGetResponse> {\n  return request.get(endpoints.getSharedLink(conversationId));\n}\n\nexport function createSharedLink(\n  conversationId: string,\n  targetMessageId?: string,\n): Promise<t.TSharedLinkResponse> {\n  return request.post(endpoints.createSharedLink(conversationId), { targetMessageId });\n}\n\nexport function updateSharedLink(shareId: string): Promise<t.TSharedLinkResponse> {\n  return request.patch(endpoints.updateSharedLink(shareId));\n}\n\nexport function deleteSharedLink(shareId: string): Promise<m.TDeleteSharedLinkResponse> {\n  return request.delete(endpoints.shareMessages(shareId));\n}\n\nexport function updateUserKey(payload: t.TUpdateUserKeyRequest) {\n  const { value } = payload;\n  if (!value) {\n    throw new Error('value is required');\n  }\n\n  return request.put(endpoints.keys(), payload);\n}\n\nexport function getPresets(): Promise<s.TPreset[]> {\n  return request.get(endpoints.presets());\n}\n\nexport function createPreset(payload: s.TPreset): Promise<s.TPreset> {\n  return request.post(endpoints.presets(), payload);\n}\n\nexport function updatePreset(payload: s.TPreset): Promise<s.TPreset> {\n  return request.post(endpoints.presets(), payload);\n}\n\nexport function deletePreset(arg: s.TPreset | undefined): Promise<m.PresetDeleteResponse> {\n  return request.post(endpoints.deletePreset(), arg);\n}\n\nexport function getSearchEnabled(): Promise<boolean> {\n  return request.get(endpoints.searchEnabled());\n}\n\nexport function getUser(): Promise<t.TUser> {\n  return request.get(endpoints.user());\n}\n\nexport function getUserBalance(): Promise<t.TBalanceResponse> {\n  return request.get(endpoints.balance());\n}\n\nexport const updateTokenCount = (text: string) => {\n  return request.post(endpoints.tokenizer(), { arg: text });\n};\n\nexport const login = (payload: t.TLoginUser): Promise<t.TLoginResponse> => {\n  return request.post(endpoints.login(), payload);\n};\n\nexport const logout = (): Promise<m.TLogoutResponse> => {\n  return request.post(endpoints.logout());\n};\n\nexport const register = (payload: t.TRegisterUser) => {\n  return request.post(endpoints.register(), payload);\n};\n\nexport const userKeyQuery = (name: string): Promise<t.TCheckUserKeyResponse> =>\n  request.get(endpoints.userKeyQuery(name));\n\nexport const getLoginGoogle = () => {\n  return request.get(endpoints.loginGoogle());\n};\n\nexport const requestPasswordReset = (\n  payload: t.TRequestPasswordReset,\n): Promise<t.TRequestPasswordResetResponse> => {\n  return request.post(endpoints.requestPasswordReset(), payload);\n};\n\nexport const resetPassword = (payload: t.TResetPassword) => {\n  return request.post(endpoints.resetPassword(), payload);\n};\n\nexport const verifyEmail = (payload: t.TVerifyEmail): Promise<t.VerifyEmailResponse> => {\n  return request.post(endpoints.verifyEmail(), payload);\n};\n\nexport const resendVerificationEmail = (\n  payload: t.TResendVerificationEmail,\n): Promise<t.VerifyEmailResponse> => {\n  return request.post(endpoints.resendVerificationEmail(), payload);\n};\n\nexport const getAvailablePlugins = (): Promise<s.TPlugin[]> => {\n  return request.get(endpoints.plugins());\n};\n\nexport const updateUserPlugins = (payload: t.TUpdateUserPlugins) => {\n  return request.post(endpoints.userPlugins(), payload);\n};\n\nexport const reinitializeMCPServer = (serverName: string) => {\n  return request.post(endpoints.mcpReinitialize(serverName));\n};\n\nexport const getMCPConnectionStatus = (): Promise<q.MCPConnectionStatusResponse> => {\n  return request.get(endpoints.mcpConnectionStatus());\n};\n\nexport const getMCPServerConnectionStatus = (\n  serverName: string,\n): Promise<q.MCPServerConnectionStatusResponse> => {\n  return request.get(endpoints.mcpServerConnectionStatus(serverName));\n};\n\nexport const getMCPAuthValues = (serverName: string): Promise<q.MCPAuthValuesResponse> => {\n  return request.get(endpoints.mcpAuthValues(serverName));\n};\n\nexport function cancelMCPOAuth(serverName: string): Promise<m.CancelMCPOAuthResponse> {\n  return request.post(endpoints.cancelMCPOAuth(serverName), {});\n}\n\n/* Config */\n\nexport const getStartupConfig = (): Promise<\n  config.TStartupConfig & {\n    mcpCustomUserVars?: Record<string, { title: string; description: string }>;\n  }\n> => {\n  return request.get(endpoints.config());\n};\n\nexport const getAIEndpoints = (): Promise<t.TEndpointsConfig> => {\n  return request.get(endpoints.aiEndpoints());\n};\n\nexport const getModels = async (): Promise<t.TModelsConfig> => {\n  return request.get(endpoints.models());\n};\n\n/* Assistants */\n\nexport const createAssistant = ({\n  version,\n  ...data\n}: a.AssistantCreateParams): Promise<a.Assistant> => {\n  return request.post(endpoints.assistants({ version }), data);\n};\n\nexport const getAssistantById = ({\n  endpoint,\n  assistant_id,\n  version,\n}: {\n  endpoint: s.AssistantsEndpoint;\n  assistant_id: string;\n  version: number | string | number;\n}): Promise<a.Assistant> => {\n  return request.get(\n    endpoints.assistants({\n      path: assistant_id,\n      endpoint,\n      version,\n    }),\n  );\n};\n\nexport const updateAssistant = ({\n  assistant_id,\n  data,\n  version,\n}: {\n  assistant_id: string;\n  data: a.AssistantUpdateParams;\n  version: number | string;\n}): Promise<a.Assistant> => {\n  return request.patch(\n    endpoints.assistants({\n      path: assistant_id,\n      version,\n    }),\n    data,\n  );\n};\n\nexport const deleteAssistant = ({\n  assistant_id,\n  model,\n  endpoint,\n  version,\n}: m.DeleteAssistantBody & { version: number | string }): Promise<void> => {\n  return request.delete(\n    endpoints.assistants({\n      path: assistant_id,\n      options: { model, endpoint },\n      version,\n    }),\n  );\n};\n\nexport const listAssistants = (\n  params: a.AssistantListParams,\n  version: number | string,\n): Promise<a.AssistantListResponse> => {\n  return request.get(\n    endpoints.assistants({\n      version,\n      options: params,\n    }),\n  );\n};\n\nexport function getAssistantDocs({\n  endpoint,\n  version,\n}: {\n  endpoint: s.AssistantsEndpoint | string;\n  version: number | string;\n}): Promise<a.AssistantDocument[]> {\n  if (!s.isAssistantsEndpoint(endpoint)) {\n    return Promise.resolve([]);\n  }\n  return request.get(\n    endpoints.assistants({\n      path: 'documents',\n      version,\n      options: { endpoint },\n      endpoint: endpoint as s.AssistantsEndpoint,\n    }),\n  );\n}\n\n/* Tools */\n\nexport const getAvailableTools = (\n  _endpoint: s.AssistantsEndpoint | s.EModelEndpoint.agents,\n  version?: number | string,\n): Promise<s.TPlugin[]> => {\n  let path = '';\n  if (s.isAssistantsEndpoint(_endpoint)) {\n    const endpoint = _endpoint as s.AssistantsEndpoint;\n    path = endpoints.assistants({\n      path: 'tools',\n      endpoint: endpoint,\n      version: version ?? config.defaultAssistantsVersion[endpoint],\n    });\n  } else {\n    path = endpoints.agents({\n      path: 'tools',\n    });\n  }\n\n  return request.get(path);\n};\n\n/* MCP Tools - Decoupled from regular tools */\n\nexport const getMCPTools = (): Promise<q.MCPServersResponse> => {\n  return request.get(endpoints.mcp.tools);\n};\n\nexport const getVerifyAgentToolAuth = (\n  params: q.VerifyToolAuthParams,\n): Promise<q.VerifyToolAuthResponse> => {\n  return request.get(\n    endpoints.agents({\n      path: `tools/${params.toolId}/auth`,\n    }),\n  );\n};\n\nexport const callTool = <T extends m.ToolId>({\n  toolId,\n  toolParams,\n}: {\n  toolId: T;\n  toolParams: m.ToolParams<T>;\n}): Promise<m.ToolCallResponse> => {\n  return request.post(\n    endpoints.agents({\n      path: `tools/${toolId}/call`,\n    }),\n    toolParams,\n  );\n};\n\nexport const getToolCalls = (params: q.GetToolCallParams): Promise<q.ToolCallResults> => {\n  return request.get(\n    endpoints.agents({\n      path: 'tools/calls',\n      options: params,\n    }),\n  );\n};\n\n/* Files */\n\nexport const getFiles = (): Promise<f.TFile[]> => {\n  return request.get(endpoints.files());\n};\n\nexport const getAgentFiles = (agentId: string): Promise<f.TFile[]> => {\n  return request.get(endpoints.agentFiles(agentId));\n};\n\nexport const getFileConfig = (): Promise<f.FileConfig> => {\n  return request.get(`${endpoints.files()}/config`);\n};\n\nexport const uploadImage = (\n  data: FormData,\n  signal?: AbortSignal | null,\n): Promise<f.TFileUpload> => {\n  const requestConfig = signal ? { signal } : undefined;\n  return request.postMultiPart(endpoints.images(), data, requestConfig);\n};\n\nexport const uploadFile = (data: FormData, signal?: AbortSignal | null): Promise<f.TFileUpload> => {\n  const requestConfig = signal ? { signal } : undefined;\n  return request.postMultiPart(endpoints.files(), data, requestConfig);\n};\n\n/* actions */\n\nexport const updateAction = (data: m.UpdateActionVariables): Promise<m.UpdateActionResponse> => {\n  const { assistant_id, version, ...body } = data;\n  return request.post(\n    endpoints.assistants({\n      path: `actions/${assistant_id}`,\n      version,\n    }),\n    body,\n  );\n};\n\nexport function getActions(): Promise<ag.Action[]> {\n  return request.get(\n    endpoints.agents({\n      path: 'actions',\n    }),\n  );\n}\n\nexport const deleteAction = async ({\n  assistant_id,\n  action_id,\n  model,\n  version,\n  endpoint,\n}: m.DeleteActionVariables & { version: number | string }): Promise<void> =>\n  request.delete(\n    endpoints.assistants({\n      path: `actions/${assistant_id}/${action_id}/${model}`,\n      version,\n      endpoint,\n    }),\n  );\n\n/**\n * Agents\n */\n\nexport const createAgent = ({ ...data }: a.AgentCreateParams): Promise<a.Agent> => {\n  return request.post(endpoints.agents({}), data);\n};\n\nexport const getAgentById = ({ agent_id }: { agent_id: string }): Promise<a.Agent> => {\n  return request.get(\n    endpoints.agents({\n      path: agent_id,\n    }),\n  );\n};\n\nexport const getExpandedAgentById = ({ agent_id }: { agent_id: string }): Promise<a.Agent> => {\n  return request.get(\n    endpoints.agents({\n      path: `${agent_id}/expanded`,\n    }),\n  );\n};\n\nexport const updateAgent = ({\n  agent_id,\n  data,\n}: {\n  agent_id: string;\n  data: a.AgentUpdateParams;\n}): Promise<a.Agent> => {\n  return request.patch(\n    endpoints.agents({\n      path: agent_id,\n    }),\n    data,\n  );\n};\n\nexport const duplicateAgent = ({\n  agent_id,\n}: m.DuplicateAgentBody): Promise<{ agent: a.Agent; actions: ag.Action[] }> => {\n  return request.post(\n    endpoints.agents({\n      path: `${agent_id}/duplicate`,\n    }),\n  );\n};\n\nexport const deleteAgent = ({ agent_id }: m.DeleteAgentBody): Promise<void> => {\n  return request.delete(\n    endpoints.agents({\n      path: agent_id,\n    }),\n  );\n};\n\nexport const listAgents = (params: a.AgentListParams): Promise<a.AgentListResponse> => {\n  return request.get(\n    endpoints.agents({\n      options: params,\n    }),\n  );\n};\n\nexport const revertAgentVersion = ({\n  agent_id,\n  version_index,\n}: {\n  agent_id: string;\n  version_index: number;\n}): Promise<a.Agent> => request.post(endpoints.revertAgentVersion(agent_id), { version_index });\n\n/* Marketplace */\n\n/**\n * Get agent categories with counts for marketplace tabs\n */\nexport const getAgentCategories = (): Promise<t.TMarketplaceCategory[]> => {\n  return request.get(endpoints.agents({ path: 'categories' }));\n};\n\n/**\n * Unified marketplace agents endpoint with query string controls\n */\nexport const getMarketplaceAgents = (params: {\n  requiredPermission: number;\n  category?: string;\n  search?: string;\n  limit?: number;\n  cursor?: string;\n  promoted?: 0 | 1;\n}): Promise<a.AgentListResponse> => {\n  return request.get(\n    endpoints.agents({\n      // path: 'marketplace',\n      options: params,\n    }),\n  );\n};\n\n/* Tools */\n\nexport const getAvailableAgentTools = (): Promise<s.TPlugin[]> => {\n  return request.get(\n    endpoints.agents({\n      path: 'tools',\n    }),\n  );\n};\n\n/* Actions */\n\nexport const updateAgentAction = (\n  data: m.UpdateAgentActionVariables,\n): Promise<m.UpdateAgentActionResponse> => {\n  const { agent_id, ...body } = data;\n  return request.post(\n    endpoints.agents({\n      path: `actions/${agent_id}`,\n    }),\n    body,\n  );\n};\n\nexport const deleteAgentAction = async ({\n  agent_id,\n  action_id,\n}: m.DeleteAgentActionVariables): Promise<void> =>\n  request.delete(\n    endpoints.agents({\n      path: `actions/${agent_id}/${action_id}`,\n    }),\n  );\n\n/**\n * MCP Servers\n */\n\n/**\n *\n * Ensure and List loaded mcp server configs from the cache Enriched with effective permissions.\n */\nexport const getMCPServers = async (): Promise<mcp.MCPServersListResponse> => {\n  return request.get(endpoints.mcp.servers);\n};\n\n/**\n * Get a single MCP server by ID\n */\nexport const getMCPServer = async (serverName: string): Promise<mcp.MCPServerDBObjectResponse> => {\n  return request.get(endpoints.mcpServer(serverName));\n};\n\n/**\n * Create a new MCP server\n */\nexport const createMCPServer = async (\n  data: mcp.MCPServerCreateParams,\n): Promise<mcp.MCPServerDBObjectResponse> => {\n  return request.post(endpoints.mcp.servers, data);\n};\n\n/**\n * Update an existing MCP server\n */\nexport const updateMCPServer = async (\n  serverName: string,\n  data: mcp.MCPServerUpdateParams,\n): Promise<mcp.MCPServerDBObjectResponse> => {\n  return request.patch(endpoints.mcpServer(serverName), data);\n};\n\n/**\n * Delete an MCP server\n */\nexport const deleteMCPServer = async (serverName: string): Promise<{ success: boolean }> => {\n  return request.delete(endpoints.mcpServer(serverName));\n};\n\n/**\n * Imports a conversations file.\n *\n * @param data - The FormData containing the file to import.\n * @returns A Promise that resolves to the import start response.\n */\nexport const importConversationsFile = (data: FormData): Promise<t.TImportResponse> => {\n  return request.postMultiPart(endpoints.importConversation(), data);\n};\n\nexport const uploadAvatar = (data: FormData): Promise<f.AvatarUploadResponse> => {\n  return request.postMultiPart(endpoints.avatar(), data);\n};\n\nexport const uploadAssistantAvatar = (data: m.AssistantAvatarVariables): Promise<a.Assistant> => {\n  return request.postMultiPart(\n    endpoints.assistants({\n      isAvatar: true,\n      path: `${data.assistant_id}/avatar`,\n      options: { model: data.model, endpoint: data.endpoint },\n      version: data.version,\n    }),\n    data.formData,\n  );\n};\n\nexport const uploadAgentAvatar = (data: m.AgentAvatarVariables): Promise<a.Agent> => {\n  return request.postMultiPart(\n    `${endpoints.images()}/agents/${data.agent_id}/avatar`,\n    data.formData,\n  );\n};\n\nexport const getFileDownload = async (userId: string, file_id: string): Promise<AxiosResponse> => {\n  return request.getResponse(`${endpoints.files()}/download/${userId}/${file_id}`, {\n    responseType: 'blob',\n    headers: {\n      Accept: 'application/octet-stream',\n    },\n  });\n};\n\nexport const getCodeOutputDownload = async (url: string): Promise<AxiosResponse> => {\n  return request.getResponse(url, {\n    responseType: 'blob',\n    headers: {\n      Accept: 'application/octet-stream',\n    },\n  });\n};\n\nexport const deleteFiles = async (payload: {\n  files: f.BatchFile[];\n  agent_id?: string;\n  assistant_id?: string;\n  tool_resource?: a.EToolResources;\n}): Promise<f.DeleteFilesResponse> =>\n  request.deleteWithOptions(endpoints.files(), {\n    data: payload,\n  });\n\n/* Speech */\n\nexport const speechToText = (data: FormData): Promise<f.SpeechToTextResponse> => {\n  return request.postMultiPart(endpoints.speechToText(), data);\n};\n\nexport const textToSpeech = (data: FormData): Promise<ArrayBuffer> => {\n  return request.postTTS(endpoints.textToSpeechManual(), data);\n};\n\nexport const getVoices = (): Promise<f.VoiceResponse> => {\n  return request.get(endpoints.textToSpeechVoices());\n};\n\nexport const getCustomConfigSpeech = (): Promise<t.TCustomConfigSpeechResponse> => {\n  return request.get(endpoints.getCustomConfigSpeech());\n};\n\n/* conversations */\n\nexport function duplicateConversation(\n  payload: t.TDuplicateConvoRequest,\n): Promise<t.TDuplicateConvoResponse> {\n  return request.post(endpoints.duplicateConversation(), payload);\n}\n\nexport function forkConversation(payload: t.TForkConvoRequest): Promise<t.TForkConvoResponse> {\n  return request.post(endpoints.forkConversation(), payload);\n}\n\nexport function deleteConversation(payload: t.TDeleteConversationRequest) {\n  return request.deleteWithOptions(endpoints.deleteConversation(), { data: { arg: payload } });\n}\n\nexport function clearAllConversations(): Promise<unknown> {\n  return request.delete(endpoints.deleteAllConversation());\n}\n\nexport const listConversations = (\n  params?: q.ConversationListParams,\n): Promise<q.ConversationListResponse> => {\n  return request.get(endpoints.conversations(params ?? {}));\n};\n\nexport function getConversations(cursor: string): Promise<t.TGetConversationsResponse> {\n  return request.get(endpoints.conversations({ cursor }));\n}\n\nexport function getConversationById(id: string): Promise<s.TConversation> {\n  return request.get(endpoints.conversationById(id));\n}\n\nexport function updateConversation(\n  payload: t.TUpdateConversationRequest,\n): Promise<t.TUpdateConversationResponse> {\n  return request.post(endpoints.updateConversation(), { arg: payload });\n}\n\nexport function archiveConversation(\n  payload: t.TArchiveConversationRequest,\n): Promise<t.TArchiveConversationResponse> {\n  return request.post(endpoints.updateConversation(), { arg: payload });\n}\n\nexport function genTitle(payload: m.TGenTitleRequest): Promise<m.TGenTitleResponse> {\n  return request.post(endpoints.genTitle(), payload);\n}\n\nexport const listMessages = (params?: q.MessagesListParams): Promise<q.MessagesListResponse> => {\n  return request.get(endpoints.messages(params ?? {}));\n};\n\nexport function updateMessage(payload: t.TUpdateMessageRequest): Promise<unknown> {\n  const { conversationId, messageId, text } = payload;\n  if (!conversationId) {\n    throw new Error('conversationId is required');\n  }\n\n  return request.put(endpoints.messages({ conversationId, messageId }), { text });\n}\n\nexport function updateMessageContent(payload: t.TUpdateMessageContent): Promise<unknown> {\n  const { conversationId, messageId, index, text } = payload;\n  if (!conversationId) {\n    throw new Error('conversationId is required');\n  }\n\n  return request.put(endpoints.messages({ conversationId, messageId }), { text, index });\n}\n\nexport const editArtifact = async ({\n  messageId,\n  ...params\n}: m.TEditArtifactRequest): Promise<m.TEditArtifactResponse> => {\n  return request.post(endpoints.messagesArtifacts(messageId), params);\n};\n\nexport function getMessagesByConvoId(conversationId: string): Promise<s.TMessage[]> {\n  if (\n    conversationId === config.Constants.NEW_CONVO ||\n    conversationId === config.Constants.PENDING_CONVO\n  ) {\n    return Promise.resolve([]);\n  }\n  return request.get(endpoints.messages({ conversationId }));\n}\n\nexport function getPrompt(id: string): Promise<{ prompt: t.TPrompt }> {\n  return request.get(endpoints.getPrompt(id));\n}\n\nexport function getPrompts(filter: t.TPromptsWithFilterRequest): Promise<t.TPrompt[]> {\n  return request.get(endpoints.getPromptsWithFilters(filter));\n}\n\nexport function getAllPromptGroups(): Promise<q.AllPromptGroupsResponse> {\n  return request.get(endpoints.getAllPromptGroups());\n}\n\nexport function getPromptGroups(\n  filter: t.TPromptGroupsWithFilterRequest,\n): Promise<t.PromptGroupListResponse> {\n  return request.get(endpoints.getPromptGroupsWithFilters(filter));\n}\n\nexport function getPromptGroup(id: string): Promise<t.TPromptGroup> {\n  return request.get(endpoints.getPromptGroup(id));\n}\n\nexport function createPrompt(payload: t.TCreatePrompt): Promise<t.TCreatePromptResponse> {\n  return request.post(endpoints.postPrompt(), payload);\n}\n\nexport function addPromptToGroup(\n  groupId: string,\n  payload: t.TCreatePrompt,\n): Promise<t.TCreatePromptResponse> {\n  return request.post(endpoints.addPromptToGroup(groupId), payload);\n}\n\nexport function updatePromptGroup(\n  variables: t.TUpdatePromptGroupVariables,\n): Promise<t.TUpdatePromptGroupResponse> {\n  return request.patch(endpoints.updatePromptGroup(variables.id), variables.payload);\n}\n\nexport function deletePrompt(payload: t.TDeletePromptVariables): Promise<t.TDeletePromptResponse> {\n  return request.delete(endpoints.deletePrompt(payload));\n}\n\nexport function makePromptProduction(id: string): Promise<t.TMakePromptProductionResponse> {\n  return request.patch(endpoints.updatePromptTag(id));\n}\n\nexport function updatePromptLabels(\n  variables: t.TUpdatePromptLabelsRequest,\n): Promise<t.TUpdatePromptLabelsResponse> {\n  return request.patch(endpoints.updatePromptLabels(variables.id), variables.payload);\n}\n\nexport function deletePromptGroup(id: string): Promise<t.TDeletePromptGroupResponse> {\n  return request.delete(endpoints.deletePromptGroup(id));\n}\n\nexport function getCategories(): Promise<t.TGetCategoriesResponse> {\n  return request.get(endpoints.getCategories());\n}\n\nexport function getRandomPrompts(\n  variables: t.TGetRandomPromptsRequest,\n): Promise<t.TGetRandomPromptsResponse> {\n  return request.get(endpoints.getRandomPrompts(variables.limit, variables.skip));\n}\n\n/* Roles */\nexport function getRole(roleName: string): Promise<r.TRole> {\n  return request.get(endpoints.getRole(roleName));\n}\n\nexport function updatePromptPermissions(\n  variables: m.UpdatePromptPermVars,\n): Promise<m.UpdatePermResponse> {\n  return request.put(endpoints.updatePromptPermissions(variables.roleName), variables.updates);\n}\n\nexport function updateAgentPermissions(\n  variables: m.UpdateAgentPermVars,\n): Promise<m.UpdatePermResponse> {\n  return request.put(endpoints.updateAgentPermissions(variables.roleName), variables.updates);\n}\n\nexport function updateMemoryPermissions(\n  variables: m.UpdateMemoryPermVars,\n): Promise<m.UpdatePermResponse> {\n  return request.put(endpoints.updateMemoryPermissions(variables.roleName), variables.updates);\n}\n\nexport function updatePeoplePickerPermissions(\n  variables: m.UpdatePeoplePickerPermVars,\n): Promise<m.UpdatePermResponse> {\n  return request.put(\n    endpoints.updatePeoplePickerPermissions(variables.roleName),\n    variables.updates,\n  );\n}\n\nexport function updateMCPServersPermissions(\n  variables: m.UpdateMCPServersPermVars,\n): Promise<m.UpdatePermResponse> {\n  return request.put(endpoints.updateMCPServersPermissions(variables.roleName), variables.updates);\n}\n\nexport function updateMarketplacePermissions(\n  variables: m.UpdateMarketplacePermVars,\n): Promise<m.UpdatePermResponse> {\n  return request.put(endpoints.updateMarketplacePermissions(variables.roleName), variables.updates);\n}\n\n/* Tags */\nexport function getConversationTags(): Promise<t.TConversationTagsResponse> {\n  return request.get(endpoints.conversationTags());\n}\n\nexport function createConversationTag(\n  payload: t.TConversationTagRequest,\n): Promise<t.TConversationTagResponse> {\n  return request.post(endpoints.conversationTags(), payload);\n}\n\nexport function updateConversationTag(\n  tag: string,\n  payload: t.TConversationTagRequest,\n): Promise<t.TConversationTagResponse> {\n  return request.put(endpoints.conversationTags(tag), payload);\n}\nexport function deleteConversationTag(tag: string): Promise<t.TConversationTagResponse> {\n  return request.delete(endpoints.conversationTags(tag));\n}\n\nexport function addTagToConversation(\n  conversationId: string,\n  payload: t.TTagConversationRequest,\n): Promise<t.TTagConversationResponse> {\n  return request.put(endpoints.addTagToConversation(conversationId), payload);\n}\nexport function rebuildConversationTags(): Promise<t.TConversationTagsResponse> {\n  return request.post(endpoints.conversationTags('rebuild'));\n}\n\nexport function healthCheck(): Promise<string> {\n  return request.get(endpoints.health());\n}\n\nexport function getUserTerms(): Promise<t.TUserTermsResponse> {\n  return request.get(endpoints.userTerms());\n}\n\nexport function acceptTerms(): Promise<t.TAcceptTermsResponse> {\n  return request.post(endpoints.acceptUserTerms());\n}\n\nexport function getBanner(): Promise<t.TBannerResponse> {\n  return request.get(endpoints.banner());\n}\n\nexport function updateFeedback(\n  conversationId: string,\n  messageId: string,\n  payload: t.TUpdateFeedbackRequest,\n): Promise<t.TUpdateFeedbackResponse> {\n  return request.put(endpoints.feedback(conversationId, messageId), payload);\n}\n\n// 2FA\nexport function enableTwoFactor(): Promise<t.TEnable2FAResponse> {\n  return request.get(endpoints.enableTwoFactor());\n}\n\nexport function verifyTwoFactor(payload: t.TVerify2FARequest): Promise<t.TVerify2FAResponse> {\n  return request.post(endpoints.verifyTwoFactor(), payload);\n}\n\nexport function confirmTwoFactor(payload: t.TVerify2FARequest): Promise<t.TVerify2FAResponse> {\n  return request.post(endpoints.confirmTwoFactor(), payload);\n}\n\nexport function disableTwoFactor(payload?: t.TDisable2FARequest): Promise<t.TDisable2FAResponse> {\n  return request.post(endpoints.disableTwoFactor(), payload);\n}\n\nexport function regenerateBackupCodes(): Promise<t.TRegenerateBackupCodesResponse> {\n  return request.post(endpoints.regenerateBackupCodes());\n}\n\nexport function verifyTwoFactorTemp(\n  payload: t.TVerify2FATempRequest,\n): Promise<t.TVerify2FATempResponse> {\n  return request.post(endpoints.verifyTwoFactorTemp(), payload);\n}\n\n/* Memories */\nexport const getMemories = (): Promise<q.MemoriesResponse> => {\n  return request.get(endpoints.memories());\n};\n\nexport const deleteMemory = (key: string): Promise<void> => {\n  return request.delete(endpoints.memory(key));\n};\n\nexport const updateMemory = (\n  key: string,\n  value: string,\n  originalKey?: string,\n): Promise<q.TUserMemory> => {\n  return request.patch(endpoints.memory(originalKey || key), { key, value });\n};\n\nexport const updateMemoryPreferences = (preferences: {\n  memories: boolean;\n}): Promise<{ updated: boolean; preferences: { memories: boolean } }> => {\n  return request.patch(endpoints.memoryPreferences(), preferences);\n};\n\nexport const createMemory = (data: {\n  key: string;\n  value: string;\n}): Promise<{ created: boolean; memory: q.TUserMemory }> => {\n  return request.post(endpoints.memories(), data);\n};\n\nexport function searchPrincipals(\n  params: q.PrincipalSearchParams,\n): Promise<q.PrincipalSearchResponse> {\n  return request.get(endpoints.searchPrincipals(params));\n}\n\nexport function getAccessRoles(\n  resourceType: permissions.ResourceType,\n): Promise<q.AccessRolesResponse> {\n  return request.get(endpoints.getAccessRoles(resourceType));\n}\n\nexport function getResourcePermissions(\n  resourceType: permissions.ResourceType,\n  resourceId: string,\n): Promise<permissions.TGetResourcePermissionsResponse> {\n  return request.get(endpoints.getResourcePermissions(resourceType, resourceId));\n}\n\nexport function updateResourcePermissions(\n  resourceType: permissions.ResourceType,\n  resourceId: string,\n  data: permissions.TUpdateResourcePermissionsRequest,\n): Promise<permissions.TUpdateResourcePermissionsResponse> {\n  return request.put(endpoints.updateResourcePermissions(resourceType, resourceId), data);\n}\n\nexport function getEffectivePermissions(\n  resourceType: permissions.ResourceType,\n  resourceId: string,\n): Promise<permissions.TEffectivePermissionsResponse> {\n  return request.get(endpoints.getEffectivePermissions(resourceType, resourceId));\n}\n\nexport function getAllEffectivePermissions(\n  resourceType: permissions.ResourceType,\n): Promise<permissions.TAllEffectivePermissionsResponse> {\n  return request.get(endpoints.getAllEffectivePermissions(resourceType));\n}\n\n// SharePoint Graph API Token\nexport function getGraphApiToken(params: q.GraphTokenParams): Promise<q.GraphTokenResponse> {\n  return request.get(endpoints.graphToken(params.scopes));\n}\n\nexport function getDomainServerBaseUrl(): string {\n  return `${endpoints.apiBaseUrl()}/api`;\n}\n","export enum QueryKeys {\n  messages = 'messages',\n  sharedMessages = 'sharedMessages',\n  sharedLinks = 'sharedLinks',\n  allConversations = 'allConversations',\n  archivedConversations = 'archivedConversations',\n  searchConversations = 'searchConversations',\n  conversation = 'conversation',\n  searchEnabled = 'searchEnabled',\n  user = 'user',\n  name = 'name', // user key name\n  models = 'models',\n  balance = 'balance',\n  endpoints = 'endpoints',\n  presets = 'presets',\n  searchResults = 'searchResults',\n  tokenCount = 'tokenCount',\n  availablePlugins = 'availablePlugins',\n  startupConfig = 'startupConfig',\n  assistants = 'assistants',\n  assistant = 'assistant',\n  agents = 'agents',\n  agent = 'agent',\n  files = 'files',\n  fileConfig = 'fileConfig',\n  tools = 'tools',\n  toolAuth = 'toolAuth',\n  toolCalls = 'toolCalls',\n  mcpTools = 'mcpTools',\n  mcpConnectionStatus = 'mcpConnectionStatus',\n  mcpAuthValues = 'mcpAuthValues',\n  agentTools = 'agentTools',\n  actions = 'actions',\n  assistantDocs = 'assistantDocs',\n  agentDocs = 'agentDocs',\n  fileDownload = 'fileDownload',\n  voices = 'voices',\n  customConfigSpeech = 'customConfigSpeech',\n  prompts = 'prompts',\n  prompt = 'prompt',\n  promptGroups = 'promptGroups',\n  allPromptGroups = 'allPromptGroups',\n  promptGroup = 'promptGroup',\n  categories = 'categories',\n  randomPrompts = 'randomPrompts',\n  agentCategories = 'agentCategories',\n  marketplaceAgents = 'marketplaceAgents',\n  roles = 'roles',\n  conversationTags = 'conversationTags',\n  health = 'health',\n  userTerms = 'userTerms',\n  banner = 'banner',\n  /* Memories */\n  memories = 'memories',\n  principalSearch = 'principalSearch',\n  accessRoles = 'accessRoles',\n  resourcePermissions = 'resourcePermissions',\n  effectivePermissions = 'effectivePermissions',\n  graphToken = 'graphToken',\n  /* MCP Servers */\n  mcpServers = 'mcpServers',\n  mcpServer = 'mcpServer',\n}\n\n// Dynamic query keys that require parameters\nexport const DynamicQueryKeys = {\n  agentFiles: (agentId: string) => ['agentFiles', agentId] as const,\n} as const;\n\nexport enum MutationKeys {\n  fileUpload = 'fileUpload',\n  fileDelete = 'fileDelete',\n  updatePreset = 'updatePreset',\n  deletePreset = 'deletePreset',\n  loginUser = 'loginUser',\n  logoutUser = 'logoutUser',\n  refreshToken = 'refreshToken',\n  avatarUpload = 'avatarUpload',\n  speechToText = 'speechToText',\n  textToSpeech = 'textToSpeech',\n  assistantAvatarUpload = 'assistantAvatarUpload',\n  agentAvatarUpload = 'agentAvatarUpload',\n  updateAction = 'updateAction',\n  updateAgentAction = 'updateAgentAction',\n  deleteAction = 'deleteAction',\n  deleteAgentAction = 'deleteAgentAction',\n  revertAgentVersion = 'revertAgentVersion',\n  deleteUser = 'deleteUser',\n  updateRole = 'updateRole',\n  enableTwoFactor = 'enableTwoFactor',\n  verifyTwoFactor = 'verifyTwoFactor',\n  updateMemoryPreferences = 'updateMemoryPreferences',\n}\n","import { z } from 'zod';\n\n/**\n * Granular Permission System Types for Agent Sharing\n *\n * This file contains TypeScript interfaces and Zod schemas for the enhanced\n * agent permission system that supports sharing with specific users/groups\n * and Entra ID integration.\n */\n\n// ===== ENUMS & CONSTANTS =====\n\n/**\n * Principal types for permission system\n */\nexport enum PrincipalType {\n  USER = 'user',\n  GROUP = 'group',\n  PUBLIC = 'public',\n  ROLE = 'role',\n}\n\n/**\n * Principal model types for MongoDB references\n */\nexport enum PrincipalModel {\n  USER = 'User',\n  GROUP = 'Group',\n  ROLE = 'Role',\n}\n\n/**\n * Source of the principal (local LibreChat or external Entra ID)\n */\nexport type TPrincipalSource = 'local' | 'entra';\n\n/**\n * Access levels for agents\n */\nexport type TAccessLevel = 'none' | 'viewer' | 'editor' | 'owner';\n\n/**\n * Resource types for permission system\n */\nexport enum ResourceType {\n  AGENT = 'agent',\n  PROMPTGROUP = 'promptGroup',\n  MCPSERVER = 'mcpServer',\n}\n\n/**\n * Permission bit constants for bitwise operations\n */\nexport enum PermissionBits {\n  /** 001 - Can view and use agent */\n  VIEW = 1,\n  /**  010 - Can modify agent settings */\n  EDIT = 2,\n  /**  100 - Can delete agent */\n  DELETE = 4,\n  /**  1000 - Can share agent with others (future) */\n  SHARE = 8,\n}\n\n/**\n * Standard access role IDs\n */\nexport enum AccessRoleIds {\n  AGENT_VIEWER = 'agent_viewer',\n  AGENT_EDITOR = 'agent_editor',\n  AGENT_OWNER = 'agent_owner',\n  PROMPTGROUP_VIEWER = 'promptGroup_viewer',\n  PROMPTGROUP_EDITOR = 'promptGroup_editor',\n  PROMPTGROUP_OWNER = 'promptGroup_owner',\n  MCPSERVER_VIEWER = 'mcpServer_viewer',\n  MCPSERVER_EDITOR = 'mcpServer_editor',\n  MCPSERVER_OWNER = 'mcpServer_owner',\n}\n\n// ===== ZOD SCHEMAS =====\n\n/**\n * Principal schema - represents a user, group, role, or public access\n */\nexport const principalSchema = z.object({\n  type: z.nativeEnum(PrincipalType),\n  id: z.string().optional(), // undefined for 'public' type, role name for 'role' type\n  name: z.string().optional(),\n  email: z.string().optional(), // for user and group types\n  source: z.enum(['local', 'entra']).optional(),\n  avatar: z.string().optional(), // for user and group types\n  description: z.string().optional(), // for group and role types\n  idOnTheSource: z.string().optional(), // Entra ID for users/groups\n  accessRoleId: z.nativeEnum(AccessRoleIds).optional(), // Access role ID for permissions\n  memberCount: z.number().optional(), // for group type\n});\n\n/**\n * Access role schema - defines named permission sets\n */\nexport const accessRoleSchema = z.object({\n  accessRoleId: z.nativeEnum(AccessRoleIds),\n  name: z.string(),\n  description: z.string().optional(),\n  resourceType: z.nativeEnum(ResourceType).default(ResourceType.AGENT),\n  permBits: z.number(),\n});\n\n/**\n * Permission entry schema - represents a single ACL entry\n */\nexport const permissionEntrySchema = z.object({\n  id: z.string(),\n  principalType: z.nativeEnum(PrincipalType),\n  principalId: z.string().optional(), // undefined for 'public'\n  principalName: z.string().optional(),\n  role: accessRoleSchema,\n  grantedBy: z.string(),\n  grantedAt: z.string(), // ISO date string\n  inheritedFrom: z.string().optional(), // for project-level inheritance\n  source: z.enum(['local', 'entra']).optional(),\n});\n\n/**\n * Resource permissions response schema\n */\nexport const resourcePermissionsResponseSchema = z.object({\n  resourceType: z.nativeEnum(ResourceType),\n  resourceId: z.string(),\n  permissions: z.array(permissionEntrySchema),\n});\n\n/**\n * Update resource permissions request schema\n * This matches the user's requirement for the frontend DTO structure\n */\nexport const updateResourcePermissionsRequestSchema = z.object({\n  updated: principalSchema.array(),\n  removed: principalSchema.array(),\n  public: z.boolean(),\n  publicAccessRoleId: z.string().optional(),\n});\n\n/**\n * Update resource permissions response schema\n * Returns the updated permissions with accessRoleId included\n */\nexport const updateResourcePermissionsResponseSchema = z.object({\n  message: z.string(),\n  results: z.object({\n    principals: principalSchema.array(),\n    public: z.boolean(),\n    publicAccessRoleId: z.string().optional(),\n  }),\n});\n\n// ===== TYPESCRIPT TYPES =====\n\n/**\n * Principal - represents a user, group, or public access\n */\nexport type TPrincipal = z.infer<typeof principalSchema>;\n\n/**\n * Access role - defines named permission sets\n */\nexport type TAccessRole = z.infer<typeof accessRoleSchema>;\n\n/**\n * Permission entry - represents a single ACL entry\n */\nexport type TPermissionEntry = z.infer<typeof permissionEntrySchema>;\n\n/**\n * Resource permissions response\n */\nexport type TResourcePermissionsResponse = z.infer<typeof resourcePermissionsResponseSchema>;\n\n/**\n * Update resource permissions request\n * This matches the user's requirement for the frontend DTO structure\n */\nexport type TUpdateResourcePermissionsRequest = z.infer<\n  typeof updateResourcePermissionsRequestSchema\n>;\n\n/**\n * Update resource permissions response\n * Returns the updated permissions with accessRoleId included\n */\nexport type TUpdateResourcePermissionsResponse = z.infer<\n  typeof updateResourcePermissionsResponseSchema\n>;\n\n/**\n * Principal search request parameters\n */\nexport type TPrincipalSearchParams = {\n  q: string; // search query (required)\n  limit?: number; // max results (1-50, default 10)\n  type?: PrincipalType.USER | PrincipalType.GROUP | PrincipalType.ROLE; // filter by type (optional)\n};\n\n/**\n * Principal search result item\n */\nexport type TPrincipalSearchResult = {\n  id?: string | null; // null for Entra ID principals that don't exist locally yet\n  type: PrincipalType.USER | PrincipalType.GROUP | PrincipalType.ROLE;\n  name: string;\n  email?: string; // for users and groups\n  username?: string; // for users\n  avatar?: string; // for users and groups\n  provider?: string; // for users\n  source: 'local' | 'entra';\n  memberCount?: number; // for groups\n  description?: string; // for groups\n  idOnTheSource?: string; // Entra ID for users (maps to openidId) and groups (maps to idOnTheSource)\n};\n\n/**\n * Principal search response\n */\nexport type TPrincipalSearchResponse = {\n  query: string;\n  limit: number;\n  type?: PrincipalType.USER | PrincipalType.GROUP | PrincipalType.ROLE;\n  results: TPrincipalSearchResult[];\n  count: number;\n  sources: {\n    local: number;\n    entra: number;\n  };\n};\n\n/**\n * Available roles response\n */\nexport type TAvailableRolesResponse = {\n  resourceType: ResourceType;\n  roles: TAccessRole[];\n};\n\n/**\n * Get resource permissions response schema\n * This matches the enhanced aggregation-based endpoint response format\n */\nexport const getResourcePermissionsResponseSchema = z.object({\n  resourceType: z.nativeEnum(ResourceType),\n  resourceId: z.nativeEnum(AccessRoleIds),\n  principals: z.array(principalSchema),\n  public: z.boolean(),\n  publicAccessRoleId: z.nativeEnum(AccessRoleIds).optional(),\n});\n\n/**\n * Get resource permissions response type\n * This matches the enhanced aggregation-based endpoint response format\n */\nexport type TGetResourcePermissionsResponse = z.infer<typeof getResourcePermissionsResponseSchema>;\n\n/**\n * Effective permissions response schema\n * Returns just the permission bitmask for a user on a resource\n */\nexport const effectivePermissionsResponseSchema = z.object({\n  permissionBits: z.number(),\n});\n\n/**\n * Effective permissions response type\n * Returns just the permission bitmask for a user on a resource\n */\nexport type TEffectivePermissionsResponse = z.infer<typeof effectivePermissionsResponseSchema>;\n\n/**\n * All effective permissions response type\n * Map of resourceId to permissionBits for all accessible resources\n */\nexport type TAllEffectivePermissionsResponse = Record<string, number>;\n\n// ===== UTILITY TYPES =====\n\n/**\n * Permission check result\n */\nexport interface TPermissionCheck {\n  canView: boolean;\n  canEdit: boolean;\n  canDelete: boolean;\n  canShare: boolean;\n  accessLevel: TAccessLevel;\n}\n\n// ===== HELPER FUNCTIONS =====\n\n/**\n * Convert permission bits to access level\n */\nexport function permBitsToAccessLevel(permBits: number): TAccessLevel {\n  if ((permBits & PermissionBits.DELETE) > 0) return 'owner';\n  if ((permBits & PermissionBits.EDIT) > 0) return 'editor';\n  if ((permBits & PermissionBits.VIEW) > 0) return 'viewer';\n  return 'none';\n}\n\n/**\n * Convert access role ID to permission bits\n */\nexport function accessRoleToPermBits(accessRoleId: string): number {\n  switch (accessRoleId) {\n    case AccessRoleIds.AGENT_VIEWER:\n      return PermissionBits.VIEW;\n    case AccessRoleIds.AGENT_EDITOR:\n      return PermissionBits.VIEW | PermissionBits.EDIT;\n    case AccessRoleIds.AGENT_OWNER:\n      return PermissionBits.VIEW | PermissionBits.EDIT | PermissionBits.DELETE;\n    default:\n      return PermissionBits.VIEW;\n  }\n}\n\n/**\n * Check if permission bitmask contains other bitmask\n * @param permissions - The permission bitmask to check\n * @param requiredPermission - The required permission bit(s)\n * @returns {boolean} Whether permissions contains requiredPermission\n */\nexport function hasPermissions(permissions: number, requiredPermission: number): boolean {\n  return (permissions & requiredPermission) === requiredPermission;\n}\n","import { useQuery, useMutation, useQueryClient } from '@tanstack/react-query';\nimport type {\n  UseQueryOptions,\n  UseMutationResult,\n  QueryObserverResult,\n} from '@tanstack/react-query';\nimport { Constants, initialModelsConfig } from '../config';\nimport { defaultOrderQuery } from '../types/assistants';\nimport { MCPServerConnectionStatusResponse } from '../types/queries';\nimport * as dataService from '../data-service';\nimport * as m from '../types/mutations';\nimport * as q from '../types/queries';\nimport { QueryKeys } from '../keys';\nimport * as s from '../schemas';\nimport * as t from '../types';\nimport * as permissions from '../accessPermissions';\nimport { ResourceType } from '../accessPermissions';\n\nexport { hasPermissions } from '../accessPermissions';\n\nexport const useGetSharedMessages = (\n  shareId: string,\n  config?: UseQueryOptions<t.TSharedMessagesResponse>,\n): QueryObserverResult<t.TSharedMessagesResponse> => {\n  return useQuery<t.TSharedMessagesResponse>(\n    [QueryKeys.sharedMessages, shareId],\n    () => dataService.getSharedMessages(shareId),\n    {\n      refetchOnWindowFocus: false,\n      refetchOnReconnect: false,\n      refetchOnMount: false,\n      ...config,\n    },\n  );\n};\n\nexport const useGetSharedLinkQuery = (\n  conversationId: string,\n  config?: UseQueryOptions<t.TSharedLinkGetResponse>,\n): QueryObserverResult<t.TSharedLinkGetResponse> => {\n  const queryClient = useQueryClient();\n  return useQuery<t.TSharedLinkGetResponse>(\n    [QueryKeys.sharedLinks, conversationId],\n    () => dataService.getSharedLink(conversationId),\n    {\n      enabled:\n        !!conversationId &&\n        conversationId !== Constants.NEW_CONVO &&\n        conversationId !== Constants.PENDING_CONVO,\n      refetchOnWindowFocus: false,\n      refetchOnReconnect: false,\n      refetchOnMount: false,\n      onSuccess: (data) => {\n        queryClient.setQueryData([QueryKeys.sharedLinks, conversationId], {\n          conversationId: data.conversationId,\n          shareId: data.shareId,\n        });\n      },\n      ...config,\n    },\n  );\n};\n\nexport const useGetConversationByIdQuery = (\n  id: string,\n  config?: UseQueryOptions<s.TConversation>,\n): QueryObserverResult<s.TConversation> => {\n  return useQuery<s.TConversation>(\n    [QueryKeys.conversation, id],\n    () => dataService.getConversationById(id),\n    {\n      refetchOnWindowFocus: false,\n      refetchOnReconnect: false,\n      refetchOnMount: false,\n      ...config,\n    },\n  );\n};\n\n//This isn't ideal because its just a query and we're using mutation, but it was the only way\n//to make it work with how the Chat component is structured\nexport const useGetConversationByIdMutation = (id: string): UseMutationResult<s.TConversation> => {\n  const queryClient = useQueryClient();\n  return useMutation(() => dataService.getConversationById(id), {\n    // onSuccess: (res: s.TConversation) => {\n    onSuccess: () => {\n      queryClient.invalidateQueries([QueryKeys.conversation, id]);\n    },\n  });\n};\n\nexport const useUpdateMessageMutation = (\n  id: string,\n): UseMutationResult<unknown, unknown, t.TUpdateMessageRequest, unknown> => {\n  const queryClient = useQueryClient();\n  return useMutation((payload: t.TUpdateMessageRequest) => dataService.updateMessage(payload), {\n    onSuccess: () => {\n      queryClient.invalidateQueries([QueryKeys.messages, id]);\n    },\n  });\n};\n\nexport const useUpdateMessageContentMutation = (\n  conversationId: string,\n): UseMutationResult<unknown, unknown, t.TUpdateMessageContent, unknown> => {\n  const queryClient = useQueryClient();\n  return useMutation(\n    (payload: t.TUpdateMessageContent) => dataService.updateMessageContent(payload),\n    {\n      onSuccess: () => {\n        queryClient.invalidateQueries([QueryKeys.messages, conversationId]);\n      },\n    },\n  );\n};\n\nexport const useUpdateUserKeysMutation = (): UseMutationResult<\n  t.TUser,\n  unknown,\n  t.TUpdateUserKeyRequest,\n  unknown\n> => {\n  const queryClient = useQueryClient();\n  return useMutation((payload: t.TUpdateUserKeyRequest) => dataService.updateUserKey(payload), {\n    onSuccess: (data, variables) => {\n      queryClient.invalidateQueries([QueryKeys.name, variables.name]);\n    },\n  });\n};\n\nexport const useClearConversationsMutation = (): UseMutationResult<unknown> => {\n  const queryClient = useQueryClient();\n  return useMutation(() => dataService.clearAllConversations(), {\n    onSuccess: () => {\n      queryClient.invalidateQueries([QueryKeys.allConversations]);\n    },\n  });\n};\n\nexport const useRevokeUserKeyMutation = (name: string): UseMutationResult<unknown> => {\n  const queryClient = useQueryClient();\n  return useMutation(() => dataService.revokeUserKey(name), {\n    onSuccess: () => {\n      queryClient.invalidateQueries([QueryKeys.name, name]);\n      if (s.isAssistantsEndpoint(name)) {\n        queryClient.invalidateQueries([QueryKeys.assistants, name, defaultOrderQuery]);\n        queryClient.invalidateQueries([QueryKeys.assistantDocs]);\n        queryClient.invalidateQueries([QueryKeys.assistants]);\n        queryClient.invalidateQueries([QueryKeys.assistant]);\n        queryClient.invalidateQueries([QueryKeys.mcpTools]);\n        queryClient.invalidateQueries([QueryKeys.actions]);\n        queryClient.invalidateQueries([QueryKeys.tools]);\n      }\n    },\n  });\n};\n\nexport const useRevokeAllUserKeysMutation = (): UseMutationResult<unknown> => {\n  const queryClient = useQueryClient();\n  return useMutation(() => dataService.revokeAllUserKeys(), {\n    onSuccess: () => {\n      queryClient.invalidateQueries([QueryKeys.name]);\n      queryClient.invalidateQueries([\n        QueryKeys.assistants,\n        s.EModelEndpoint.assistants,\n        defaultOrderQuery,\n      ]);\n      queryClient.invalidateQueries([\n        QueryKeys.assistants,\n        s.EModelEndpoint.azureAssistants,\n        defaultOrderQuery,\n      ]);\n      queryClient.invalidateQueries([QueryKeys.assistantDocs]);\n      queryClient.invalidateQueries([QueryKeys.assistants]);\n      queryClient.invalidateQueries([QueryKeys.assistant]);\n      queryClient.invalidateQueries([QueryKeys.mcpTools]);\n      queryClient.invalidateQueries([QueryKeys.actions]);\n      queryClient.invalidateQueries([QueryKeys.tools]);\n    },\n  });\n};\n\nexport const useGetModelsQuery = (\n  config?: UseQueryOptions<t.TModelsConfig>,\n): QueryObserverResult<t.TModelsConfig> => {\n  return useQuery<t.TModelsConfig>([QueryKeys.models], () => dataService.getModels(), {\n    initialData: initialModelsConfig,\n    refetchOnWindowFocus: false,\n    refetchOnReconnect: false,\n    refetchOnMount: false,\n    staleTime: Infinity,\n    ...config,\n  });\n};\n\nexport const useCreatePresetMutation = (): UseMutationResult<\n  s.TPreset,\n  unknown,\n  s.TPreset,\n  unknown\n> => {\n  const queryClient = useQueryClient();\n  return useMutation((payload: s.TPreset) => dataService.createPreset(payload), {\n    onSuccess: () => {\n      queryClient.invalidateQueries([QueryKeys.presets]);\n    },\n  });\n};\n\nexport const useDeletePresetMutation = (): UseMutationResult<\n  m.PresetDeleteResponse,\n  unknown,\n  s.TPreset | undefined,\n  unknown\n> => {\n  const queryClient = useQueryClient();\n  return useMutation((payload: s.TPreset | undefined) => dataService.deletePreset(payload), {\n    onSuccess: () => {\n      queryClient.invalidateQueries([QueryKeys.presets]);\n    },\n  });\n};\n\nexport const useUpdateTokenCountMutation = (): UseMutationResult<\n  t.TUpdateTokenCountResponse,\n  unknown,\n  { text: string },\n  unknown\n> => {\n  const queryClient = useQueryClient();\n  return useMutation(({ text }: { text: string }) => dataService.updateTokenCount(text), {\n    onSuccess: () => {\n      queryClient.invalidateQueries([QueryKeys.tokenCount]);\n    },\n  });\n};\n\nexport const useRegisterUserMutation = (\n  options?: m.RegistrationOptions,\n): UseMutationResult<t.TError, unknown, t.TRegisterUser, unknown> => {\n  const queryClient = useQueryClient();\n  return useMutation<t.TRegisterUserResponse, t.TError, t.TRegisterUser>(\n    (payload: t.TRegisterUser) => dataService.register(payload),\n    {\n      ...options,\n      onSuccess: (...args) => {\n        queryClient.invalidateQueries([QueryKeys.user]);\n        if (options?.onSuccess) {\n          options.onSuccess(...args);\n        }\n      },\n    },\n  );\n};\n\nexport const useUserKeyQuery = (\n  name: string,\n  config?: UseQueryOptions<t.TCheckUserKeyResponse>,\n): QueryObserverResult<t.TCheckUserKeyResponse> => {\n  return useQuery<t.TCheckUserKeyResponse>(\n    [QueryKeys.name, name],\n    () => {\n      if (!name) {\n        return Promise.resolve({ expiresAt: '' });\n      }\n      return dataService.userKeyQuery(name);\n    },\n    {\n      refetchOnWindowFocus: false,\n      refetchOnReconnect: false,\n      refetchOnMount: false,\n      retry: false,\n      ...config,\n    },\n  );\n};\n\nexport const useRequestPasswordResetMutation = (): UseMutationResult<\n  t.TRequestPasswordResetResponse,\n  unknown,\n  t.TRequestPasswordReset,\n  unknown\n> => {\n  return useMutation((payload: t.TRequestPasswordReset) =>\n    dataService.requestPasswordReset(payload),\n  );\n};\n\nexport const useResetPasswordMutation = (): UseMutationResult<\n  unknown,\n  unknown,\n  t.TResetPassword,\n  unknown\n> => {\n  return useMutation((payload: t.TResetPassword) => dataService.resetPassword(payload));\n};\n\nexport const useAvailablePluginsQuery = <TData = s.TPlugin[]>(\n  config?: UseQueryOptions<s.TPlugin[], unknown, TData>,\n): QueryObserverResult<TData> => {\n  return useQuery<s.TPlugin[], unknown, TData>(\n    [QueryKeys.availablePlugins],\n    () => dataService.getAvailablePlugins(),\n    {\n      refetchOnWindowFocus: false,\n      refetchOnReconnect: false,\n      refetchOnMount: false,\n      ...config,\n    },\n  );\n};\n\nexport const useUpdateUserPluginsMutation = (\n  _options?: m.UpdatePluginAuthOptions,\n): UseMutationResult<t.TUser, unknown, t.TUpdateUserPlugins, unknown> => {\n  const queryClient = useQueryClient();\n  const { onSuccess, ...options } = _options ?? {};\n  return useMutation((payload: t.TUpdateUserPlugins) => dataService.updateUserPlugins(payload), {\n    ...options,\n    onSuccess: (...args) => {\n      queryClient.invalidateQueries([QueryKeys.user]);\n      onSuccess?.(...args);\n      if (args[1]?.action === 'uninstall' && args[1]?.pluginKey?.startsWith(Constants.mcp_prefix)) {\n        const serverName = args[1]?.pluginKey?.substring(Constants.mcp_prefix.length);\n        queryClient.invalidateQueries([QueryKeys.mcpAuthValues, serverName]);\n      }\n    },\n  });\n};\n\nexport const useReinitializeMCPServerMutation = (): UseMutationResult<\n  {\n    success: boolean;\n    message: string;\n    serverName: string;\n    oauthRequired?: boolean;\n    oauthUrl?: string;\n  },\n  unknown,\n  string,\n  unknown\n> => {\n  const queryClient = useQueryClient();\n  return useMutation((serverName: string) => dataService.reinitializeMCPServer(serverName), {\n    onSuccess: () => {\n      queryClient.invalidateQueries([QueryKeys.mcpTools]);\n    },\n  });\n};\n\nexport const useCancelMCPOAuthMutation = (): UseMutationResult<\n  m.CancelMCPOAuthResponse,\n  unknown,\n  string,\n  unknown\n> => {\n  const queryClient = useQueryClient();\n  return useMutation((serverName: string) => dataService.cancelMCPOAuth(serverName), {\n    onSuccess: () => {\n      queryClient.invalidateQueries([QueryKeys.mcpConnectionStatus]);\n    },\n  });\n};\n\nexport const useGetCustomConfigSpeechQuery = (\n  config?: UseQueryOptions<t.TCustomConfigSpeechResponse>,\n): QueryObserverResult<t.TCustomConfigSpeechResponse> => {\n  return useQuery<t.TCustomConfigSpeechResponse>(\n    [QueryKeys.customConfigSpeech],\n    () => dataService.getCustomConfigSpeech(),\n    {\n      refetchOnWindowFocus: false,\n      refetchOnReconnect: false,\n      refetchOnMount: false,\n      ...config,\n    },\n  );\n};\n\nexport const useUpdateFeedbackMutation = (\n  conversationId: string,\n  messageId: string,\n): UseMutationResult<t.TUpdateFeedbackResponse, Error, t.TUpdateFeedbackRequest> => {\n  const queryClient = useQueryClient();\n  return useMutation(\n    (payload: t.TUpdateFeedbackRequest) =>\n      dataService.updateFeedback(conversationId, messageId, payload),\n    {\n      onSuccess: () => {\n        queryClient.invalidateQueries([QueryKeys.messages, messageId]);\n      },\n    },\n  );\n};\n\nexport const useSearchPrincipalsQuery = (\n  params: q.PrincipalSearchParams,\n  config?: UseQueryOptions<q.PrincipalSearchResponse>,\n): QueryObserverResult<q.PrincipalSearchResponse> => {\n  return useQuery<q.PrincipalSearchResponse>(\n    [QueryKeys.principalSearch, params],\n    () => dataService.searchPrincipals(params),\n    {\n      enabled: !!params.q && params.q.length >= 2,\n      refetchOnWindowFocus: false,\n      refetchOnReconnect: false,\n      refetchOnMount: false,\n      staleTime: 30000,\n      ...config,\n    },\n  );\n};\n\nexport const useGetAccessRolesQuery = (\n  resourceType: ResourceType,\n  config?: UseQueryOptions<q.AccessRolesResponse>,\n): QueryObserverResult<q.AccessRolesResponse> => {\n  return useQuery<q.AccessRolesResponse>(\n    [QueryKeys.accessRoles, resourceType],\n    () => dataService.getAccessRoles(resourceType),\n    {\n      enabled: !!resourceType,\n      refetchOnWindowFocus: false,\n      refetchOnReconnect: false,\n      refetchOnMount: false,\n      staleTime: 5 * 60 * 1000, // Cache for 5 minutes\n      ...config,\n    },\n  );\n};\n\nexport const useGetResourcePermissionsQuery = (\n  resourceType: ResourceType,\n  resourceId: string,\n  config?: UseQueryOptions<permissions.TGetResourcePermissionsResponse>,\n): QueryObserverResult<permissions.TGetResourcePermissionsResponse> => {\n  return useQuery<permissions.TGetResourcePermissionsResponse>(\n    [QueryKeys.resourcePermissions, resourceType, resourceId],\n    () => dataService.getResourcePermissions(resourceType, resourceId),\n    {\n      enabled: !!resourceType && !!resourceId,\n      refetchOnWindowFocus: false,\n      refetchOnReconnect: false,\n      refetchOnMount: false,\n      staleTime: 2 * 60 * 1000, // Cache for 2 minutes\n      ...config,\n    },\n  );\n};\n\nexport const useUpdateResourcePermissionsMutation = (): UseMutationResult<\n  permissions.TUpdateResourcePermissionsResponse,\n  Error,\n  {\n    resourceType: ResourceType;\n    resourceId: string;\n    data: permissions.TUpdateResourcePermissionsRequest;\n  }\n> => {\n  const queryClient = useQueryClient();\n\n  return useMutation({\n    mutationFn: ({ resourceType, resourceId, data }) =>\n      dataService.updateResourcePermissions(resourceType, resourceId, data),\n    onSuccess: (_, variables) => {\n      queryClient.invalidateQueries({\n        queryKey: [QueryKeys.accessRoles, variables.resourceType],\n      });\n\n      queryClient.invalidateQueries({\n        queryKey: [QueryKeys.resourcePermissions, variables.resourceType, variables.resourceId],\n      });\n\n      queryClient.invalidateQueries({\n        queryKey: [QueryKeys.effectivePermissions, variables.resourceType, variables.resourceId],\n      });\n    },\n  });\n};\n\nexport const useGetEffectivePermissionsQuery = (\n  resourceType: ResourceType,\n  resourceId: string,\n  config?: UseQueryOptions<permissions.TEffectivePermissionsResponse>,\n): QueryObserverResult<permissions.TEffectivePermissionsResponse> => {\n  return useQuery<permissions.TEffectivePermissionsResponse>({\n    queryKey: [QueryKeys.effectivePermissions, resourceType, resourceId],\n    queryFn: () => dataService.getEffectivePermissions(resourceType, resourceId),\n    enabled: !!resourceType && !!resourceId,\n    refetchOnWindowFocus: false,\n    staleTime: 30000,\n    ...config,\n  });\n};\n\nexport const useGetAllEffectivePermissionsQuery = (\n  resourceType: ResourceType,\n  config?: UseQueryOptions<permissions.TAllEffectivePermissionsResponse>,\n): QueryObserverResult<permissions.TAllEffectivePermissionsResponse> => {\n  return useQuery<permissions.TAllEffectivePermissionsResponse>({\n    queryKey: [QueryKeys.effectivePermissions, 'all', resourceType],\n    queryFn: () => dataService.getAllEffectivePermissions(resourceType),\n    enabled: !!resourceType,\n    refetchOnWindowFocus: false,\n    staleTime: 30000,\n    ...config,\n  });\n};\n\nexport const useMCPServerConnectionStatusQuery = (\n  serverName: string,\n  config?: UseQueryOptions<MCPServerConnectionStatusResponse>,\n): QueryObserverResult<MCPServerConnectionStatusResponse> => {\n  return useQuery<MCPServerConnectionStatusResponse>(\n    [QueryKeys.mcpConnectionStatus, serverName],\n    () => dataService.getMCPServerConnectionStatus(serverName),\n    {\n      refetchOnWindowFocus: false,\n      refetchOnReconnect: false,\n      refetchOnMount: false,\n      staleTime: 10000, // 10 seconds\n      enabled: !!serverName,\n      ...config,\n    },\n  );\n};\n"],"names":["Tools","EToolResources","AnnotationTypes","StepStatus","MessageContentTypes","RunStatus","FilePurpose","AssistantStreamEvents","defaultOrderQuery","order","limit","AuthType","feedbackTagKeySchema","z","enum","feedbackRatingSchema","feedbackSchema","object","rating","tag","text","string","max","optional","uuid","EModelEndpoint","Providers","BedrockProviders","authTypeSchema","nativeEnum","Set","anthropic","openAI","custom","azureOpenAI","google","VERTEXAI","MISTRALAI","MISTRAL","DEEPSEEK","OPENROUTER","XAI","OPENAI","AZURE","agents","bedrock","ImageDetail","ReasoningEffort","ReasoningSummary","Verbosity","_a","low","auto","high","eImageDetailSchema","eReasoningEffortSchema","eReasoningSummarySchema","eVerbositySchema","_b","agent","id","name","description","instructions","model","model_parameters","tools","provider","projectIds","edges","artifacts","isCollaborative","recursion_limit","undefined","execute_code","file_search","web_search","category","support_contact","email","type","function","parameters","properties","required","openAISettings","default","temperature","min","step","top_p","presence_penalty","frequency_penalty","resendFiles","maxContextTokens","max_tokens","imageDetail","ANTHROPIC_MAX_OUTPUT","CLAUDE_4_64K_MAX_OUTPUT","CLAUDE_32K_MAX_OUTPUT","anthropicSettings","promptCache","thinking","thinkingBudget","maxOutputTokens","reset","modelName","test","set","value","topP","topK","legacy","agentsSettings","_d","eModelEndpointSchema","extendedModelEndpointSchema","union","tPluginAuthConfigSchema","authField","label","tPluginSchema","pluginKey","icon","authConfig","array","authenticated","boolean","chatMenu","isButton","toolkit","tExampleSchema","input","content","output","messageId","endpoint","clientId","nullable","conversationId","parentMessageId","responseMessageId","overrideParentMessageId","bg","title","or","literal","sender","generation","isCreatedByUser","error","clientTimestamp","createdAt","Date","toISOString","updatedAt","current","unfinished","searchResult","finish_reason","thread_id","iconURL","feedback","metadata","record","unknown","coerceNumber","number","transform","val","trim","parseFloat","DocumentType","lazy","null","tConversationSchema","endpointType","isArchived","user","messages","modelLabel","userLabel","promptPrefix","system","stream","context","examples","tags","file_ids","reasoning_effort","reasoning_summary","verbosity","useResponsesApi","disableStreaming","assistant_id","agent_id","region","maxTokens","additionalModelRequestFields","additional_instructions","append_current_datetime","presetOverride","stop","greeting","spec","expiredAt","fileTokenLimit","resendImages","chatGptLabel","tPresetSchema","omit","merge","presetId","defaultPreset","pick","shareId","isPublic","_id","count","position","googleBaseSchema","removeNullishValues","obj","removeEmptyStrings","newObj","__assign","Object","keys","forEach","key","catch","presencePenalty","frequencyPenalty","stopSequences","thinkingConfig","includeThoughts","strip","_c","_e","_f","_g","_h","_j","_k","_l","_m","_o","bannerId","message","displayFrom","displayTo","persistable","tModelSpecSchema","preset","group","showIconInMenu","showIconInHeader","authType","webSearch","fileSearch","executeCode","mcpServers","specsConfigSchema","enforce","prioritize","list","addedEndpoints","envVarRegex","extractEnvVariable","trimmed","singleMatch","match","varName","process","env","regex","result","matches","exec","push","fullMatch","index","i","length","envValue","substring","assistants","azureAssistants","excelFileTypes","__spreadArray","supportedMimeTypes","defaultSizeLimit","assistantsFileConfig","fileLimit","fileSizeLimit","totalSizeLimit","disabled","supportedMimeTypesSchema","any","refine","mimeTypes","every","mimeType","RegExp","endpointFileConfigSchema","fileConfigSchema","endpoints","serverFileSizeLimit","avatarSizeLimit","imageGeneration","percentage","px","clientImageResize","enabled","maxWidth","maxHeight","quality","ocr","BASE_URL","envApiBaseUrl","globalThis","__VITE_API_BASE_URL__","getViteApiBaseUrl","browser","baseEl","document","querySelector","getAttribute","endsWith","slice","FileSources","FileContext","AuthTypeEnum","AuthorizationTypeEnum","TokenExchangeMethodEnum","apiBaseUrl","messagesRoot","concat","params","rest","__rest","query","entries","filter","Array","isArray","map","v","encodeURIComponent","join","String","buildQuery","shareRoot","keysEndpoint","conversationsRoot","speech","BaseOptionsSchema","startup","iconPath","timeout","initTimeout","serverInstructions","requiresOAuth","oauth","authorization_url","url","token_url","client_id","client_secret","scope","redirect_uri","token_exchange_method","grant_types_supported","token_endpoint_auth_methods_supported","response_types_supported","code_challenge_methods_supported","skip_code_challenge_check","revocation_endpoint","revocation_endpoint_auth_methods_supported","oauth_headers","apiKey","source","authorization_type","custom_header","customUserVars","StdioOptionsSchema","extend","command","args","processedEnv","_i","stderr","WebSocketOptionsSchema","pipe","protocol","URL","SSEOptionsSchema","headers","StreamableHTTPOptionsSchema","MCPOptionsSchema","MCPServersSchema","omitServerManagedFields","schema","SettingsViews","Capabilities","AgentCapabilities","fileSourceSchema","fileStrategiesSchema","avatar","image","modelConfigSchema","deploymentName","version","azureBaseSchema","serverless","instanceName","addParams","dropParams","forcePrompt","baseURL","additionalHeaders","azureGroupSchema","models","and","azureGroupConfigsSchema","baseEndpointSchema","streamRate","titlePrompt","titleModel","titleConvo","titleMethod","titleEndpoint","titlePromptTemplate","availableRegions","RateLimitPrefix","modelItemSchema","assistantEndpointSchema","disableBuilder","pollIntervalMs","timeoutMs","supportedIds","excludedIds","privateAssistants","retrievalModels","capabilities","code_interpreter","image_vision","retrieval","actions","fetch","userIdQuery","defaultAgentCapabilities","chain","agentsEndpointSchema","recursionLimit","maxRecursionLimit","maxCitations","maxCitationsPerFile","minRelevanceScore","allowedProviders","endpointSchema","safeParse","success","values","summarize","summaryModel","modelDisplayLabel","customParams","defaultParamsEndpoint","paramDefinitions","strict","customOrder","directEndpoint","titleMessageRole","azureEndpointSchema","groups","plugins","partial","ttsOpenaiSchema","voices","ttsAzureOpenAISchema","apiVersion","ttsElevenLabsSchema","websocketUrl","voice_settings","similarity_boost","stability","style","use_speaker_boost","pronunciation_dictionary_locators","ttsLocalaiSchema","backend","ttsSchema","openai","elevenlabs","localai","sttOpenaiSchema","sttAzureOpenAISchema","sttSchema","speechTab","conversationMode","advancedMode","speechToText","engineSTT","languageSTT","autoTranscribeAudio","decibelValue","autoSendText","textToSpeech","engineTTS","voice","languageTTS","automaticPlayback","playbackRate","cacheTTS","EImageOutputType","rateLimitSchema","fileUploads","ipMax","ipWindowInMinutes","userMax","userWindowInMinutes","conversationsImport","tts","stt","OCRStrategy","SearchCategories","SearchProviders","ScraperProviders","RerankerTypes","SafeSearchTypes","termsOfServiceSchema","externalUrl","openNewTab","modalAcceptance","modalTitle","modalContent","localizedStringSchema","mcpServersSchema","placeholder","use","create","share","trustCheckbox","subLabel","interfaceSchema","privacyPolicy","termsOfService","customWelcome","endpointsMenu","modelSelect","sidePanel","multiConvo","bookmarks","memories","presets","prompts","temporaryChat","temporaryChatRetention","runCode","peoplePicker","users","roles","marketplace","fileCitations","turnstileOptionsSchema","language","size","turnstileSchema","siteKey","options","KnownEndpoints","FetchTokenConfig","webSearchSchema","serperApiKey","searxngInstanceUrl","searxngApiKey","firecrawlApiKey","firecrawlApiUrl","firecrawlVersion","jinaApiKey","jinaApiUrl","cohereApiKey","searchProvider","scraperProvider","rerankerType","scraperTimeout","safeSearch","MODERATE","firecrawlOptions","formats","includeTags","excludeTags","waitFor","maxAge","mobile","skipTlsVerification","blockAds","removeBase64Images","parsePDF","storeInCache","zeroDataRetention","location","country","languages","onlyMainContent","changeTrackingOptions","modes","prompt","ocrSchema","mistralModel","strategy","MISTRAL_OCR","balanceSchema","startBalance","autoRefillEnabled","refillIntervalValue","refillIntervalUnit","refillAmount","transactionsSchema","memorySchema","validKeys","tokenLimit","charLimit","personalize","messageWindowSize","customEndpointsSchema","cache","memory","secureImageLinks","imageOutputType","PNG","includedTools","filteredTools","mcpSettings","allowedDomains","interface","turnstile","fileStrategy","local","fileStrategies","registration","socialLogins","balance","transactions","rateLimits","fileConfig","modelSpecs","all","data","ollama","deepseek","xai","vercel","helicone","VisionModes","InfiniteCollections","Time","CacheKeys","ViolationTypes","ErrorTypes","AuthKeys","ImageDetailCost","SettingsTabValues","STTProviders","TTSProviders","Constants","LocalStorageKeys","ForkOptions","CohereConstants","SystemCategories","sharedOpenAIModels","defaultModels","openAIModels","initialModelsConfig","initial","str","_post","axios","post","JSON","stringify","sent","isRefreshing","failedQueue","refreshToken","retry","endpoints.refreshToken","dispatchTokenUpdatedEvent","token","defaults","common","setTokenHeader","window","dispatchEvent","CustomEvent","detail","processQueue","prom","reject","resolve","interceptors","response","__awaiter","originalRequest","config","Promise","includes","status","_retry","console","warn","err_1","href","log","err_2","request","get","getResponse","postMultiPart","formData","postTTS","responseType","put","delete","deleteWithOptions","patch","revokeUserKey","endpoints.revokeUserKey","revokeAllUserKeys","getSharedMessages","endpoints.shareMessages","getSharedLink","endpoints.getSharedLink","updateUserKey","payload","Error","createPreset","deletePreset","arg","updateTokenCount","register","userKeyQuery","endpoints.userKeyQuery","requestPasswordReset","resetPassword","getAvailablePlugins","updateUserPlugins","reinitializeMCPServer","serverName","endpoints.mcpReinitialize","getMCPServerConnectionStatus","endpoints.mcpServerConnectionStatus","cancelMCPOAuth","endpoints.cancelMCPOAuth","QueryKeys","MutationKeys","PrincipalType","PrincipalModel","ResourceType","PermissionBits","AccessRoleIds","getCustomConfigSpeech","clearAllConversations","getConversationById","endpoints.conversationById","updateFeedback","endpoints.feedback","searchPrincipals","q","types","endpoints.searchPrincipals","getAccessRoles","resourceType","endpoints.getAccessRoles","getResourcePermissions","resourceId","endpoints.getResourcePermissions","updateResourcePermissions","endpoints.updateResourcePermissions","getEffectivePermissions","endpoints.getEffectivePermissions","getAllEffectivePermissions","endpoints.getAllEffectivePermissions","principalSchema","idOnTheSource","accessRoleId","memberCount","accessRoleSchema","AGENT","permBits","permissionEntrySchema","principalType","principalId","principalName","role","grantedBy","grantedAt","inheritedFrom","hasPermissions","permissions","requiredPermission","updated","removed","public","publicAccessRoleId","results","principals","permissionBits","useGetSharedMessages","useQuery","sharedMessages","dataService.getSharedMessages","refetchOnWindowFocus","refetchOnReconnect","refetchOnMount","useGetSharedLinkQuery","queryClient","useQueryClient","sharedLinks","dataService.getSharedLink","NEW_CONVO","PENDING_CONVO","onSuccess","setQueryData","useGetConversationByIdQuery","conversation","dataService.getConversationById","useGetConversationByIdMutation","useMutation","invalidateQueries","useUpdateMessageMutation","endpoints.messages","dataService.updateMessage","useUpdateMessageContentMutation","dataService.updateMessageContent","useUpdateUserKeysMutation","dataService.updateUserKey","variables","useClearConversationsMutation","dataService.clearAllConversations","allConversations","useRevokeUserKeyMutation","dataService.revokeUserKey","_endpoint","toLowerCase","assistantDocs","assistant","mcpTools","useRevokeAllUserKeysMutation","dataService.revokeAllUserKeys","s.EModelEndpoint","useGetModelsQuery","initialData","staleTime","Infinity","useCreatePresetMutation","dataService.createPreset","useDeletePresetMutation","dataService.deletePreset","useUpdateTokenCountMutation","dataService.updateTokenCount","tokenCount","useRegisterUserMutation","dataService.register","arguments","apply","useUserKeyQuery","dataService.userKeyQuery","expiresAt","useRequestPasswordResetMutation","dataService.requestPasswordReset","useResetPasswordMutation","dataService.resetPassword","useAvailablePluginsQuery","availablePlugins","dataService.getAvailablePlugins","useUpdateUserPluginsMutation","_options","dataService.updateUserPlugins","action","startsWith","mcp_prefix","mcpAuthValues","useReinitializeMCPServerMutation","dataService.reinitializeMCPServer","useCancelMCPOAuthMutation","dataService.cancelMCPOAuth","mcpConnectionStatus","useGetCustomConfigSpeechQuery","customConfigSpeech","dataService.getCustomConfigSpeech","useUpdateFeedbackMutation","dataService.updateFeedback","useSearchPrincipalsQuery","principalSearch","dataService.searchPrincipals","useGetAccessRolesQuery","accessRoles","dataService.getAccessRoles","useGetResourcePermissionsQuery","resourcePermissions","dataService.getResourcePermissions","useUpdateResourcePermissionsMutation","mutationFn","dataService.updateResourcePermissions","_","queryKey","effectivePermissions","useGetEffectivePermissionsQuery","queryFn","dataService.getEffectivePermissions","useGetAllEffectivePermissionsQuery","dataService.getAllEffectivePermissions","useMCPServerConnectionStatusQuery","dataService.getMCPServerConnectionStatus"],"mappings":"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,EAAUG,QAGtF,OAAOP,CACT,EChD0BlO,GAAA,CAAA,GACvBzB,EAAeO,SAAS,EACzBkB,GAACzB,EAAeU,SAAS,EACzBe,GAACzB,EAAeqQ,aAAa,EAC7B5O,GAACzB,EAAesQ,kBAAkB,EAClC7O,GAACzB,EAAemB,SAAS,EACzBM,GAACzB,EAAeS,cAAc,EAC9BgB,GAACzB,EAAeM,YAAY,EAC5BmB,GAACzB,EAAeQ,SAAS,EACzBiB,GAACzB,EAAeoB,UAAU,EAGrB,IAAMmP,GAAiB,CAC5B,2BACA,sBACA,wBACA,yBACA,sBACA,6BACA,kBACA,oBACA,qEAG4BC,EAAA,CAC5B,WACA,aACA,kBACA,0EACA,YACA,cACA,mBACA,gBACA,kBACA,aACA,4EACA,gBACA,uBACA,cACA,aACA,aACA,WACA,WACA,aACA,kBACA,YACA,YACA,aACA,aACA,oBACA,mBACA,yBACA,kBACA,mBACA,+BACA,kBACA,kBACA,YACA,gBAEA,YACA,YACA,YACA,YACA,YACA,aACA,YACA,YACA,YACA,YAEA,YACA,YACA,YACA,YACA,YACA,aACA,YACA,aACA,cACGD,OAGoCC,EAAA,CACvC,WACA,aACA,kBACA,0EACA,YACA,cACA,mBACA,gBACA,kBACA,aACA,4EACA,gBACA,uBACA,cACA,aACA,aACA,WACA,aACA,kBACA,YACA,YACA,aACA,aACA,oBACA,yBACA,kBACA,mBACGD,OAuBE,IA4BME,GAAqB,CAxBhC,+JAHA,wJAMA,wNAE4B,yCAKA,sDAF5B,kGAwBA,2BAmJIC,GAJkB,QAIW,IAE7BC,GAAuB,CAC3BC,UAAW,GACXC,cAAeH,GACfI,eAAgBJ,GAChBD,mBAAkBA,GAClBM,UAAU,IAID9O,GAAA,CAAA,GACNjC,EAAeqQ,YAAaM,GAC7B1O,GAACjC,EAAesQ,iBAAkBK,GAClC1O,GAACjC,EAAemB,QAASwP,GACzB1O,GAACjC,EAAeM,WAAY,CAC1BsQ,UAAW,GACXC,cAAeH,GACfI,eAAgBJ,GAChBD,mBAAkBA,GAClBM,UAAU,GAEZ9O,GAAA4B,QAAS,CACP+M,UAAW,GACX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zBha,GAAC8U,GAAemF,UAAW,WAG7B,IA4MYC,GAkCAC,GAcAC,GAgBAC,GA2FAC,GAsEAC,GA0EAC,GAsBAC,GAmBAC,GAuCAC,GAWAC,GAoBAC,GAoDAC,GAuDAC,GAcAC,GAuBAC,GAtvBNC,GAAqB,CACzB,UACA,sBACA,gBACA,qBACA,QACA,aACA,aACA,oBACA,UACA,eACA,eACA,cACA,SACA,kBACA,6BACA,gBACA,qBACA,cACA,yBACA,qBACA,sBACA,qBACA,qBACA,yBACA,oBACA,QACA,aACA,iBACA,aACA,sBAsEWC,KAAa9iB,GAAA,CAAA,GACvBzF,EAAesQ,iBAAkBgY,GAClC7iB,GAACzF,EAAeqQ,mBAAiBiY,IAAkB,GAAA,CAAE,sBAAoB,GACzE7iB,GAACzF,EAAemB,QAASmnB,GACzB7iB,GAACzF,EAAeU,QAAS,CAEvB,iBACA,mBACA,wBAEA,uBACA,yBAEF+E,GAACzF,EAAeM,WAhFY,CAC5B,oBACA,6BACA,mBACA,4BACA,kBACA,2BACA,kBACA,2BACA,oBACA,yBACA,kBACA,2BACA,6BACA,4BACA,6BACA,6BACA,2BACA,yBACA,2BACA,0BACA,aACA,WACA,aACA,WACA,gBACA,mBACA,yBAsDAmF,GAACzF,EAAeO,QAAMiQ,EAAAA,EAAA,GACjB8X,IAAkB,GAAA,CACrB,oBACA,uBACA,8BACA,2BACD,GACD7iB,GAACzF,EAAeoB,SA1DW,CAC3B,4CACA,2CACA,0CACA,4CACA,4CACA,2CACA,yCACA,wCACA,0CACA,sBACA,wBACA,8BAGA,wBACA,6BACA,0BACA,0BACA,+BACA,gCACA,iCACA,kCACA,mCACA,mCACA,qCACA,kCACA,kCACA,kCACA,2BAGA,4BACA,+BACA,sCA+BIonB,GAAeD,GAAcvoB,EAAeO,QAErCkoB,KAAmBpb,GAAA,CAC9Bqb,QAAS,KACR1oB,EAAeO,QAASioB,GACzBnb,GAACrN,EAAeqQ,YAAamY,GAAa1U,QATd,SAAC6U,GAC7B,MAAO,mBAAmBzjB,KAAKyjB,KAAS,mBAAmBzjB,KAAKyjB,EAClE,IAQEtb,GAACr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"}