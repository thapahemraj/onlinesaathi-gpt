{"version":3,"file":"loadSharedConfigFiles-C6WdD3O1.js","sources":["../../../node_modules/@aws-sdk/credential-provider-node/node_modules/@smithy/shared-ini-file-loader/dist-es/constants.js","../../../node_modules/@aws-sdk/credential-provider-node/node_modules/@smithy/shared-ini-file-loader/dist-es/getConfigData.js","../../../node_modules/@aws-sdk/credential-provider-node/node_modules/@smithy/shared-ini-file-loader/dist-es/getConfigFilepath.js","../../../node_modules/@aws-sdk/credential-provider-node/node_modules/@smithy/shared-ini-file-loader/dist-es/getCredentialsFilepath.js","../../../node_modules/@aws-sdk/credential-provider-node/node_modules/@smithy/shared-ini-file-loader/dist-es/parseIni.js","../../../node_modules/@aws-sdk/credential-provider-node/node_modules/@smithy/shared-ini-file-loader/dist-es/loadSharedConfigFiles.js"],"sourcesContent":["export const CONFIG_PREFIX_SEPARATOR = \".\";\n","import { IniSectionType } from \"@smithy/types\";\nimport { CONFIG_PREFIX_SEPARATOR } from \"./constants\";\nexport const getConfigData = (data) => Object.entries(data)\n    .filter(([key]) => {\n    const indexOfSeparator = key.indexOf(CONFIG_PREFIX_SEPARATOR);\n    if (indexOfSeparator === -1) {\n        return false;\n    }\n    return Object.values(IniSectionType).includes(key.substring(0, indexOfSeparator));\n})\n    .reduce((acc, [key, value]) => {\n    const indexOfSeparator = key.indexOf(CONFIG_PREFIX_SEPARATOR);\n    const updatedKey = key.substring(0, indexOfSeparator) === IniSectionType.PROFILE ? key.substring(indexOfSeparator + 1) : key;\n    acc[updatedKey] = value;\n    return acc;\n}, {\n    ...(data.default && { default: data.default }),\n});\n","import { join } from \"path\";\nimport { getHomeDir } from \"./getHomeDir\";\nexport const ENV_CONFIG_PATH = \"AWS_CONFIG_FILE\";\nexport const getConfigFilepath = () => process.env[ENV_CONFIG_PATH] || join(getHomeDir(), \".aws\", \"config\");\n","import { join } from \"path\";\nimport { getHomeDir } from \"./getHomeDir\";\nexport const ENV_CREDENTIALS_PATH = \"AWS_SHARED_CREDENTIALS_FILE\";\nexport const getCredentialsFilepath = () => process.env[ENV_CREDENTIALS_PATH] || join(getHomeDir(), \".aws\", \"credentials\");\n","import { IniSectionType } from \"@smithy/types\";\nimport { CONFIG_PREFIX_SEPARATOR } from \"./constants\";\nconst prefixKeyRegex = /^([\\w-]+)\\s([\"'])?([\\w-@\\+\\.%:/]+)\\2$/;\nconst profileNameBlockList = [\"__proto__\", \"profile __proto__\"];\nexport const parseIni = (iniData) => {\n    const map = {};\n    let currentSection;\n    let currentSubSection;\n    for (const iniLine of iniData.split(/\\r?\\n/)) {\n        const trimmedLine = iniLine.split(/(^|\\s)[;#]/)[0].trim();\n        const isSection = trimmedLine[0] === \"[\" && trimmedLine[trimmedLine.length - 1] === \"]\";\n        if (isSection) {\n            currentSection = undefined;\n            currentSubSection = undefined;\n            const sectionName = trimmedLine.substring(1, trimmedLine.length - 1);\n            const matches = prefixKeyRegex.exec(sectionName);\n            if (matches) {\n                const [, prefix, , name] = matches;\n                if (Object.values(IniSectionType).includes(prefix)) {\n                    currentSection = [prefix, name].join(CONFIG_PREFIX_SEPARATOR);\n                }\n            }\n            else {\n                currentSection = sectionName;\n            }\n            if (profileNameBlockList.includes(sectionName)) {\n                throw new Error(`Found invalid profile name \"${sectionName}\"`);\n            }\n        }\n        else if (currentSection) {\n            const indexOfEqualsSign = trimmedLine.indexOf(\"=\");\n            if (![0, -1].includes(indexOfEqualsSign)) {\n                const [name, value] = [\n                    trimmedLine.substring(0, indexOfEqualsSign).trim(),\n                    trimmedLine.substring(indexOfEqualsSign + 1).trim(),\n                ];\n                if (value === \"\") {\n                    currentSubSection = name;\n                }\n                else {\n                    if (currentSubSection && iniLine.trimStart() === iniLine) {\n                        currentSubSection = undefined;\n                    }\n                    map[currentSection] = map[currentSection] || {};\n                    const key = currentSubSection ? [currentSubSection, name].join(CONFIG_PREFIX_SEPARATOR) : name;\n                    map[currentSection][key] = value;\n                }\n            }\n        }\n    }\n    return map;\n};\n","import { join } from \"path\";\nimport { getConfigData } from \"./getConfigData\";\nimport { getConfigFilepath } from \"./getConfigFilepath\";\nimport { getCredentialsFilepath } from \"./getCredentialsFilepath\";\nimport { getHomeDir } from \"./getHomeDir\";\nimport { parseIni } from \"./parseIni\";\nimport { slurpFile } from \"./slurpFile\";\nconst swallowError = () => ({});\nexport { CONFIG_PREFIX_SEPARATOR } from \"./constants\";\nexport const loadSharedConfigFiles = async (init = {}) => {\n    const { filepath = getCredentialsFilepath(), configFilepath = getConfigFilepath() } = init;\n    const homeDir = getHomeDir();\n    const relativeHomeDirPrefix = \"~/\";\n    let resolvedFilepath = filepath;\n    if (filepath.startsWith(relativeHomeDirPrefix)) {\n        resolvedFilepath = join(homeDir, filepath.slice(2));\n    }\n    let resolvedConfigFilepath = configFilepath;\n    if (configFilepath.startsWith(relativeHomeDirPrefix)) {\n        resolvedConfigFilepath = join(homeDir, configFilepath.slice(2));\n    }\n    const parsedFiles = await Promise.all([\n        slurpFile(resolvedConfigFilepath, {\n            ignoreCache: init.ignoreCache,\n        })\n            .then(parseIni)\n            .then(getConfigData)\n            .catch(swallowError),\n        slurpFile(resolvedFilepath, {\n            ignoreCache: init.ignoreCache,\n        })\n            .then(parseIni)\n            .catch(swallowError),\n    ]);\n    return {\n        configFile: parsedFiles[0],\n        credentialsFile: parsedFiles[1],\n    };\n};\n"],"names":["IniSectionType","join","getHomeDir","slurpFile"],"mappings":"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","x_google_ignoreList":[0,1,2,3,4,5]}